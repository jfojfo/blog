<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>How to Create Android Update Zip Package | jfo planet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="How to Create Android Update Zip PackageThere are several ways to install applications or&amp;#160; library files to an Android Phone. You can use Market application to find and install or adb  command l">
<meta property="og:type" content="article">
<meta property="og:title" content="How to Create Android Update Zip Package">
<meta property="og:url" content="http://blog.pickbox.me/2010/08/11/How-to-Create-Android-Update-Zip-Package/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="How to Create Android Update Zip PackageThere are several ways to install applications or&amp;#160; library files to an Android Phone. You can use Market application to find and install or adb  command l">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/82498f1079c73442203f2e66.jpg">
<meta property="og:updated_time" content="2016-10-15T05:24:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to Create Android Update Zip Package">
<meta name="twitter:description" content="How to Create Android Update Zip PackageThere are several ways to install applications or&amp;#160; library files to an Android Phone. You can use Market application to find and install or adb  command l">
<meta name="twitter:image" content="http://img.pickbox.me/wp-content/uploads/pic/82498f1079c73442203f2e66.jpg">
  
    <link rel="alternative" href="/atom.xml" title="jfo planet" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.ico">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">jfo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">分类</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">jfo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">jfo</h1>
			</hgroup>
			
			<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-How-to-Create-Android-Update-Zip-Package" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      How to Create Android Update Zip Package
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> <a href="http://www.londatiga.net/it/how-to-create-android-update-zip-package/" rel="external" title="Permanent Link to How to Create Android Update Zip Package" target="_blank">How to Create Android Update Zip Package</a></p><p>There are several ways to install applications or&#160; library files to an <a title="Android" href="http://www.android.com/" target="_blank">Android</a> <a href="http://www.londatiga.net/it/samsung-i5700-galaxy-spica-android-2-1-flashing-guide/" target="_blank">Phone</a>. You can use <em>Market</em> application to find and install or <a title="Android ADB Tool" href="http://www.londatiga.net/it/how-to-create-android-update-zip-package/developer.android.com/guide/developing/tools/adb.html" target="_blank">adb</a>  command line tool to install or push the files to Android file system.  These are all easy to implement for&#160; single&#160; file but if you have  several applications or library files to install at once, it might be  better to use <strong>update zip</strong> file. The update zip file is  Android advanced system to install applications or lib files to Android  file system using recovery tool. This method is commonly used by rom or  theme developers to distribute their package.</p><p>Creating an update zip file is quite easy, all you have to do is put  the files in corresponding directory in Android file system and an update-script file to copy the files. For example, to install Calculator.apk into system/app and copy libsec-ril.so file into system/lib :</p><ul> <li>Create an empty folder (eg. C:myupdate)</li> <li>Create C:myupdatesystemapp folder for Calculator.apk and&#160; C:myupdatesystemlib folder for libsec-ril.so</li> <li>Create C:myupdateMETA-INFcomgoogleandroid folder for update-script file.</li> <li>Create the update-script file with the following syntax:</li>    show_progress 0.1 0<br><br>copy_dir PACKAGE:system SYSTEM:<br><br>show_progress 0.1 10    <p>Line 1&amp;5 : show progress bar<br>    Line 3: copy system folder from update package to Android’s /system</p> <p>Note: you should add one extra&#160; line at the end of the file (Line 6)</p> <li>Compress the entire contents of C:myupdate folder to zip (not the myupdate folder itself)</li> <li>Sign the myupdate.zip file</li> <p>java -jar signapk.jar certificate.pem key.pk8 myupdate.zip update.zip</p> <p>Note: you can find tutorial on how to sign the update.zip file <a title="How to sign android update.zip file" href="http://www.londatiga.net/it/how-to-sign-apk-zip-files/" target="_blank">here</a></p> <li>Copy the update.zip file to sdcard and apply it from recovery console</li></ul><p>update-script syntax reference (definitions from recovery.c android source code):</p><ul> <li><strong>copy_dir</strong></li> <p>Syntax: copy_dir &lt;src-dir&gt; &lt;dst-dir&gt; [&lt;timestamp&gt;]<br>    Copy the contents  of &lt;src-dir&gt; to&#160; &lt;dst-dir&gt;. The original  contents of &lt;dst-dir&gt; are preserved unless something in   &lt;src-dir&gt; overwrote them.<br>    Ex: copy_dir PACKAGE:system SYSTEM:</p> <li><strong>format</strong></li> <p>Syntax: format &lt;root&gt;<br>    Format a partiti0n<br>    Ex:<strong> </strong>format SYSTEM:, will format entire /system . Note: formatting erases data irreversibly.</p> <li><strong>delete</strong></li> <p>Syntax: delete  &lt;file1&gt; [… &lt;fileN&gt;]<br>    Delete&#160; file.<br>    EX: delete SYSTEM:app/Calculator.apk, will delete Calculator.apk from system/app directory.</p> <li><strong>delete_recursive</strong></li> <p>Syntax: delete_recursive  &lt;file-or-dir1&gt; [… &lt;file-or-dirN&gt;]<br>    Delete a file or directory with all of it’s contents recursively<br>    Ex: delete_recursive DATA:dalvik-cache, will delete /data/dalvik-cache directory with all of it’s contents</p> <li><strong>run_program</strong></li> <p>Syntax: run_program &lt;program-file&gt; [&lt;args&gt; …]<br>    Run an external program included in the update package.<br>    Ex: run_program PACKAGE:install_busybox.sh, will run install_busybox.sh script (shell command) included in the update package.</p> <li><strong>set_perm</strong></li> <p>Syntax: set_perm &lt;uid&gt; &lt;gid&gt; &lt;mode&gt; &lt;path&gt; [… &lt;pathN&gt;]<br>    Set ownership and permission of single file or entire directory trees, like ‘chmod’, ‘chown’, and ‘chgrp’ all in one<br>    Ex: set_perm 0 2000 0550 SYSTEM:etc/init.goldfish.sh</p> <li><strong>set_perm_recursive</strong></li> <p>Syntax: set_perm_recursive &lt;uid&gt; &lt;gid&gt; &lt;dir-mode&gt; &lt;file-moe&gt; &lt;path&gt; [… &lt;pathN&gt;]<br>    Set ownership and permission of a directory with all of it’s contents recursively</p> <p>Ex: set_perm_recursive 0 0 0755 0644 SYSTEM:app</p> <li><strong>show_progress </strong></li> <p>Syntax: show_progress &lt;fraction&gt; &lt;duration&gt;<br>    Use  of the on-screen progress meter for the next operation,  automatically advancing the meter over  &lt;duration&gt; seconds (or  more rapidly if the actual rate of progress can be determined).<br>    Ex: show_progress 0.1 0</p> <li><strong>symlink</strong></li> <p>Syntax: symlink &lt;link-target&gt; &lt;link-path&gt;</p> <p>Create a symlink (like ‘ln-s’). The &lt;link-path&gt; is in root:path format, but &lt;link-target&gt; is<br>    for the target filesystem (and may be relative)</p> <p> </p></ul>———-MOTO XT800 root达成，附update.zip下载Jan 22nd, 2010               <a href="http://epis.me/592#respond" target="_blank" rel="external">Leave a comment</a> <a href="http://epis.me/592#comments" target="_blank" rel="external">Go to comments</a><p>花了一天时间弄这东西，终于在天黑之前搞定了xt800的<a target="_blank" title="View all posts in root" href="http://epis.me/tag/root">root</a>，让时间回味这一刻 ，让岁月铭记这一回o(╯□╰)o。</p><p><a href="http://epis.me/wp-content/uploads/2010/01/IMG_3210.jpg" target="_blank" rel="external"><img height="480" width="319" src="http://img.pickbox.me/wp-content/uploads/pic/82498f1079c73442203f2e66.jpg" title="IMG_3210" class="aligncenter size-medium wp-image-593"></a></p><p> </p><ol> <li>下载update.zip，放到储存卡的根目录上</li> <li>关机</li> <li>按住搜索键 + 拍照键 + 电源开关键， 开机</li> <li>出现感叹号警告图标后，按音量键向上+拍照键，进入recovery模式</li> <li>音量键上下调整高亮条，选择apply sdcard:update.zip 来安装update.zip</li> <li>待完成后，重启，即有<a target="_blank" title="View all posts in root" href="http://epis.me/tag/root">root</a>权限</li></ol><p>以下不是必须，只是使在adb shell下也能获得root权限</p><ol> <li>下载<a href="http://www.magicandroidapps.com/su.zip" rel="external" title="http://www.magicandroidapps.com/su.zip" target="_blank">http://www.magicandroidapps.com/su.zip</a>，解压缩，放到SDK的tools文件夹下</li> <li>输入如下命令            C:<a target="_blank" title="View all posts in Android" href="http://epis.me/tag/android">Android</a>&gt;adb push su /data/local            </li> <li>利用Root Explorer或其他方式mount整个系统，使其处在可读写状态</li> <li>输入以下命令            $ su<br># mount -o remount,rw -t yaffs2 /dev/block/mtdblock6 /system<br># cd /system/bin<br># mv su osu<br># cat /data/local/su &gt; su<br># chmod 6755 su<br># ls -l *su            <p>如果最后显示如下，表示成功了</p>            -rwsr-sr-x root root 76200 2008-08-01 05:00 osu<br>-rwsr-sr-x root root 76200 2009-05-30 11:28 su            </li> <li>最后输入以下命令，机器会重启，重启后即可            # sync<br> # reboot            </li></ol><p>下载：<a title="root for moto xt800, downloaded 11108 times" href="http://epis.me/downloads/update_root.zip" target="_blank" rel="external">Android_xt800_root_1</a> (2010-01-22, 3.11 MB)</p><ul> </ul> <p></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2010/08/11/How-to-Create-Android-Update-Zip-Package/" class="archive-article-date">
  	<time datetime="2010-08-11T11:19:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2010-08-11</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Android/">Android</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2010/08/20/android-启动流程/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          android 启动流程
        
      </div>
    </a>
  
  
    <a href="/2010/08/10/经典小故事/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">经典小故事</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 jfo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">87</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Arduino-OpenWrt/">Arduino/OpenWrt</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DefaultCategory/">DefaultCategory</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-Computing/">Distributed Computing</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/">Google</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">67</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-App/">Linux App</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Debug/">Linux Debug</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Virtualization/">Linux Virtualization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac-OS-X/">Mac OS X</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Saying/">Saying</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebDev/">WebDev</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-template-gp-boost/">c++/c++ template/gp/boost</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-algorithm/">c/c++/algorithm</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x-模拟器/">cocos2d-x/模拟器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/com组件/">com组件</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gcc-binutils-make-共享库/">gcc/binutils/make/共享库</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js-html-python/">js/html/python</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/l4ka-pistachio-iguana/">l4ka::pistachio/iguana</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-图形/">linux 图形</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python-js-php-html-mysql-http/">python/js/php/html/mysql/http</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/self-collect/">self_collect</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unifiedkernel-wine-reactos/">unifiedkernel/wine/reactos</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/教育/">教育</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学-物理/">数学/物理</a><span class="category-list-count">3</span></li></ul>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://iguangba.pickbox.me/">爱逛吧</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.pickbox.me/">收藏夹</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://note.pickbox.me/">网络剪贴板</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">jfojfo#gmail.com</div>
  	  	
    	</section>
    
  </div>
  
</div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>