<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jfo, blog" />





  <link rel="alternate" href="/atom.xml" title="jfo planet" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="Using the Internal StorageYou can save files directly on the device’s internal storage. By default, files saved to the internal storage are private to your application and other applications cannot a">
<meta property="og:type" content="article">
<meta property="og:title" content="Data Storage">
<meta property="og:url" content="http://blog.pickbox.cc/2010/07/18/Data-Storage/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="Using the Internal StorageYou can save files directly on the device’s internal storage. By default, files saved to the internal storage are private to your application and other applications cannot a">
<meta property="og:updated_time" content="2017-06-07T05:03:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Data Storage">
<meta name="twitter:description" content="Using the Internal StorageYou can save files directly on the device’s internal storage. By default, files saved to the internal storage are private to your application and other applications cannot a">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://blog.pickbox.cc/2010/07/18/Data-Storage/"/>


  <title> Data Storage | jfo planet </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jfo planet</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Hope is the best gift that tomorrow gives.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Data Storage
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2010-07-18T17:53:00+08:00" content="2010-07-18">
              2010-07-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> <br>Using the Internal StorageYou can save files directly on the device’s internal storage. By default, files saved to the internal storage are private to your application and other applications cannot access them (nor can the user). When the user uninstalls your application, these files are removed.<br>String FILENAME = &quot;hello_file&quot;;<br>String string = &quot;hello world!&quot;;<br><br>FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);<br>fos.write(string.getBytes());<br>fos.close();<strong>Tip:</strong> If you want to save a static file in your application at compile time, save the file in your project <code>res/raw/</code> directory. You can open it with <code><a href="http://androidappdocs.appspot.com/reference/android/content/res/Resources.html#openRawResource%28int%29" target="_blank" rel="external">openRawResource()</a></code>, passing the <code>R.raw.<em>&lt;filename&gt;</em></code> resource ID. This method returns an <code><a href="http://androidappdocs.appspot.com/reference/java/io/InputStream.html" target="_blank" rel="external">InputStream</a></code> that you can use to read the file (but you cannot write to the original file). <br><br><br><strong>Funtion references</strong><br>————————————-<br>         public                              abstract                    <a href="http://androidappdocs.appspot.com/reference/java/io/File.html" target="_blank" rel="external">File</a>              getFilesDir       ()</p><p>Returns the absolute path to the directory on the filesystem where  files created with <code><a href="http://androidappdocs.appspot.com/reference/android/content/Context.html#openFileOutput%28java.lang.20int%29" target="_blank" rel="external">openFileOutput(String, int)</a></code> are stored.</p><p>&#160;</p>         public                              abstract                    <a href="http://androidappdocs.appspot.com/reference/java/lang/String.html" target="_blank" rel="external">String[]</a>              fileList       ()<p>Returns an array of strings naming the private files associated with  this Context’s application package.</p><br>         public          static                                        <a href="http://androidappdocs.appspot.com/reference/java/io/File.html" target="_blank" rel="external">File</a>              getExternalStorageDirectory       ()Since: <a href="http://androidappdocs.appspot.com/guide/appendix/api-levels.html#level1" target="_blank" rel="external">API Level 1</a>Gets the Android external storage directory. <br><br><br><br>Using the External Storage<br>Checking External Storage availabilityboolean mExternalStorageAvailable = false;<br>boolean mExternalStorageWriteable = false;<br>String state = Environment.getExternalStorageState();<br><br>if (Environment.MEDIA_MOUNTED.equals(state)) {<br>&#160; &#160; // We can read and write the media<br>&#160; &#160; mExternalStorageAvailable = mExternalStorageWriteable = true;<br>} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {<br>&#160; &#160; // We can only read the media<br>&#160; &#160; mExternalStorageAvailable = true;<br>&#160; &#160; mExternalStorageWriteable = false;<br>} else {<br>&#160; &#160; // Something else is wrong. It may be one of many other states, but all we need<br>&#160; &#160; // &#160;to know is we can neither read nor write<br>&#160; &#160; mExternalStorageAvailable = mExternalStorageWriteable = false;<br>}<br>         public          static                                        <a href="http://androidappdocs.appspot.com/reference/java/io/File.html" target="_blank" rel="external">File</a>              getExternalStorageDirectory       ()Since: <a href="http://androidappdocs.appspot.com/guide/appendix/api-levels.html#level1" target="_blank" rel="external">API Level 1</a>Gets the Android external storage directory. <br><br><br><br><br>         public          static                                        <a href="http://androidappdocs.appspot.com/reference/java/io/File.html" target="_blank" rel="external">File</a>              getExternalStoragePublicDirectory       (<a href="http://androidappdocs.appspot.com/reference/java/lang/String.html" target="_blank" rel="external">String</a> type)Since: <a href="http://androidappdocs.appspot.com/guide/appendix/api-levels.html#level8" target="_blank" rel="external">API Level 8</a><p>Get a top-level public external storage directory for placing files of  a particular type.  This is where the user will typically place and  manage their own files, so you should be careful about what you put here  to ensure you don’t erase their files or get in the way of their own  organization.</p><p>Here is an example of typical code to manipulate a picture on  the public external storage:</p>void createExternalStoragePublicPicture() {<br>&#160; &#160; // Create a path where we will place our picture in the user’s<br>&#160; &#160; // public pictures directory. &#160;Note that you should be careful about<br>&#160; &#160; // what you place here, since the user often manages these files. &#160;For<br>&#160; &#160; // pictures and other media owned by the application, consider<br>&#160; &#160; // Context.getExternalMediaDir().<br>&#160; &#160; File path = Environment.getExternalStoragePublicDirectory(<br>&#160; &#160; &#160; &#160; &#160; &#160; Environment.DIRECTORY_PICTURES);<br>&#160; &#160; File file = new File(path, &quot;DemoPicture.jpg&quot;);<br><br>&#160; &#160; try {<br>&#160; &#160; &#160; &#160; // Make sure the Pictures directory exists.<br>&#160; &#160; &#160; &#160; path.mkdirs();<br><br>&#160; &#160; &#160; &#160; // Very simple code to copy a picture from the application’s<br>&#160; &#160; &#160; &#160; // resource into the external file. &#160;Note that this code does<br>&#160; &#160; &#160; &#160; // no error checking, and assumes the picture is small (does not<br>&#160; &#160; &#160; &#160; // try to copy it in chunks). &#160;Note that if external storage is<br>&#160; &#160; &#160; &#160; // not currently mounted this will silently fail.<br>&#160; &#160; &#160; &#160; InputStream is = getResources().openRawResource(R.drawable.balloons);<br>&#160; &#160; &#160; &#160; OutputStream os = new FileOutputStream(file);<br>&#160; &#160; &#160; &#160; byte[] data = new byte[is.available()];<br>&#160; &#160; &#160; &#160; is.read(data);<br>&#160; &#160; &#160; &#160; os.write(data);<br>&#160; &#160; &#160; &#160; is.close();<br>&#160; &#160; &#160; &#160; os.close();<br><br>&#160; &#160; &#160; &#160; // Tell the media scanner about the new file so that it is<br>&#160; &#160; &#160; &#160; // immediately available to the user.<br>&#160; &#160; &#160; &#160; MediaScannerConnection.scanFile(this,<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; new String[] { file.toString() }, null,<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; new MediaScannerConnection.OnScanCompletedListener() {<br>&#160; &#160; &#160; &#160; &#160; &#160; public void onScanCompleted(String path, Uri uri) {<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Log.i(&quot;ExternalStorage&quot;, &quot;Scanned &quot; + path + &quot;:&quot;);<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Log.i(&quot;ExternalStorage&quot;, &quot;-&gt; uri=&quot; + uri);<br>&#160; &#160; &#160; &#160; &#160; &#160; }<br>&#160; &#160; &#160; &#160; });<br>&#160; &#160; } catch (IOException e) {<br>&#160; &#160; &#160; &#160; // Unable to create file, likely because external storage is<br>&#160; &#160; &#160; &#160; // not currently mounted.<br>&#160; &#160; &#160; &#160; Log.w(&quot;ExternalStorage&quot;, &quot;Error writing &quot; + file, e);<br>&#160; &#160; }<br>}<br><br>void deleteExternalStoragePublicPicture() {<br>&#160; &#160; // Create a path where we will place our picture in the user’s<br>&#160; &#160; // public pictures directory and delete the file. &#160;If external<br>&#160; &#160; // storage is not currently mounted this will fail.<br>&#160; &#160; File path = Environment.getExternalStoragePublicDirectory(<br>&#160; &#160; &#160; &#160; &#160; &#160; Environment.DIRECTORY_PICTURES);<br>&#160; &#160; File file = new File(path, &quot;DemoPicture.jpg&quot;);<br>&#160; &#160; file.delete();<br>}<br><br>boolean hasExternalStoragePublicPicture() {<br>&#160; &#160; // Create a path where we will place our picture in the user’s<br>&#160; &#160; // public pictures directory and check if the file exists. &#160;If<br>&#160; &#160; // external storage is not currently mounted this will think the<br>&#160; &#160; // picture doesn’t exist.<br>&#160; &#160; File path = Environment.getExternalStoragePublicDirectory(<br>&#160; &#160; &#160; &#160; &#160; &#160; Environment.DIRECTORY_PICTURES);<br>&#160; &#160; File file = new File(path, &quot;DemoPicture.jpg&quot;);<br>&#160; &#160; return file.exists();<br>}Parameters                        type            The type of storage directory to return.  Should be one of  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_MUSIC" target="_blank" rel="external">DIRECTORY_MUSIC</a></code>, <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_PODCASTS" target="_blank" rel="external">DIRECTORY_PODCASTS</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_RINGTONES" target="_blank" rel="external">DIRECTORY_RINGTONES</a></code>, <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_ALARMS" target="_blank" rel="external">DIRECTORY_ALARMS</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_NOTIFICATIONS" target="_blank" rel="external">DIRECTORY_NOTIFICATIONS</a></code>, <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_PICTURES" target="_blank" rel="external">DIRECTORY_PICTURES</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_MOVIES" target="_blank" rel="external">DIRECTORY_MOVIES</a></code>, <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_DOWNLOADS" target="_blank" rel="external">DIRECTORY_DOWNLOADS</a></code>, or  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_DCIM" target="_blank" rel="external">DIRECTORY_DCIM</a></code>.  May not be null.            Returns<ul> <li>Returns the File path for the directory.  Note that this  directory may not yet exist, so you must make sure it exists before  using it such as with <code><a href="http://androidappdocs.appspot.com/reference/java/io/File.html#mkdirs%28%29" target="_blank" rel="external">File.mkdirs()</a></code>.</li></ul><br><br>         public                              abstract                    <a href="http://androidappdocs.appspot.com/reference/java/io/File.html" target="_blank" rel="external">File</a>              getExternalFilesDir       (<a href="http://androidappdocs.appspot.com/reference/java/lang/String.html" target="_blank" rel="external">String</a> type)Since: <a href="http://androidappdocs.appspot.com/guide/appendix/api-levels.html#level8" target="_blank" rel="external">API Level 8</a><p>Returns the absolute path to the directory on the external filesystem  (that is somewhere on <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29" target="_blank" rel="external">Environment.getExternalStorageDirectory()</a></code>) where the application can  place persistent files it owns.  These files are private to the  applications, and not typically visible to the user as media.</p><p>This is like <code><a href="http://androidappdocs.appspot.com/reference/android/content/Context.html#getFilesDir%28%29" target="_blank" rel="external">getFilesDir()</a></code> in that these  files will be deleted when the application is uninstalled, however there  are some important differences:</p><ul> <li>External files are not always available: they will disappear if the  user mounts the external storage on a computer or removes it.  See the  APIs on <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html" target="_blank" rel="external">Environment</a></code> for information in the storage state.</li> <li>There is no security enforced with these files.  All applications  can read and write files placed here.</li></ul><p>Here is an example of typical code to manipulate a file in  an application’s private storage:</p>void createExternalStoragePrivateFile() {<br>&#160; &#160; // Create a path where we will place our private file on external<br>&#160; &#160; // storage.<br>&#160; &#160; File file = new File(getExternalFilesDir(null), &quot;DemoFile.jpg&quot;);<br><br>&#160; &#160; try {<br>&#160; &#160; &#160; &#160; // Very simple code to copy a picture from the application’s<br>&#160; &#160; &#160; &#160; // resource into the external file. &#160;Note that this code does<br>&#160; &#160; &#160; &#160; // no error checking, and assumes the picture is small (does not<br>&#160; &#160; &#160; &#160; // try to copy it in chunks). &#160;Note that if external storage is<br>&#160; &#160; &#160; &#160; // not currently mounted this will silently fail.<br>&#160; &#160; &#160; &#160; InputStream is = getResources().openRawResource(R.drawable.balloons);<br>&#160; &#160; &#160; &#160; OutputStream os = new FileOutputStream(file);<br>&#160; &#160; &#160; &#160; byte[] data = new byte[is.available()];<br>&#160; &#160; &#160; &#160; is.read(data);<br>&#160; &#160; &#160; &#160; os.write(data);<br>&#160; &#160; &#160; &#160; is.close();<br>&#160; &#160; &#160; &#160; os.close();<br>&#160; &#160; } catch (IOException e) {<br>&#160; &#160; &#160; &#160; // Unable to create file, likely because external storage is<br>&#160; &#160; &#160; &#160; // not currently mounted.<br>&#160; &#160; &#160; &#160; Log.w(&quot;ExternalStorage&quot;, &quot;Error writing &quot; + file, e);<br>&#160; &#160; }<br>}<br><br>void deleteExternalStoragePrivateFile() {<br>&#160; &#160; // Get path for the file on external storage. &#160;If external<br>&#160; &#160; // storage is not currently mounted this will fail.<br>&#160; &#160; File file = new File(getExternalFilesDir(null), &quot;DemoFile.jpg&quot;);<br>&#160; &#160; if (file != null) {<br>&#160; &#160; &#160; &#160; file.delete();<br>&#160; &#160; }<br>}<br><br>boolean hasExternalStoragePrivateFile() {<br>&#160; &#160; // Get path for the file on external storage. &#160;If external<br>&#160; &#160; // storage is not currently mounted this will fail.<br>&#160; &#160; File file = new File(getExternalFilesDir(null), &quot;DemoFile.jpg&quot;);<br>&#160; &#160; if (file != null) {<br>&#160; &#160; &#160; &#160; return file.exists();<br>&#160; &#160; }<br>&#160; &#160; return false;<br>}<p>If you supply a non-null <var>type</var> to this function, the returned  file will be a path to a sub-directory of the given type.  Though these files  are not automatically scanned by the media scanner, you can explicitly  add them to the media database with  <code><a href="http://androidappdocs.appspot.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.5B%5D,%20java.lang.5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29" target="_blank" rel="external">MediaScannerConnection.scanFile</a></code>.  Note that this is not the same as  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.29" target="_blank" rel="external">Environment.getExternalStoragePublicDirectory()</a></code>, which provides  directories of media shared by all applications.  The  directories returned here are  owned by the application, and their contents will be removed when the  application is uninstalled.  Unlike  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.29" target="_blank" rel="external">Environment.getExternalStoragePublicDirectory()</a></code>, the directory  returned here will be automatically created for you.</p><p>Here is an example of typical code to manipulate a picture in  an application’s private storage and add it to the media database:</p>void createExternalStoragePrivatePicture() {<br>&#160; &#160; // Create a path where we will place our picture in our own private<br>&#160; &#160; // pictures directory. &#160;Note that we don’t really need to place a<br>&#160; &#160; // picture in DIRECTORY_PICTURES, since the media scanner will see<br>&#160; &#160; // all media in these directories; this may be useful with other<br>&#160; &#160; // media types such as DIRECTORY_MUSIC however to help it classify<br>&#160; &#160; // your media for display to the user.<br>&#160; &#160; File path = getExternalFilesDir(Environment.DIRECTORY_PICTURES);<br>&#160; &#160; File file = new File(path, &quot;DemoPicture.jpg&quot;);<br><br>&#160; &#160; try {<br>&#160; &#160; &#160; &#160; // Very simple code to copy a picture from the application’s<br>&#160; &#160; &#160; &#160; // resource into the external file. &#160;Note that this code does<br>&#160; &#160; &#160; &#160; // no error checking, and assumes the picture is small (does not<br>&#160; &#160; &#160; &#160; // try to copy it in chunks). &#160;Note that if external storage is<br>&#160; &#160; &#160; &#160; // not currently mounted this will silently fail.<br>&#160; &#160; &#160; &#160; InputStream is = getResources().openRawResource(R.drawable.balloons);<br>&#160; &#160; &#160; &#160; OutputStream os = new FileOutputStream(file);<br>&#160; &#160; &#160; &#160; byte[] data = new byte[is.available()];<br>&#160; &#160; &#160; &#160; is.read(data);<br>&#160; &#160; &#160; &#160; os.write(data);<br>&#160; &#160; &#160; &#160; is.close();<br>&#160; &#160; &#160; &#160; os.close();<br><br>&#160; &#160; &#160; &#160; // Tell the media scanner about the new file so that it is<br>&#160; &#160; &#160; &#160; // immediately available to the user.<br>&#160; &#160; &#160; &#160; MediaScannerConnection.scanFile(this,<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; new String[] { file.toString() }, null,<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; new MediaScannerConnection.OnScanCompletedListener() {<br>&#160; &#160; &#160; &#160; &#160; &#160; public void onScanCompleted(String path, Uri uri) {<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Log.i(&quot;ExternalStorage&quot;, &quot;Scanned &quot; + path + &quot;:&quot;);<br>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Log.i(&quot;ExternalStorage&quot;, &quot;-&gt; uri=&quot; + uri);<br>&#160; &#160; &#160; &#160; &#160; &#160; }<br>&#160; &#160; &#160; &#160; });<br>&#160; &#160; } catch (IOException e) {<br>&#160; &#160; &#160; &#160; // Unable to create file, likely because external storage is<br>&#160; &#160; &#160; &#160; // not currently mounted.<br>&#160; &#160; &#160; &#160; Log.w(&quot;ExternalStorage&quot;, &quot;Error writing &quot; + file, e);<br>&#160; &#160; }<br>}<br><br>void deleteExternalStoragePrivatePicture() {<br>&#160; &#160; // Create a path where we will place our picture in the user’s<br>&#160; &#160; // public pictures directory and delete the file. &#160;If external<br>&#160; &#160; // storage is not currently mounted this will fail.<br>&#160; &#160; File path = getExternalFilesDir(Environment.DIRECTORY_PICTURES);<br>&#160; &#160; if (path != null) {<br>&#160; &#160; &#160; &#160; File file = new File(path, &quot;DemoPicture.jpg&quot;);<br>&#160; &#160; &#160; &#160; file.delete();<br>&#160; &#160; }<br>}<br><br>boolean hasExternalStoragePrivatePicture() {<br>&#160; &#160; // Create a path where we will place our picture in the user’s<br>&#160; &#160; // public pictures directory and check if the file exists. &#160;If<br>&#160; &#160; // external storage is not currently mounted this will think the<br>&#160; &#160; // picture doesn’t exist.<br>&#160; &#160; File path = getExternalFilesDir(Environment.DIRECTORY_PICTURES);<br>&#160; &#160; if (path != null) {<br>&#160; &#160; &#160; &#160; File file = new File(path, &quot;DemoPicture.jpg&quot;);<br>&#160; &#160; &#160; &#160; return file.exists();<br>&#160; &#160; }<br>&#160; &#160; return false;<br>}Parameters                        type            The type of files directory to return.  May be null for  the root of the files directory or one of  the following Environment constants for a subdirectory:  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_MUSIC" target="_blank" rel="external">DIRECTORY_MUSIC</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_PODCASTS" target="_blank" rel="external">DIRECTORY_PODCASTS</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_RINGTONES" target="_blank" rel="external">DIRECTORY_RINGTONES</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_ALARMS" target="_blank" rel="external">DIRECTORY_ALARMS</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_NOTIFICATIONS" target="_blank" rel="external">DIRECTORY_NOTIFICATIONS</a></code>,  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_PICTURES" target="_blank" rel="external">DIRECTORY_PICTURES</a></code>, or  <code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#DIRECTORY_MOVIES" target="_blank" rel="external">DIRECTORY_MOVIES</a></code>.            Returns<ul> <li>Returns the path of the directory holding application files  on external storage.  Returns null if external storage is not currently  mounted so it could not ensure the path exists; you will need to call  this method again when it is available.</li></ul>See Also<ul> <li><code><a href="http://androidappdocs.appspot.com/reference/android/content/Context.html#getFilesDir%28%29" target="_blank" rel="external">getFilesDir()</a></code></li> <li><code><a href="http://androidappdocs.appspot.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.29" target="_blank" rel="external">getExternalStoragePublicDirectory(String)</a></code></li></ul><br>getExternalCacheDir       () …&#160;&#160;&#160; Since: <a href="http://androidappdocs.appspot.com/guide/appendix/api-levels.html#level8" target="_blank" rel="external">API Level 8</a><br><br><br>External dir example:<br>/sdcard/Android/data/<code>com.example.android.app</code>/cache/<code><br></code>/sdcard/Android/data/<em>&lt;package_name&gt;</em>/files/<br>/sdcard/<code>Music/</code><br>/sdcard/Podcasts/<br>/sdcard/Ringtones/<br>/sdcard/Alarms/<br>/sdcard/Notifications/<br>/sdcard/Pictures/<br>/sdcard/Movies/<br>/sdcard/Download/Hiding your files from the Media Scanner<p>Include an empty file named <code>.nomedia</code> in your external files directory (note the dot prefix in the filename). This will prevent Android’s media scanner from reading your media files and including them in apps like Gallery or Music.</p><br><br><br><br><del>end</del> <p></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2010/07/15/通过Theme设置一些判断标志/" rel="next" title="通过Theme设置一些判断标志">
                <i class="fa fa-chevron-left"></i> 通过Theme设置一些判断标志
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2010/08/10/经典小故事/" rel="prev" title="经典小故事">
                经典小故事 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/wp-content/uploads/penguin.gif"
               alt="jfo" />
          <p class="site-author-name" itemprop="name">jfo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">604</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jfojfo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/jfojfo" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pickbox.me" title="收藏夹" target="_blank">收藏夹</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://note.pickbox.me" title="网络剪贴板" target="_blank">网络剪贴板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://iguangba.pickbox.me" title="爱逛吧" target="_blank">爱逛吧</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2007 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jfo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  

  
<script type="text/javascript" src="http://p.pickbox.me/js/pv.js"></script>



</body>
</html>
