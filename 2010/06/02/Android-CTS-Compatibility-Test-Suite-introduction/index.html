<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Android CTS (Compatibility Test Suite) introduction | jfo planet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.htmlWhat is CTS?Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published a">
<meta property="og:type" content="article">
<meta property="og:title" content="Android CTS (Compatibility Test Suite) introduction">
<meta property="og:url" content="http://blog.pickbox.me/2010/06/02/Android-CTS-Compatibility-Test-Suite-introduction/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.htmlWhat is CTS?Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published a">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/2f99b1de312fd564cdbf1a1e.jpg">
<meta property="og:updated_time" content="2016-10-15T05:24:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android CTS (Compatibility Test Suite) introduction">
<meta name="twitter:description" content="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.htmlWhat is CTS?Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published a">
<meta name="twitter:image" content="http://img.pickbox.me/wp-content/uploads/pic/2f99b1de312fd564cdbf1a1e.jpg">
  
    <link rel="alternative" href="/atom.xml" title="jfo planet" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.ico">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">jfo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">分类</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">jfo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">jfo</h1>
			</hgroup>
			
			<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-Android-CTS-Compatibility-Test-Suite-introduction" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android CTS (Compatibility Test Suite) introduction
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> <br><a target="_blank" href="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.html">http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.html</a><br><br>What is CTS?<br><br>Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published all  from Eclair branch on January 2010.<br><br>git repository <br><a href="http://android.git.kernel.org/?p=platform/cts.git;a=summary" target="_blank" rel="external">http://android.git.kernel.org/?p=platform/cts.git;a=summary</a><br><br>How to run CTS in host machine?<br><br>$ cd $MYDROID<br>$  . build/envsetup.sh<br>$ make cts<br>(it would generate all test plans, packages, cases, result report format and then zip to a android-cts.zip file)<br><br><ul> <li>Package CTS: out/host/linux-x86/cts/android-cts.zip</li> <li>cts make file: mydroid/build/core/tasks/cts.mk</li> <li>run cts program: mydroid/out/host/linux-x86/bin/cts</li> <li>test plans: mydroid/out/host/linux-x86/cts/android-cts/repository/plans</li> <li>test packages: mydroid/out/host/linux-x86/cts/android-cts/repository/testcases</li> <li>test results: mydroid/out/host/linux-x86/cts/android-cts/repository/results</li> <li>CTS program settings value: mydroid/cts/tools/utils/host_config.xml</li></ul><br><br>run cts<br>$ cd $mydroid/out/host/linux-x86/bin/<br>$ ./cts<br>Screen would like this: <br><br>erin@midnight:~/eclair/mydroid/out/host/linux-x86/bin$ ./cts<br>Android CTS version 2.1_r1<br>cts_host &gt; help<br>Usage: command options<br>Avaiable commands and options:<br>Host:<br>help: show this message<br>exit: exit cts command line<br>Plan:<br>ls –plan: list available plans<br>ls –plan plan_name: list contents of the plan with specified name<br>add –plan plan_name: add a new plan with specified name<br>add –derivedplan plan_name -s/–session session_id -r/–result result_type: derive a plan from the given session<br>rm –plan plan_name/all: remove a plan or all plans from repository<br>start –plan test_plan_name: run a test plan<br>start –plan test_plan_name -d/–device device_ID: run a test plan using the specified device<br>start –plan test_plan_name -t/–test test_name: run a specific test<br>start –plan test_plan_name -p/–package java_package_name: run a specific java package<br>start –plan test_plan_name -t/–test test_name -d/–device device_ID: run a specific test using the specified device<br>start –plan test_plan_name -p/–package java_package_name -d/–device device_ID: run a specific java package using the specified device<br>Package:<br>ls -p/–package: list available packages<br>ls -p/–package package_name: list contents of the package with specified name<br>add -p/–package root: add packages from root to repository<br>rm -p/–package package_name/all: remove a package or all packages from repository<br>Result:<br>ls -r/–result: list all result of sessions<br>ls -r/–result -s/–session session_id: list detail case result of a specified session<br>ls -r/–result [pass/fail/notExecuted/timeout] -s/–session session_id: list detail cases of a specified session by the specified result.<br>History:<br>history/h: list all commands in command history<br>history/h count: list the latest count records in command history<br>history/h -e num: run the command designated by ‘num’ in command history<br>Device:<br>ls -d/–device: list available devices<br><br><a href="http://1.bp.blogspot.com/_fB3UGiuVTOI/S9Vk0te3oPI/AAAAAAAAF_Q/BtbStNDCH-A/s1600/cts.jpg" target="_blank" rel="external"><img src="http://img.pickbox.me/wp-content/uploads/pic/2f99b1de312fd564cdbf1a1e.jpg" small="0" class="blogimg"><br></a><br><br>How to add test plan, test packages to CTS?<br><br><ol> <li>Add test package name to cts.mk, it would generate apk file when we build cts.</li> <li>Add all source folder (includes src java files, Android.mk and its Manifest file) to mydroid/cts/tests/tests</li> <li>If you’d like to create a test plan for this test package. Modify this python script: mydroid/cts/tools/utils/buildCts.py</li></ol><br>Adjust CTS program settings?<br><br>Modify $mydroid/cts/tools/utils/host_config.xml<br><ul> <li>Number of tests executed between reboots. A value &lt;= 0 disables reboots.  (maxTestCount)</li> <li>Max size [tests] for a package to be run in batch mode. (maxTestInBatchMode)    </li> <li>Max time [ms] between test status updates. (testStatusTimeoutMs)    </li> <li>Max time [ms] from start of package in batch mode and the first test status update. (batchStartTimeoutMs)    </li> <li>Max time [ms] from start of test in individual mode to the first test status update. (individualStartTimeoutMs)    </li> <li>Timeout [ms] for the signature check. (signatureTestTimeoutMs)    </li> <li>Timeout [ms] for package installations. (packageInstallTimeoutMs)    </li> <li>Time to wait [ms] after a package installation or removal. (postInstallWaitMs)  </li></ul>Write your own testing package?<br><br>If you would like to write your own testing package, you may reference the<a href="http://www.netmite.com/android/mydroid/development/pdk/docs/instrumentation_framework.html" target="_blank" rel="external"> Instrumentation Testing document</a> from Android porting guide. Also, you could reference the source code from few Android application, like Browser, Messages, Gallery, Email, Camera, Calculator….etc. You can build its test apk file and upload it to device.<br><br>How to write test cases?<br>Each instrumentation test case is similar to an Android application with the distinction that it starts another application. For example, have a look in the $MYDROID/packages/apps/Music directory.<br><ul> <li>There should be a Makefile and an Android Manifest file</li> <li>Tests are located in $MYDROID/packages/apps/Music/tests.</li> <li>The Instrumentation Test Runner is located at packages/apps/Music/tests/src/com/android/music/MusicPlayerFunctionalTestRunner.java.</li></ul><br>Build package apk file<br><br>erin@midnight:~/eclair/mydroid/packages/apps/Music/tests$ mm<br>Install: out/target/product/generic/data/app/MusicTests.apk<br><br>Install it to the device<br>erin@midnight:~/eclair/mydroid/packages/apps/Music/tests$ adb install ../../../../out/target/product/generic/data/app/MusicTests.apk<br><br>How to run test cases in device?<br><br>Running Tests<br><br>erin@midnight:~/$ adb shell pm list instrumentation<br>instrumentation:com.android.music.tests/.MusicPlayerStressTestRunner (target=com.android.music)<br>instrumentation:com.android.music.tests/.MusicPlayerFunctionalTestRunner (target=com.android.music)<br>instrumentation:com.android.music.tests/.MusicPlayerLaunchPerformance (target=com.android.music)<br><br>The am command is a command-line interface to the ActivityManager. ‘am’ is used to start and instrument activities using the adb shell command, as shown in the snippet below:<br><br><br>&gt; adb shell am<br>usage: am [start|instrument]<br>      am start [-a &lt;ACTION&gt;] [-d &lt;DATA_URI&gt;] [-t &lt;MIME_TYPE&gt;]<br>               [-c &lt;CATEGORY&gt; [-c &lt;CATEGORY&gt;] …]<br>               [-e &lt;EXTRA_KEY&gt; &lt;EXTRA_VALUE&gt; [-e &lt;EXTRA_KEY&gt; &lt;EXTRA_VALUE&gt; …]<br>               [-n &lt;COMPONENT&gt;] [-D] [&lt;URI&gt;]<br>      am instrument [-e &lt;ARG_NAME&gt; &lt;ARG_VALUE&gt;] [-p &lt;PROF_FILE&gt;]<br>               [-w] &lt;COMPONENT&gt;<br><br>For example, to start the Contacts application you can use<br>&gt; adb shell am start -n com.google.android.contacts/.ContactsActivity<br><br>Eg. verify Music player launcher performance<br><br>erin@midnight:~/$ adb shell am instrument -w -r com.android.music.tests/.MusicPlayerLaunchPerformance<br>Eg. verify Music player stress test<br><br>erin@midnight:~/$ adb shell am instrument -w -r com.android.music.tests/.MusicPlayerStressTestRunner<br>Here is a <a href="http://www.youtube.com/watch?v=qRdGOouAg_c" target="_blank" rel="external">video</a> about running a cts test case by Android emulator! </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2010/06/02/Android-CTS-Compatibility-Test-Suite-introduction/" class="archive-article-date">
  	<time datetime="2010-06-02T13:10:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2010-06-02</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Android/">Android</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2010/06/13/豌豆荚/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          豌豆荚
        
      </div>
    </a>
  
  
    <a href="/2010/06/02/Android-常用目录结构/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Android 常用目录结构</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 jfo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">87</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Arduino-OpenWrt/">Arduino/OpenWrt</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DefaultCategory/">DefaultCategory</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-Computing/">Distributed Computing</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/">Google</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">67</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-App/">Linux App</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Debug/">Linux Debug</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Virtualization/">Linux Virtualization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac-OS-X/">Mac OS X</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Saying/">Saying</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebDev/">WebDev</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-template-gp-boost/">c++/c++ template/gp/boost</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-algorithm/">c/c++/algorithm</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x-模拟器/">cocos2d-x/模拟器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/com组件/">com组件</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gcc-binutils-make-共享库/">gcc/binutils/make/共享库</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js-html-python/">js/html/python</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/l4ka-pistachio-iguana/">l4ka::pistachio/iguana</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-图形/">linux 图形</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python-js-php-html-mysql-http/">python/js/php/html/mysql/http</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/self-collect/">self_collect</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unifiedkernel-wine-reactos/">unifiedkernel/wine/reactos</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/教育/">教育</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学-物理/">数学/物理</a><span class="category-list-count">3</span></li></ul>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://iguangba.pickbox.me/">爱逛吧</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.pickbox.me/">收藏夹</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://note.pickbox.me/">网络剪贴板</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">jfojfo#gmail.com</div>
  	  	
    	</section>
    
  </div>
  
</div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>