<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jfo, blog" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.htmlWhat is CTS?Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published a">
<meta property="og:type" content="article">
<meta property="og:title" content="Android CTS (Compatibility Test Suite) introduction">
<meta property="og:url" content="http://blog.pickbox.me/2010/06/02/Android-CTS-Compatibility-Test-Suite-introduction/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.htmlWhat is CTS?Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published a">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/2f99b1de312fd564cdbf1a1e.jpg">
<meta property="og:updated_time" content="2016-10-15T05:24:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android CTS (Compatibility Test Suite) introduction">
<meta name="twitter:description" content="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.htmlWhat is CTS?Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published a">
<meta name="twitter:image" content="http://img.pickbox.me/wp-content/uploads/pic/2f99b1de312fd564cdbf1a1e.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://blog.pickbox.me/2010/06/02/Android-CTS-Compatibility-Test-Suite-introduction/"/>


  <title> Android CTS (Compatibility Test Suite) introduction | jfo planet </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jfo planet</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Hope is the best gift that tomorrow gives.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Android CTS (Compatibility Test Suite) introduction
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2010-06-02T21:10:00+08:00" content="2010-06-02">
              2010-06-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> <br><a target="_blank" href="http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.html">http://i-miss-erin.blogspot.com/2010/04/android-cts-compatibility-test-suite.html</a><br><br>What is CTS?<br><br>Compatibility Test Suite is a command mode tool to run a series of test cases in Android. They published all  from Eclair branch on January 2010.<br><br>git repository <br><a href="http://android.git.kernel.org/?p=platform/cts.git;a=summary" target="_blank" rel="external">http://android.git.kernel.org/?p=platform/cts.git;a=summary</a><br><br>How to run CTS in host machine?<br><br>$ cd $MYDROID<br>$  . build/envsetup.sh<br>$ make cts<br>(it would generate all test plans, packages, cases, result report format and then zip to a android-cts.zip file)<br><br><ul> <li>Package CTS: out/host/linux-x86/cts/android-cts.zip</li> <li>cts make file: mydroid/build/core/tasks/cts.mk</li> <li>run cts program: mydroid/out/host/linux-x86/bin/cts</li> <li>test plans: mydroid/out/host/linux-x86/cts/android-cts/repository/plans</li> <li>test packages: mydroid/out/host/linux-x86/cts/android-cts/repository/testcases</li> <li>test results: mydroid/out/host/linux-x86/cts/android-cts/repository/results</li> <li>CTS program settings value: mydroid/cts/tools/utils/host_config.xml</li></ul><br><br>run cts<br>$ cd $mydroid/out/host/linux-x86/bin/<br>$ ./cts<br>Screen would like this: <br><br>erin@midnight:~/eclair/mydroid/out/host/linux-x86/bin$ ./cts<br>Android CTS version 2.1_r1<br>cts_host &gt; help<br>Usage: command options<br>Avaiable commands and options:<br>Host:<br>help: show this message<br>exit: exit cts command line<br>Plan:<br>ls –plan: list available plans<br>ls –plan plan_name: list contents of the plan with specified name<br>add –plan plan_name: add a new plan with specified name<br>add –derivedplan plan_name -s/–session session_id -r/–result result_type: derive a plan from the given session<br>rm –plan plan_name/all: remove a plan or all plans from repository<br>start –plan test_plan_name: run a test plan<br>start –plan test_plan_name -d/–device device_ID: run a test plan using the specified device<br>start –plan test_plan_name -t/–test test_name: run a specific test<br>start –plan test_plan_name -p/–package java_package_name: run a specific java package<br>start –plan test_plan_name -t/–test test_name -d/–device device_ID: run a specific test using the specified device<br>start –plan test_plan_name -p/–package java_package_name -d/–device device_ID: run a specific java package using the specified device<br>Package:<br>ls -p/–package: list available packages<br>ls -p/–package package_name: list contents of the package with specified name<br>add -p/–package root: add packages from root to repository<br>rm -p/–package package_name/all: remove a package or all packages from repository<br>Result:<br>ls -r/–result: list all result of sessions<br>ls -r/–result -s/–session session_id: list detail case result of a specified session<br>ls -r/–result [pass/fail/notExecuted/timeout] -s/–session session_id: list detail cases of a specified session by the specified result.<br>History:<br>history/h: list all commands in command history<br>history/h count: list the latest count records in command history<br>history/h -e num: run the command designated by ‘num’ in command history<br>Device:<br>ls -d/–device: list available devices<br><br><a href="http://1.bp.blogspot.com/_fB3UGiuVTOI/S9Vk0te3oPI/AAAAAAAAF_Q/BtbStNDCH-A/s1600/cts.jpg" target="_blank" rel="external"><img src="http://img.pickbox.me/wp-content/uploads/pic/2f99b1de312fd564cdbf1a1e.jpg" small="0" class="blogimg"><br></a><br><br>How to add test plan, test packages to CTS?<br><br><ol> <li>Add test package name to cts.mk, it would generate apk file when we build cts.</li> <li>Add all source folder (includes src java files, Android.mk and its Manifest file) to mydroid/cts/tests/tests</li> <li>If you’d like to create a test plan for this test package. Modify this python script: mydroid/cts/tools/utils/buildCts.py</li></ol><br>Adjust CTS program settings?<br><br>Modify $mydroid/cts/tools/utils/host_config.xml<br><ul> <li>Number of tests executed between reboots. A value &lt;= 0 disables reboots.  (maxTestCount)</li> <li>Max size [tests] for a package to be run in batch mode. (maxTestInBatchMode)    </li> <li>Max time [ms] between test status updates. (testStatusTimeoutMs)    </li> <li>Max time [ms] from start of package in batch mode and the first test status update. (batchStartTimeoutMs)    </li> <li>Max time [ms] from start of test in individual mode to the first test status update. (individualStartTimeoutMs)    </li> <li>Timeout [ms] for the signature check. (signatureTestTimeoutMs)    </li> <li>Timeout [ms] for package installations. (packageInstallTimeoutMs)    </li> <li>Time to wait [ms] after a package installation or removal. (postInstallWaitMs)  </li></ul>Write your own testing package?<br><br>If you would like to write your own testing package, you may reference the<a href="http://www.netmite.com/android/mydroid/development/pdk/docs/instrumentation_framework.html" target="_blank" rel="external"> Instrumentation Testing document</a> from Android porting guide. Also, you could reference the source code from few Android application, like Browser, Messages, Gallery, Email, Camera, Calculator….etc. You can build its test apk file and upload it to device.<br><br>How to write test cases?<br>Each instrumentation test case is similar to an Android application with the distinction that it starts another application. For example, have a look in the $MYDROID/packages/apps/Music directory.<br><ul> <li>There should be a Makefile and an Android Manifest file</li> <li>Tests are located in $MYDROID/packages/apps/Music/tests.</li> <li>The Instrumentation Test Runner is located at packages/apps/Music/tests/src/com/android/music/MusicPlayerFunctionalTestRunner.java.</li></ul><br>Build package apk file<br><br>erin@midnight:~/eclair/mydroid/packages/apps/Music/tests$ mm<br>Install: out/target/product/generic/data/app/MusicTests.apk<br><br>Install it to the device<br>erin@midnight:~/eclair/mydroid/packages/apps/Music/tests$ adb install ../../../../out/target/product/generic/data/app/MusicTests.apk<br><br>How to run test cases in device?<br><br>Running Tests<br><br>erin@midnight:~/$ adb shell pm list instrumentation<br>instrumentation:com.android.music.tests/.MusicPlayerStressTestRunner (target=com.android.music)<br>instrumentation:com.android.music.tests/.MusicPlayerFunctionalTestRunner (target=com.android.music)<br>instrumentation:com.android.music.tests/.MusicPlayerLaunchPerformance (target=com.android.music)<br><br>The am command is a command-line interface to the ActivityManager. ‘am’ is used to start and instrument activities using the adb shell command, as shown in the snippet below:<br><br><br>&gt; adb shell am<br>usage: am [start|instrument]<br>      am start [-a &lt;ACTION&gt;] [-d &lt;DATA_URI&gt;] [-t &lt;MIME_TYPE&gt;]<br>               [-c &lt;CATEGORY&gt; [-c &lt;CATEGORY&gt;] …]<br>               [-e &lt;EXTRA_KEY&gt; &lt;EXTRA_VALUE&gt; [-e &lt;EXTRA_KEY&gt; &lt;EXTRA_VALUE&gt; …]<br>               [-n &lt;COMPONENT&gt;] [-D] [&lt;URI&gt;]<br>      am instrument [-e &lt;ARG_NAME&gt; &lt;ARG_VALUE&gt;] [-p &lt;PROF_FILE&gt;]<br>               [-w] &lt;COMPONENT&gt;<br><br>For example, to start the Contacts application you can use<br>&gt; adb shell am start -n com.google.android.contacts/.ContactsActivity<br><br>Eg. verify Music player launcher performance<br><br>erin@midnight:~/$ adb shell am instrument -w -r com.android.music.tests/.MusicPlayerLaunchPerformance<br>Eg. verify Music player stress test<br><br>erin@midnight:~/$ adb shell am instrument -w -r com.android.music.tests/.MusicPlayerStressTestRunner<br>Here is a <a href="http://www.youtube.com/watch?v=qRdGOouAg_c" target="_blank" rel="external">video</a> about running a cts test case by Android emulator! </p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2010/06/02/Android-常用目录结构/" rel="next" title="Android 常用目录结构">
                <i class="fa fa-chevron-left"></i> Android 常用目录结构
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2010/06/13/豌豆荚/" rel="prev" title="豌豆荚">
                豌豆荚 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/wp-content/uploads/penguin.gif"
               alt="jfo" />
          <p class="site-author-name" itemprop="name">jfo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">596</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jfojfo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/jfojfo" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pickbox.me" title="收藏夹" target="_blank">收藏夹</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://note.pickbox.me" title="网络剪贴板" target="_blank">网络剪贴板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://iguangba.pickbox.me" title="爱逛吧" target="_blank">爱逛吧</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jfo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
