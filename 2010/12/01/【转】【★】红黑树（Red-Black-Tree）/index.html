<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jfo, blog" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="《算法导论》笔记－－红黑树的删除操作http://blog.csdn.net/michaelrun/archive/2010/05/30/5635189.aspx……分析就只限制在X节点，X的父节点P，X的兄弟节点W，以及W的两个子节点。这些个节点中。W以及W的两个子节点C1和C1的一共有五种组合，便有两种情况的处理是一致的，因此调整的过程可以分以下四个情况：第一种情况：W是红色节点 如上图，如">
<meta property="og:type" content="article">
<meta property="og:title" content="【转】【★】红黑树（Red Black Tree）">
<meta property="og:url" content="http://blog.pickbox.me/2010/12/01/【转】【★】红黑树（Red-Black-Tree）/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="《算法导论》笔记－－红黑树的删除操作http://blog.csdn.net/michaelrun/archive/2010/05/30/5635189.aspx……分析就只限制在X节点，X的父节点P，X的兄弟节点W，以及W的两个子节点。这些个节点中。W以及W的两个子节点C1和C1的一共有五种组合，便有两种情况的处理是一致的，因此调整的过程可以分以下四个情况：第一种情况：W是红色节点 如上图，如">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/eea85143042bdc5d9213c6d3.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/e1a0eb240042c74d4d088ddd.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/e305087bbcd415b80bd187de.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/ca385cdfb76fa55f485403df.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/ca385cdfb706a55f485403f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/b7c40b23e3e33802935807f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/23c4544ed2efbf45b2de05f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/6cc8d309f169f2ced0581bf0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/4d4e9e8295efa2f36d8119f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/2fc8cebf2a36ee4618d81ff0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/9211820a516fd272b0351df0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/e748be3efb825db6838b13f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/4fa531face3cc852a9d311f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/7c1ba41ee6649353403417f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/5643ff1f1183f946314e15f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/bfa4950a62f94b5394ca6bf0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/cede271fc17dbf84a68669f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/72c496eec1a854652cf534f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/6b5ad3c8f131a75b7e3e6ff0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/5916cb1727890945c83d6df0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/81ae6509938a1e833ac763f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/37ad72cf6770f171f9dc61f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/c5579d3da66bbf4cbba167f0.jpg">
<meta property="og:image" content="http://img.pickbox.me/wp-content/uploads/pic/064cd300da16a35d738b65f0.jpg">
<meta property="og:updated_time" content="2016-10-15T05:24:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【转】【★】红黑树（Red Black Tree）">
<meta name="twitter:description" content="《算法导论》笔记－－红黑树的删除操作http://blog.csdn.net/michaelrun/archive/2010/05/30/5635189.aspx……分析就只限制在X节点，X的父节点P，X的兄弟节点W，以及W的两个子节点。这些个节点中。W以及W的两个子节点C1和C1的一共有五种组合，便有两种情况的处理是一致的，因此调整的过程可以分以下四个情况：第一种情况：W是红色节点 如上图，如">
<meta name="twitter:image" content="http://img.pickbox.me/wp-content/uploads/pic/eea85143042bdc5d9213c6d3.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://blog.pickbox.me/2010/12/01/【转】【★】红黑树（Red-Black-Tree）/"/>


  <title> 【转】【★】红黑树（Red Black Tree） | jfo planet </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jfo planet</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Hope is the best gift that tomorrow gives.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                【转】【★】红黑树（Red Black Tree）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2010-12-01T01:10:00+08:00" content="2010-12-01">
              2010-12-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c-c-algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">c/c++/algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> </p><p><a target="_blank" href="http://blog.csdn.net/michaelrun/archive/2010/05/30/5635189.aspx">《算法导论》笔记－－红黑树的删除操作</a></p><p><a href="http://blog.csdn.net/michaelrun/archive/2010/05/30/5635189.aspx" target="_blank" rel="external">http://blog.csdn.net/michaelrun/archive/2010/05/30/5635189.aspx</a></p><p></p><p></p><p>……<br></p><p>分析就只限制在X节点，X的父节点P，X的兄弟节点W，以及W的两个子节点。这些个节点中。</p><p>W以及W的两个子节点C1和C1的一共有五种组合，便有两种情况的处理是一致的，因此调整的过程可以分以下四个情况：</p><p>第一种情况：W是红色节点</p><p><img class="blogimg" small="0" src="http://img.pickbox.me/wp-content/uploads/pic/eea85143042bdc5d9213c6d3.jpg"></p><p> </p><p>如上图，如果W是红色的，那么B和D节点进行一次左旋，并把D（也就是原来的W）着为黑色，B节点（X的父节点）着为红色。然后让W指向X的新兄弟。这样，就把这种情况转化为了W为黑色的情况来解决。在这个变形中，这五个节点之间保持了红黑性质不变，而X指向的双黑色节点的位置和颜色特性都没有变化。变形后的情况如何解决呢？下面的都是W为黑色的问题，因此下面三种中总有一种会合适。</p><p>PS：有没有其它变形呢？有，比如C和D进行右旋，B节点变为红色，变形后五个节点红黑正确的，但是这五个节点与树的其它部分相接处可能会产生问题，这样要考虑的因素就太多了。</p><p> </p><p>第二种情况：W以及W的两个子节点都是黑色的</p><p> </p><p><img class="blogimg" small="0" src="http://img.pickbox.me/wp-content/uploads/pic/e1a0eb240042c74d4d088ddd.jpg"></p><p> </p><p>如上图，注意，B即可以是红色也可以是黑色。</p><p>这种情况下，把D节点着成红色。然后把X的一个黑色推到父节点B中去，这时X就指向B节点了。变形前后，这五个节点间的黑高是没有变化的。</p><p>唯一可能产生问题的就是如果B原来是红色，那么B和D两个红色相邻就破坏了第４个性质，这样新X的子树就有问题了。这本来不符合我们向上递归的假设。但正好在这种情况下递归就可以结束了。因为B节点原来是红色，现在双加一层黑色，那么X现在指向的这个节点就是红黑两色的，直接把X（也就是B）着为黑色。问题就已经完整解决了。</p><p>如果B节点现在是双层黑色，那就以B为新的X进行向上的下一次的递归。</p><p> </p><p>第三种情况：W的左子节点是红色的且右子节点是黑色。</p><p> </p><p><img class="blogimg" small="0" src="http://img.pickbox.me/wp-content/uploads/pic/e305087bbcd415b80bd187de.jpg"></p><p> </p><p>&nbsp;&nbsp;   如上图，B即可以是黑色也可以是红色。</p><p>&nbsp;&nbsp;   把C和D进行一次旋转，改变C和D的颜色变形成新的结构。把问题转化成W的右子节点为红色的情况来解决。注意，原来C是红色的，所以C的子节点一定是黑色的，所以旋转中C节点的一个子树挂到之后着为红色的D节点上不会破坏红黑性质。变形后黑高度不变。</p><p> </p><p>&nbsp;&nbsp;   第四种情况：W的右子节点是红色（左子节点可以是红色或黑色）</p><p> </p><p><img class="blogimg" small="0" src="http://img.pickbox.me/wp-content/uploads/pic/ca385cdfb76fa55f485403df.jpg"></p><p> </p><p>&nbsp;&nbsp;   如上图，B节点可以是红色或是黑色。</p><p>&nbsp;&nbsp;   将B和D进行一次左旋，并交换两者的颜色。再将E着为黑色。这时，只要将X的一层黑色脱去，整个问题也得到了解决。递归结束。（在代码上，为了标识递归结束，我们把X指向根节点）</p><p> </p><p>&nbsp;&nbsp;   因此，只要按上面四种情况一直递归处理下去，X最终总会指向根结点或一个红色结点，这时我们就可以结束递归并把问题解决了。</p><p>&nbsp;&nbsp;   以上就是红黑色的节点删除过程。</p><p> </p><br><p></p><p></p>—————————————————<p>（下面这篇有些地方有误，谨慎参考之）</p><p><br></p><p>介绍另一种平衡二叉树：红黑树（Red Black Tree），红黑树由Rudolf Bayer于1972年发明，当时被称为平衡二叉B树（symmetric binary B-trees），1978年被Leonidas J. Guibas 和 Robert Sedgewick改成一个比较摩登的名字：红黑树。</p><p>红黑树和之前所讲的AVL树类似，都是在进行插入和删除操作时通过特定操作保持二叉查找树的平衡，从而获得较高的查找性能。自从红黑树出来后，AVL树就被放到了博物馆里，据说是红黑树有更好的效率，更高的统计性能。不过在我了解了红黑树的实现原理后，并不相信这是真的，关于这一点我们会在后面进行讨论。</p><p>红黑树和AVL树的区别在于它使用颜色来标识结点的高度，它所追求的是局部平衡而不是AVL树中的非常严格的平衡。之前我们在讲解AVL树时，已经领教过AVL树的复杂，但AVL树的复杂比起红黑树来说简直是小巫见大巫。红黑树是真正的变态级数据结构。</p><p>首先来一个Silverlight做的红黑树的动画，它有助于帮你理解什么是红黑树。这里需要注意，必须安装Silverlight 2.0 RTW 才能正常运行游戏，下载地址：</p><p><a href="http://www.microsoft.com/silverlight/resources/install.aspx?v=2.0" target="_blank" rel="external">http://www.microsoft.com/silverlight/resources/install.aspx?v=2.0</a></p><p> </p><p>使用注意事项：</p><p>l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       结点只接收整数，如果在添加和删除操作中输入非法字串，则会随机添加或删除一个0~99之间的整数。</p><p>l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       可以不在编辑框中输入数字，直接单击添加和删除按钮进行添加和删除操作。</p><p>l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       可以拖动拖动条控制动画速度。</p>红黑树的平衡<p>红黑树首先是一棵二叉查找树，它每个结点都被标上了颜色（红色或黑色），红黑树满足以下5个性质：</p><p><strong>1、 </strong><strong>每个结点的颜色只能是红色或黑色。</strong></p><p><strong>2、 </strong><strong>根结点是黑色的。</strong></p><p><strong>3、 </strong><strong>每个叶子结点都带有两个空的黑色结点（被称为黑哨兵），如果一个结点n</strong><strong>的只有一个左孩子，那么n</strong><strong>的右孩子是一个黑哨兵；如果结点n</strong><strong>只有一个右孩子，那么n</strong><strong>的左孩子是一个黑哨兵。</strong></p><p><strong>4、 </strong><strong>如果一个结点是红的，则它的两个儿子都是黑的。也就是说在一条路径上不能出现相邻的两个红色结点。</strong></p><p><strong>5、 </strong><strong>对于每个结点来说，从该结点到其子孙叶结点的所有路径上包含相同数目的黑结点。</strong></p><p>红黑树的这5个性质中，第3点是比较难理解的，但它却非常有必要。我们看图1中的左边这张图，如果不使用黑哨兵，它完全满足红黑树性质，结点50到两个叶结点8和叶结点82路径上的黑色结点数都为2个。但如果加入黑哨兵后（如图1右图中的小黑圆点），叶结点的个数变为8个黑哨兵，根结点50到这8个叶结点路径上的黑高度就不一样了，所以它并不是一棵红黑树。</p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/ca385cdfb706a55f485403f0.jpg" height="160" width="428"></p><p> </p><p> </p><p>要看真正的红黑树请在以上动画中添加几个结点，看看是否满足以上性质。</p>红黑树的旋转操作<p>红黑树的旋转操作和AVL树一样，分为LL、RR、LR、RL四种旋转类型，差别在于旋转完成后改变的是结点的颜色，而不是平衡因子。旋转动画演示请参考AVL这篇文章中的Flash动画：</p><p><a href="http://www.cnblogs.com/abatei/archive/2008/11/17/1335031.html" target="_blank" rel="external">http://www.cnblogs.com/abatei/archive/2008/11/17/1335031.html</a></p>红黑树上结点的插入<p>在讨论红黑树的插入操作之前必须要明白，任何一个即将插入的新结点的初始颜色都为红色。这一点很容易理解，因为插入黑点会增加某条路径上黑结点的数目，从而导致整棵树黑高度的不平衡。但如果新结点父结点为红色时（如图2所示），将会违返红黑树性质：一条路径上不能出现相邻的两个红色结点。这时就需要通过一系列操作来使红黑树保持平衡。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/b7c40b23e3e33802935807f0.jpg" height="140" width="339"></p><p> </p><p> </p><p>为了清楚地表示插入操作以下在结点中使用“新”字表示一个新插入的结点；使用“父”字表示新插入点的父结点；使用“叔”字表示“父”结点的兄弟结点；使用“祖”字表示“父”结点的父结点。插入操作分为以下几种情况：</p><p><strong>1</strong><strong>、</strong><strong>黑父</strong></p><p>如图3所示，如果新点的父结点为黑色结点，那么插入一个红点将不会影响红黑树的平衡，此时插入操作完成。红黑树比AVL树优秀的地方之一在于黑父的情况比较常见，从而使红黑树需要旋转的几率相对AVL树来说会少一些。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/23c4544ed2efbf45b2de05f0.jpg" height="89" width="191"></p><p> </p><p> </p><p><strong>2</strong><strong>．红父</strong></p><p>如果新点的父结点为红色，这时就需要进行一系列操作以保证整棵树红黑性质。如图3所示，由于父结点为红色，此时可以判定，祖父结点必定为黑色。这时需要根据叔父结点的颜色来决定做什么样的操作。青色结点表示颜色未知。由于有可能需要根结点到新点的路径上进行多次旋转操作，而每次进行不平衡判断的起始点（我们可将其视为新点）都不一样。所以我们在此使用一个蓝色箭头指向这个起始点，并称之为判定点。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/6cc8d309f169f2ced0581bf0.jpg" height="123" width="194"></p><p> </p><p> </p><p><strong>2.1 </strong><strong>红叔</strong></p><p>当叔父结点为红色时，如图4所示，无需进行旋转操作，只要将父和叔结点变为黑色，将祖父结点变为红色即可。但由于祖父结点的父结点有可能为红色，从而违反红黑树性质。此时必须将祖父结点作为新的判定点继续向上进行平衡操作。</p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/4d4e9e8295efa2f36d8119f0.jpg" height="123" width="308"></p><p> </p><p> </p><p>需要注意，无论“父”在“叔”的左边还是右边，无论“新”是“父”的左孩子还是右孩子，它们的操作都完全一样。</p><p> </p><p><strong>2.2 </strong><strong>黑叔</strong></p><p>当叔父结点为黑色时，需要进行旋转，以下图示了所有的旋转可能</p><p>情形1：</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/2fc8cebf2a36ee4618d81ff0.jpg" height="143" width="403"></p><p> </p><p>情形2：</p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/9211820a516fd272b0351df0.jpg" height="155" width="371"></p><p> </p><p>情形3：</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/e748be3efb825db6838b13f0.jpg" height="151" width="352"></p><p> </p><p>情形4：</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/4fa531face3cc852a9d311f0.jpg" height="150" width="356"></p><p> </p><p>可以观察到，当旋转完成后，新的旋转根全部为黑色，此时不需要再向上回溯进行平衡操作，插入操作完成。需要注意，上面四张图的“叔”、“1”、“2”、“3”结点有可能为黑哨兵结点。</p><p>其实红黑树的插入操作不是很难，甚至比AVL树的插入操作还更简单些。但删除操作就远远比AVL树复杂得多，下面就介绍红黑树的删除操作。</p>红黑树上结点的删除<p>红黑树本身是一棵二叉查找树，它的删除和二叉查找树的删除类似。首先要找到真正的删除点，当被删除结点n存在左右孩子时，真正的删除点应该是n的中序遍在前驱，关于这一点请复习二叉查找树的删除。如图9所示，当删除结点20时，实际被删除的结点应该为18，结点20的数据变为18。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/7c1ba41ee6649353403417f0.jpg" height="152" width="243"></p><p> </p><p> </p><p>所以可以推断出，在进行删除操作时，真正的删除点必定是只有一个孩子或没有孩子的结点。而根据红黑树的性质可以得出以下两个结论：</p><p>1、 <strong>删除操作中真正被删除的必定是只有一个红色孩子或没有孩子的结点</strong>。</p><p>2、 <strong>如果真正的删除点是一个红色结点，那么它必定是一个叶子结点</strong>。</p><p>理解这两点非常重要，如图10所示，除了情况(a)外，其他任一种况结点N都无法满足红黑树性质。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/5643ff1f1183f946314e15f0.jpg" height="168" width="474"></p><p> </p><p> </p><p>在以下讨论中，我们使用蓝色箭头表示真正的删除点，它也是旋转操作过程中的第一个判定点；真正的删除点使用“旧”标注，旧点所在位置将被它的的孩子结点所取代（最多只有一个孩子），我们使用“新”表示旧点的孩子结点。删除操作可分为以下几种情形：</p><p><strong>1</strong><strong>、旧点为红色结点</strong></p><p>若旧点为红色结点，则它必定是叶子结点，直接删除即可。如图11所示</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/bfa4950a62f94b5394ca6bf0.jpg" height="101" width="253"></p><p> </p><p> </p><p><strong>2</strong><strong>、一红一黑</strong></p><p>当旧点为黑色结点，新点为红色结点时，将新点取代旧点位置后，将新点染成黑色即可（如图12所示）。这里需要注意：旧点为红色，新点为黑色的情况不可能存在。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/cede271fc17dbf84a68669f0.jpg" height="132" width="229"></p><p> </p><p> </p><p><strong>3</strong><strong>、双黑</strong></p><p>当旧点和新点都为黑色时（新点为空结点时，亦属于这种情况），情况比较复杂，需要根据旧点兄弟结点的颜色来决定进行什么样的操作。我们使用“兄”来表示旧点的兄弟结点。这里可分为红兄和黑兄两种情况：</p><p><strong>3.1 </strong><strong>红兄</strong></p><p>由于兄弟结点为红色，所以父结点必定为黑色，而旧点被删除后，新点取代了它的位置。下图演示了两种可能的情况：</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/72c496eec1a854652cf534f0.jpg" height="246" width="359"></p><p> </p><p> </p><p>红兄的情况需要进行RR或LL型旋转，然后将父结点染成红色，兄结点染成黑色。然后重新以新点为判定点进行平衡操作。我们可以观察到，旋转操作完成后，判定点没有向上回溯，而是降低了一层，此时变成了黑兄的情况。</p><p><strong>3.2 </strong><strong>黑兄</strong></p><p>黑兄的情况最为复杂，需要根据黑兄孩子结点（这里用“侄”表示）和父亲结点的颜色来决定做什么样的操作。</p><p><strong>3.2.1 </strong><strong>黑兄二黑侄红父</strong></p><p>如图14所示，这种情况比较简单，只需将父结点变为黑色，兄结点变为黑色，新结点变为黑色即可，删除操作到此结束。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/6b5ad3c8f131a75b7e3e6ff0.jpg" height="246" width="356"></p><p> </p><p> </p><p><strong>3.2.2 </strong><strong>黑兄二黑侄黑父</strong></p><p>如图15所示，此时将父结点染成新结点的颜色，新结点染成黑色，兄结点染成红色即可。当新结点为红色时，父结点被染成红色，此时需要以父结点为判定点继续向上进行平衡操作。</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/5916cb1727890945c83d6df0.jpg" height="248" width="362"></p><p> </p><p> </p><p><strong>3.2.3 </strong><strong>黑兄红侄</strong></p><p>黑兄红侄有以下四种情形，下面分别进行图示：</p><p>情形1：</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/81ae6509938a1e833ac763f0.jpg" height="144" width="394"></p><p> </p><p>情形2：</p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/37ad72cf6770f171f9dc61f0.jpg" height="153" width="370"></p><p> </p><p>情形3：</p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/c5579d3da66bbf4cbba167f0.jpg" height="153" width="379"></p><p> </p><p>情形4：</p><p> </p><p><img src="http://img.pickbox.me/wp-content/uploads/pic/064cd300da16a35d738b65f0.jpg" height="151" width="379"></p><p> </p><p> </p><p>由以上图例所示，看完以上四张图的兄弟有可能会有一个疑问，如果情形1和情形2中的两个侄子结点都为红色时，是该进行LL旋转还是进行LR旋转呢？答案是进行LL旋转。情形3和情形4则是优先进行RR旋转的判定。</p><br><br><br><br><br><br> <p></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2010/11/29/Hibernate-example/" rel="next" title="Hibernate example">
                <i class="fa fa-chevron-left"></i> Hibernate example
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2010/12/02/【转】上机题-基因串/" rel="prev" title="【转】上机题 基因串">
                【转】上机题 基因串 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/wp-content/uploads/penguin.gif"
               alt="jfo" />
          <p class="site-author-name" itemprop="name">jfo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">596</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jfojfo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/jfojfo" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pickbox.me" title="收藏夹" target="_blank">收藏夹</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://note.pickbox.me" title="网络剪贴板" target="_blank">网络剪贴板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://iguangba.pickbox.me" title="爱逛吧" target="_blank">爱逛吧</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jfo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
