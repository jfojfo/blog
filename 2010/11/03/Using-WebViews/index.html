<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jfo, blog" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="First, JavaScript running inside the WebView can call out to code in your Activity. You can use this to have your JavaScript trigger actions like starting a new activity, or it can be used to fetch d">
<meta property="og:type" content="article">
<meta property="og:title" content="Using WebViews">
<meta property="og:url" content="http://blog.pickbox.me/2010/11/03/Using-WebViews/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="First, JavaScript running inside the WebView can call out to code in your Activity. You can use this to have your JavaScript trigger actions like starting a new activity, or it can be used to fetch d">
<meta property="og:updated_time" content="2016-10-15T05:24:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Using WebViews">
<meta name="twitter:description" content="First, JavaScript running inside the WebView can call out to code in your Activity. You can use this to have your JavaScript trigger actions like starting a new activity, or it can be used to fetch d">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://blog.pickbox.me/2010/11/03/Using-WebViews/"/>


  <title> Using WebViews | jfo planet </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jfo planet</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Hope is the best gift that tomorrow gives.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Using WebViews
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2010-11-03T20:19:00+08:00" content="2010-11-03">
              2010-11-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> <br>First, JavaScript running inside the WebView can call out to code in your Activity. You can use this to have your JavaScript trigger actions like starting a new activity, or it can be used to fetch data from a database or ContentProvider. The API for this is very simple: just call the addJavascriptInterface() method on your WebView. You pass an object whose methods you want to expose to JavaScript and the name to use when making calls. You can see the exact syntax in WebViewDemo. java. Here we are making our DemoJavascriptInterface object available to JavaScript where it will be called &quot;window.demo&quot;.<br><br>Second, your Activity can invoke JavaScript methods. All you have to do is call the loadUrl method with the appropriate JavaScript call:<br><br>mWebView.loadUrl(&quot;javascript:wave()&quot;);<br><br><br><strong>Sample</strong><br></p><p>package com.google.android.webviewdemo;<br><br>import android.app.Activity;<br>import android.os.Bundle;<br>import android.os.Handler;<br>import android.util.Log;<br>import android.webkit.JsResult;<br>import android.webkit.WebChromeClient;<br>import android.webkit.WebSettings;<br>import android.webkit.WebView;<br><br>/<strong><br> <em> Demonstrates how to embed a WebView in your activity. Also demonstrates how<br> </em> to have javascript in the WebView call into the activity, and how the activity <br> <em> can invoke javascript.<br> </em> &lt;p&gt;<br> <em> In this example, clicking on the android in the WebView will result in a call into<br> </em> the activities code in {@link DemoJavaScriptInterface#clickOnAndroid()}. This code<br> <em> will turn around and invoke javascript using the {@link WebView#loadUrl(String)}<br> </em> method.<br> <em> &lt;p&gt;<br> </em> Obviously all of this could have been accomplished without calling into the activity<br> <em> and then back into javascript, but this code is intended to show how to set up the <br> </em> code paths for this sort of communication.<br> <em><br> </em>/<br>public class WebViewDemo extends Activity {<br><br>    private static final String LOG_TAG = &quot;WebViewDemo&quot;;<br><br>    private WebView mWebView;<br><br>    private Handler mHandler = new Handler();<br><br>    @Override<br>    public void onCreate(Bundle icicle) {<br>        super.onCreate(icicle);<br>        setContentView(R.layout.main);<br>        mWebView = (WebView) findViewById(R.id.webview);<br><br>        WebSettings webSettings = mWebView.getSettings();<br>        webSettings.setSavePassword(false);<br>        webSettings.setSaveFormData(false);<br>        webSettings.setJavaScriptEnabled(true);<br>        webSettings.setSupportZoom(false);<br><br>        mWebView.setWebChromeClient(new MyWebChromeClient());<br><br>        mWebView.addJavascriptInterface(new DemoJavaScriptInterface(), &quot;demo&quot;);<br><br>        mWebView.loadUrl(&quot;file:///android_asset/demo.html&quot;);<br>    }<br><br>    final class DemoJavaScriptInterface {<br><br>        DemoJavaScriptInterface() {<br>        }<br><br>        /</strong><br>         <em> This is not called on the UI thread. Post a runnable to invoke<br>         </em> loadUrl on the UI thread.<br>         <em>/<br>        public void clickOnAndroid() {<br>            mHandler.post(new Runnable() {<br>                public void run() {<br>                    mWebView.loadUrl(&quot;javascript:wave()&quot;);<br>                }<br>            });<br><br>        }<br>    }<br><br>    /**<br>     </em> Provides a hook for calling &quot;alert&quot; from javascript. Useful for<br>     <em> debugging your javascript.<br>     </em>/<br>    final class MyWebChromeClient extends WebChromeClient {<br>        @Override<br>        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {<br>            Log.d(LOG_TAG, message);<br>            result.confirm();<br>            return true;<br>        }<br>    }<br>}</p><br>demo.html<br><p>&lt;html&gt;<br>        &lt;script language=&quot;javascript&quot;&gt;<br>            /<em> This function is invoked by the activity </em>/<br>                function wave() {<br>                    alert(&quot;1&quot;);<br>                        document.getElementById(&quot;droid&quot;).src=&quot;android_waving.png&quot;;<br>                        alert(&quot;2&quot;);<br>                }<br>        &lt;/script&gt;<br>        &lt;body&gt;<br>            &lt;!– Calls into the javascript interface for the activity –&gt;<br>            &lt;a onClick=&quot;window.demo.clickOnAndroid()&quot;&gt;&lt;div style=&quot;width:80px;<br>                        margin:0px auto;<br>                        padding:10px;<br>                        text-align:center;<br>                        border:2px solid #202020;&quot; &gt;<br>                                &lt;img id=&quot;droid&quot; src=&quot;android_normal.png&quot;/&gt;&lt;br&gt;<br>                                Click me!<br>                &lt;/div&gt;&lt;/a&gt;<br>        &lt;/body&gt;<br>&lt;/html&gt;</p><br> <p></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2010/10/27/使用ActivityGroup来切换Activity和Layout/" rel="next" title="使用ActivityGroup来切换Activity和Layout">
                <i class="fa fa-chevron-left"></i> 使用ActivityGroup来切换Activity和Layout
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2010/11/10/如何在onCreate时获取View的width和height/" rel="prev" title="如何在onCreate时获取View的width和height">
                如何在onCreate时获取View的width和height <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/wp-content/uploads/penguin.gif"
               alt="jfo" />
          <p class="site-author-name" itemprop="name">jfo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">596</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jfojfo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/jfojfo" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pickbox.me" title="收藏夹" target="_blank">收藏夹</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://note.pickbox.me" title="网络剪贴板" target="_blank">网络剪贴板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://iguangba.pickbox.me" title="爱逛吧" target="_blank">爱逛吧</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jfo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
