<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>jfo planet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="jfo planet">
<meta property="og:url" content="http://blog.pickbox.me/page/48/index.html">
<meta property="og:site_name" content="jfo planet">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="jfo planet">
  
    <link rel="alternative" href="/atom.xml" title="jfo planet" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.ico">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">jfo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">分类</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">jfo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">jfo</h1>
			</hgroup>
			
			<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-【zz】Win-2003单网卡实现VPN-NAT完整攻略" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/30/【zz】Win-2003单网卡实现VPN-NAT完整攻略/">【zz】Win 2003单网卡实现VPN+NAT完整攻略</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
         <p>　　<strong>一、问题的提出</strong></p><p>　　如图1所示，在单位有个私有地址为192.168.0.0的网络，各电脑 是通过ADSL共享方式接入Internet，在家中有台电脑也通过ADSL访问Internet，现在想在家中随时安全地访问单位 192.168.0.2这台机器，实现方法很多，最为安全的是通过VPN。</p><p>　　<strong>二、什么是VPN</strong></p><p>　 　以本例来说就是现在单位192.168.0.2这台机器上设置好VPN服务，在家中通过VPN客户端访问单位这台机器，建立连接后，这两台机器通信时就 像在局域网中一样，比如：要在192.168.1.10这台电脑中下载192.168.0.2这台机器的文件(假设该机已设好FTP服务)，可以直接在浏 览器中键入：ftp://192.168.0.2下载文件了。虽然是通过Internet进行通信，但整个过程都是加密的，就像是在Internet中穿 了一条只有两台机器才能通过的隧道，这就是VPN( Virtual Private Networks )虚拟专用网。</p><p><img height="237" width="445" src="http://web9i.com/upload_files/23/z21QMW9zy8qst3z33c.jpg"></p><p>图1</p><p>　　<strong>三、优点</strong></p><p>　　通过VPN最大的优点就是安全。这点将在后面介绍到。</p><p>　　<strong>四、设置VPN服务</strong></p><p>　 　实现VPN的方式非常多，用带VPN功能的路由器或用Linux、windows操作系统等，在windows系统下用双网卡建立VPN服务器更容易实 现、但要增加一块网卡。介绍这方面的内容很多，不再赘述。本文介绍的是在windows 2003中用单网卡来实现。下面介绍实际实现过程，首先是在192.168.0.2这台机器上配置VPN服务。</p><p>　　选择&quot;开始&quot;’&quot;所有程序&quot;’&quot;管理工具&quot;’&quot;路由和远程访问&quot;。</p><p>　　设置过程如图2至图9所示，出现图10界面就完成了单网的VPN服务器端的设置，这里特别指出的是用单网卡一定要在图6处选择&quot;自定义配置&quot;，否则就进行不下去了。</p><p><img height="249" width="305" src="http://web9i.com/upload_files/23/fkTbm9esb3e89vcs82.jpg"></p><p>图2</p><p><img height="354" width="426" src="http://web9i.com/upload_files/23/McKdi3b98rzi2aa2s0.jpg"></p><p>图3</p><p><img height="315" width="335" src="http://web9i.com/upload_files/23/IzLqLQ59ovaj6jizqb.jpg"></p><p>图4</p><p><img height="302" width="442" src="http://web9i.com/upload_files/23/5ej8USwqbf5jk39t3q.jpg"></p><p>图5</p><p><img height="348" width="400" src="http://web9i.com/upload_files/23/Rlb4S4pzenfacoy2a4.jpg"></p><p>图6</p><p><img height="310" width="393" src="http://web9i.com/upload_files/23/b8kq7R32nc646g70u0.jpg"></p><p>图7</p><p><img height="350" width="403" src="http://web9i.com/upload_files/23/UpFc4A1qy88a4niv6y.jpg"></p><p>图8</p><p><img height="331" width="399" src="http://web9i.com/upload_files/23/Hy9A7k1383yuo15v41.jpg"></p><p>图9</p><p><img height="191" width="500" src="http://web9i.com/upload_files/23/tx3dJ596bmme351p4i.jpg"></p><p>图10</p><p>　　<strong>五、从客户端连接到VPN服务器</strong></p><p>　　1、新建有拨入权限的用户</p><p>　 　要登录到VPN服务器，必须要知道该服务器的一个有拨入权限的用户，为了讲得更明白，下面在该VPN服务器上新建个用户并赋予该用户拨入的权限，过程如 图11至图12是建立一个用户，图13是给这个用户远程登录的权限，一定要在&quot;远程访问权限&quot;处选择&quot;允许访问&quot;，不然就无法登录了。</p><p><img height="266" width="209" src="http://web9i.com/upload_files/23/CoNw1R4e33mkaokz7h.jpg"></p><p>图11</p><p><img height="305" width="222" src="http://web9i.com/upload_files/23/IRBlnzlh27s370459n.jpg"></p><p>图12</p><p><img height="298" width="325" src="http://web9i.com/upload_files/23/lIgzIi35if120y8akg.jpg"></p><p>图13</p><p><img height="387" width="337" src="http://web9i.com/upload_files/23/cG0ggv5e640q5w35wp.jpg"></p><p>图14</p><p>　　2、在本机测试连接</p><p>　　在远程连接到VPN服务器之前，最好先在VPN服务器的本机测试一下，测试过程如下：</p><p>　 　鼠标右键&quot;网上邻居&quot;，如图14，点击&quot;新建连接向导&quot;，按图15至图21的步骤建立连接，因为现在做的是本机的测试，所以其中图18中的IP地址为本 机的地址，图21中的用户dzq就是我们刚才新建的用户。出现图22的连接图标表示连接成功。这样就可以进行远程连接测试了。如果此时用ipconfig /all看网卡状态，就会看见三个网卡，其中一个IP地址为192.168.0.2的就是本机网卡，另外两个是刚才做本机测试时建立的，它们的IP地址为 169.x.xx . xxx .. xxx，这是VPN默认的IP地址，是正常的，不用管它。</p><p><img height="310" width="470" src="http://web9i.com/upload_files/23/fhOddR7e09h6f6h981.jpg"></p><p>图15</p><p><img height="320" width="428" src="http://web9i.com/upload_files/23/aUg1s5x8uobx0v0w50.jpg"></p><p>图16</p><p><img height="320" width="422" src="http://web9i.com/upload_files/23/ouptqz7c6x5s6d6660.jpg"></p><p>图17</p><p><img height="323" width="422" src="http://web9i.com/upload_files/23/9uzBsWwmg1li7110q2.jpg"></p><p>图18</p><p><img height="320" width="422" src="http://web9i.com/upload_files/23/gt2uUjs0k2js3a1677.jpg"></p><p>图19</p><p><img height="320" width="422" src="http://web9i.com/upload_files/23/N4LS0Ta577t18uco80.jpg"></p><p>图20</p><p><img height="322" width="422" src="http://web9i.com/upload_files/23/poNBytcf93e1a6bv15.jpg"></p><p>图21</p><p><img height="280" width="298" src="http://web9i.com/upload_files/23/Oqmves5tswadcnz6s0.jpg"></p><p>图22</p><p><img height="84" width="196" src="http://web9i.com/upload_files/23/MFDQQ2c08jme0yic91.jpg"></p><p>图23</p><p>　　3、远程连接前准备</p><p>　　在远程连接之前要做好两个准备。</p><p>　 　第一要获得VPN服务器接入Internet的公共IP地址，如果是分配的静态IP，那就简单了，如果是动态IP，那必须在远程能随时获得这个IP地 址，本例如图1，192.168.0.2这台机器的公网IP实际上就是ADSL猫接入Internet时，是ISP给自动分配的，获得动态IP的方法请参 考拙作《获取动态IP地址的几种方法》。</p><p>　　第二要做个端口映射，从图1的拓扑可以看出，本例是通作在ADSL猫中通过NAT转换接入 Internet的，通过这种方式一定要在ADSL中作端口映射，由于windows 2003的VNP服务用的是1723端口，所以如图23，将1723端口映射到192.168.0.2这台设有VPN服务的机器。如果用的是直接拨号，那 在防火墙中将这个端口放开就行了。</p><p><img height="148" width="370" src="http://web9i.com/upload_files/23/Y7OF4l7s79s0lhcer1.jpg"></p><p>图24</p><p>　　4、远程连接</p><p>　　上面的服务器中的测试完成后，就可以在家中进行远程连接了，其过程和在本机连接测试的过程一样，如图14至图21所示，在实际连接时到图18这一步时，输入VPN服务器所在的公网IP就行了。</p><p>　 　实际应用中我是按照图1的拓扑连接的，连接很顺利，但遇到一个问题，在家通过VPN连入单位的机器后，和单位的机器通信完全正常，但不能正常上网。用 route print检查路由(如表1所示)发现有两个到目标0.0.0.0的路由，网关一个是本来的网关192.168.1.1，一个是建立VPN后的网关 169.254.101.219，这样在访问Internet网络时就有问题了。</p><p>C:&gt;route print<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  。。。。。。。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Active Routes:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Interface&nbsp;&nbsp;  Metric<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  0.0.0.0&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  61.55.13.163&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  50<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  169.254.255.255&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  50<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;  255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  20<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  20<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.255&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  20<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  240.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  20<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  240.0.0.0&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;  169.254.101.219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;  255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  192.168.1.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Default Gateway:&nbsp;&nbsp;&nbsp;  169.254.101.219<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ===========================================================================<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Persistent Routes:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  None</p><p>　　解决的办法：</p><p>　　删除接入VPN后的路由，命令如下所示：</p><p>　　C:&gt;route delete 0.0.0.0 mask 0.0.0.0 169.254.101.219</p><p>　　加一条指向VPN服务器所在网络的路由，本例(如图1)VPN服务器的地址为192.168.0.2,所以只要将到192.168.0.0这个网络的指向VPN的地址169.254.101.219就行了。</p><p>　　C:&gt;route add 192.168.0.0 mask 255.255.255.0 169.254.101.219</p><p>　　5、几点说明</p><p>　 　1)、建立完VPN连接后，两台电脑的VPN的IP地址都是169.0.0.0中的地址，好像不能修改，但这并不影响使用，如图1建立连接后，在 192.168.1.10这台电脑中ping 192.168.0.2是通的，也就是说要访问这台机器的资源，只要用192.168.0.2这个地址就行了。就像在局域网中一样。</p><p>　　 2)、做为VPN服务器的这台机器的安全设置，如果没有特殊需要很多服务完全可以限制在局域网内，例如FTP服务只允许192.168.0.0网内的电脑 访问。这样只要把VPN的安全做好就行了。换句话说，以本例来说，192.168.0.2这台机器访问Internet时是通过NAT地址转换，如果在 ADSL猫中不做端口映射，从Internet的其它电脑上是看不到这台机器的，本例只做了VPN服务的1723端口的映射，虽然本机开了很多的服务，开 放了很多端口，但这些都是对局域网开放的，要想从Internet访问这台机器，只有先建立了VPN才能访问其它的资源。只做一个服务的安全总比做许多服 务的安全要容易些。VPN服务器有许多安全设置，以后再探讨。</p><p>　　3)、建立完VPN连接后，可以通过WWW、FTP互相访问，也可通过终端服务等登录到这台机器上，进而访问局域网中的其它电脑。图24就是192.168.1.10在建立完VPN后直接利用远程桌面连接，登录到192.168.0.2的机器上的登录界面。</p><p><img height="173" width="406" src="http://web9i.com/upload_files/23/jxBeG57q6i08lpun77.jpg"></p><p>图25</p><p>　　至此，已完成VPN的架设，但是如果没开NAT的话，是无法通过NAT上网的，也就是上面出现需要手工修改路由表才能上网的情况，下面介绍如何开NAT实现通过VPN上网方法：</p><p>　　在路由和远程访问-本地-IP路由选择-常规-选择&ldquo;新增路由协议&rdquo;-选择&ldquo;NAT/基本防火墙&rdquo;</p><p>　　然后右键&ldquo;NAT/基本防火墙&rdquo;-新建接口-选择&ldquo;本地连接&rdquo;-然后将其&quot;设置为公用接口连接至internet&quot;-勾上&ldquo;在此接口上启用NAT&rdquo;</p><p>　　如图：</p><p><img height="470" width="500" src="http://web9i.com/upload_files/23/b5gWSf8v6295pu8hwd.jpg"></p><p>　　再次访问ip.knowsky.com看看噢，IP已经是VPN服务器的IP了~</p><p>　　并且本地不需要做其它任何设置</p> 
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/30/【zz】Win-2003单网卡实现VPN-NAT完整攻略/" class="archive-article-date">
  	<time datetime="2007-09-30T14:10:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-30</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Network/">Network</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-【zz】配置winxp成为一台VPN服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/30/【zz】配置winxp成为一台VPN服务器/">【zz】配置winxp成为一台VPN服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> [ZZ]E文教程:如何配置winxp成为一台VPN服务器?Configure Windows XP Professional to be a VPN server <br><br>For the Small Office/Home Office (SOHO), Windows XP Professional VPN features are a real boon. Traveling users with laptops or handheld computers will inevitably want files on the home network; you just can抰 bring everything with you. This is where the beauty of the Windows XP Professional computer connected to an always-on connection, such as DSL or cable modem, shines. That always-on link can be used to accept incoming VPN connections and allow your mobile users to access shared folders and files on your private network. <br>In this article, I抣l explain how to configure a Windows XP Professional computer to accept incoming VPN connections and discuss some tips on improving the remote access experience for the VPN client computer user. <br>Windows XP抯 all-in-one VPN solution<br>Windows XP Professional is designed as the one-stop solution for the SOHO, taking all the usability features available to Windows Me users and adding the powerful networking features available in Windows 2000. The combination lets you create the ideal remote access solution for the SOHO. <br>The Windows XP Professional remote access server capabilities are very similar to those available in Windows 2000 Professional. A Windows XP computer can accept a single incoming connection on each interface that can accept a connection. For example, a Windows XP machine can accept incoming connections on each of the following interfaces: <br>–&gt;<br>Dial-up modem serial interface <br>Infrared interface <br>Parallel port interface <br>VPN interface –&gt;<br>While it抯 unlikely, a Windows XP Professional machine with the above configuration could conceivably accept up to four simultaneous RAS connections. However, the typical configuration consists of a single RAS client connection, either through a dial-up modem interface or a VPN interface. <br>Create an incoming connection with the New Connection Wizard<br>Like Windows 2000 Professional, Windows XP Professional includes a New Connection Wizard. I抣l show you how to use the New Connection Wizard to create the new VPN server interface. In this example, I抣l assume the Windows XP Professional machine is not a member of a Windows NT 4.0 or Windows 2000 domain. The machine has two network interface cards; one is directly connected to the Internet, and the other is connected to the internal LAN. In addition, the external interface of the machine is configured for Internet Connection Sharing (ICS). While ICS changes the IP address of the LAN interface of the ICS computer to 192.168.0.1 through 16, it’s easy to change the IP address to one that fits the existing network environment. The IP address of the LAN interface of the ICS computer was changed to 10.0.0.1 through 24 to fix the preexisting network configuration. <br>How to create the VPN server interface, step-by-step <br>1. Click Start | Control Panel.<br>2. In the Control Panel, open the Network Connections applet.<br>3. In the Network Connections window (see Figure A), open the New Connection Wizard. <br>Figure A<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figa.gif"><br><br>The Network Connections window <br>4. On the Welcome To The New Connection Wizard page, click Next.<br>5. On the Network Connection Type page (see Figure B), select the Set Up An Advanced Connection option. <br>Figure B<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figb.gif"><br><br><br>On the Advanced Connection Options page (see Figure C), select the Accept Incoming Connections option and click Next. <br>Figure C<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figc.gif"><br><br>Configuring XP to accept incoming connections <br>7. On the Devices For Incoming Connections page (see Figure D), you can select optional devices on which you want to accept incoming connections. <br>Figure D<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figd.gif"><br><br>Note that you are not presented with any of the network interfaces on the computer. <br>8. On the Incoming Virtual Private Network (VPN) Connection page (see Figure E), select the Allow Virtual Private Connections option and click Next. <br>Figure E<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_fige.gif"><br><br><br>9. On the User Permissions page (see Figure F), select the users that are allowed to make incoming VPN connections. Click Next. <br>Figure F<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figf.gif"><br><br>Any user that isn抰 selected won抰 be able to initiate an incoming connection. <br>10. On the Networking Software page (see Figure G), click on the Internet Protocol (TCP/IP) entry and click the Properties button. <br>Figure G<br><br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figg.gif"><br><br>Configuring TCP/IP properties <br>11. In the Incoming TCP/IP Properties dialog box (see Figure H), place a check mark in the Allow Callers To Access My Local Area Network check box. This will allow VPN callers to connect to other computers on the LAN. If this check box isn抰 selected, VPN callers will only be able to connect to resources on the Windows XP VPN server itself. Click OK to return to the Networking Software page and then click Next. <br>Figure H<br><br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figh.gif"><br><br>Granting LAN access to callers <br>12. On the Completing The New Connection Wizard page, click Finish to create the connection. <br>After the Incoming Connection is complete, right-click on the connection in the Network Connections window and select the Properties command (see Figure I). <br>Figure I<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figi.gif"><br>Accessing the properties of the VPN server link <br>Note that on the General tab of the Incoming Connections Properties page (see Figure J) that no devices are listed. The comment No Hardware Capable Of Accepting Calls Is Installed isn抰 true, since you can now create VPN connections to both network interface cards. In practice, there is no point in creating a VPN connection to the internal interface card. <br>Figure J<br><br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figj.gif"><br><br>VPN clients will only call the external IP address of the Windows XP Professional VPN server. <br>VPN server optimization tips<br>The New Connection Wizard made it easy to create the VPN server interface, but you can still do more to optimize your VPN connections. First, note that you can create PPTP or L2TP/IPSec VPN connections. Figure K shows the connection status dialog box of a Windows XP VPN client connected to a Windows XP VPN server. Note that MPPE 128-bit encryption is automatically enabled and that Microsoft CHAP v2 is used for authentication. <br><br>Figure K<br><br><img src="http://img.pickbox.me/wp-content/uploads/pic/other_site/www_asia_vpnserver_figk.gif"><br><br>If both machines had machine certificates from the same Certification Authority installed, an L2TP/IPSec VPN link could have been negotiated. <br>If you want the VPN client to access resources on the internal network, the IP address assigned to the VPN client should be on the same network ID as the internal interface of the Windows XP VPN server computer. In addition, all the machines on the internal network should have a default gateway set using the IP address of the internal interface of the Windows XP VPN server. <br>In the unlikely event that the SOHO has multiple network segments, the routing table on the Windows XP VPN server needs to be configured with paths to the various internal network IDs. You can use the ROUTE ADD command to create these routing table entries. <br>Small networks that use a Windows XP Professional machine for a VPN server probably won抰 have network services such as WINS or DNS. If name resolution on the private network is an issue for the VPN client, then you should create a LMHOSTS file, a simple text file that contains name and IP address mappings. For example, the following line could represent an entry in an LMHOSTS file: <br>10.0.0.2 DEFIANT <br>The VPN client must be configured with an IP address or host name for the Windows XP Professional VPN server. If the Windows XP Professional client has a dedicated link to the Internet and a static IP address, you can use that IP address in the VPN client configuration interface. However, if the Windows XP Professional VPN server is assigned an IP address via DHCP, you抣l have to use an Internet host name and a method of registering the host name dynamically. A couple of services you might want to look into are TZO and DYNDNS. Both of these services will let you dynamically register a computer抯 IP address into the public DNS database. <br>Conclusion<br>Windows XP Professional provides simple VPN server capabilities that let you connect single VPN clients to your internal network, one at a time. If the Windows XP Professional computer has a dedicated connection to the Internet, you can connect to that computer from virtually anywhere in the world using a VPN link. The VPN server setup is simple and can accept calls from any Windows PPTP or L2TP/IPSec client.<br><br>原文如下:<br><a href="http://www.zdnetasia.com/insight/network/0" target="_blank">http://www.zdnetasia.com/insight/network/0</a>,39044847,39050037-1,00.htm </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/30/【zz】配置winxp成为一台VPN服务器/" class="archive-article-date">
  	<time datetime="2007-09-30T11:30:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-30</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Windows/">Windows</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-ld-命令行选项-ld-static" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/30/ld-命令行选项-ld-static/">ld 命令行选项 &amp; ld_static</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> ld<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          –start-group archives –end-group<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          The archives should be a list of archive files.  They may be either<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          explicit file names, or -l options.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          The  specified  archives are searched repeatedly until no new unde-<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          fined references are created.  Normally,  an  archive  is  searched<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          only  once  in  the order that it is specified on the command line.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          If a symbol in that archive is needed to resolve an undefined  sym-<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          bol  referred  to  by an object in an archive that appears later on<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          the command line, the linker would not be able to resolve that ref-<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          erence.&nbsp;&nbsp;          By grouping the archives, they all be searched repeatedly<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          until all possible references are resolved.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          Using this option has a significant performance cost.  It  is  best<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          to  use  it  only  when  there  are unavoidable circular references<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          between two or more archives.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       -M<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       –print-map<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       Print  a  link  map  to  the  standard output.  A link map provides<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       information about the link, including the following:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       -   Where object files and symbols are mapped into memory.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       -   How common symbols are allocated.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       -   All archive members included in the link, with a mention of the<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       symbol which caused the archive member to be brought in.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      –dynamic-linker file<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Set the name of the dynamic linker.  This is only  meaningful  when<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      generating dynamically linked ELF executables.  The default dynamic<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      linker is normally correct; don’t use this unless you know what you<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      are doing.<br><br><dl><dt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     –wrap <em>symbol</em> </dt><dd>Use a wrapper function for <em>symbol</em>. Any undefined reference to <em>symbol</em> will be resolved to <tt>&quot;<strong>wrap_ <em>symbol</em> &quot;</strong></tt>. Any undefined reference to <tt>&quot;real<em> <em>symbol</em> &quot;</em></tt> will be resolved to <em>symbol</em>.<p>This can be used to provide a wrapper for a system function. The wrapper function should be called <tt>&quot;__wrap <em>symbol</em> &quot;</tt>. If it wishes to call the system function, it should call <tt>&quot;<strong>real_ <em>symbol</em> &quot;</strong></tt>.</p><p>Here is a trivial example:</p>void *<br>wrap_malloc (size_t c)<br>{<br>  printf (&quot;malloc called with %zun&quot;, c);<br>  return <strong>real_malloc (c);<br>}<p>If you link other code with this file using <strong>–wrap malloc</strong>, then all calls to <tt>&quot;malloc&quot;</tt> will call the function <tt>&quot;</tt></p></strong>wrap_malloc&quot; instead. The call to <tt>&quot;<strong>real_malloc&quot;</strong></tt> in <tt>&quot;wrap_malloc&quot;</tt> will call the real <tt>&quot;malloc&quot;</tt> function.</dd></dl></p><p>You may wish to provide a <tt>&quot;<strong>real_malloc&quot;</strong></tt> function as well, so that links without the <strong>–wrap</strong> option will succeed. If you do this, you should not put the definition of <tt>&quot;real_malloc&quot;</tt> in the same file as <tt>&quot;__wrap_malloc&quot;</tt>; if you do, the assembler may resolve the call before the linker has a chance to wrap it to <tt>&quot;malloc&quot;</tt>.</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  -u symbol<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  –undefined=symbol<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Force symbol to be entered in the output file as an undefined symbol.  Doing this may, for  example,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  trigger  linking  of  additional modules from standard libraries.  -u may be repeated with different<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  option arguments to enter additional undefined symbols.  This option is equivalent to  the  &quot;EXTERN&quot;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  linker script command.<br><br><br><br><br>===================================================================================================<br><br>ld_static<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   -d, -dc, -dp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Force common symbols to be defined<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   -r, -i, –relocatable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Generate relocatable output<br><br><br>eg:<br>ld_static -d -r -o /lib/modules/2.6.24-16-generic/volatile/fglrx.ko  /lib/linux-restricted-modules/2.6.24-16-generic/fglrx/*<br><br><br><br><br><br><br><br><br><br><del>end</del> <p></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/30/ld-命令行选项-ld-static/" class="archive-article-date">
  	<time datetime="2007-09-29T16:10:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-30</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/gcc-binutils-make-共享库/">gcc/binutils/make/共享库</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Linux-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/27/Linux-command/">Linux command</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Linux Command</p>
<p>==============================================================<br>netstat -ntupl<br>-n Show numerical addresses instead of trying to determine symbolic host, port or user names.<br>-t tcp<br>-u udp<br>-p –program Show the PID and name of the program to which each socket belongs.<br>-l Show only listening sockets<br>-a Show both listening and non-listening sockets</p>
<p>==============================================================<br>ssh -CfNg -D 127.0.0.1:8000 jfo@pickbox.me<br>建立本地ssh代理，浏览器中可以设置socks5代理为127.0.0.1:8000<br>-N Do not execute a remote command.  This is useful for just forwarding ports (protocol version 2 only).<br>-f Requests ssh to go to background just before command execution<br>-C Requests compression of all data<br>-g Allows remote hosts to connect to local forwarded ports<br>-D [bind_address:]port<br>             Specifies a local dynamic application-level port forwarding.  This works by allo\<br>             cating a socket to listen to port on the local side, optionally bound to the speci\<br>             fied bind_address.  Whenever a connection is made to this port, the connection is<br>             forwarded over the secure channel, and the application protocol is then used to<br>             determine where to connect to from the remote machine.  Currently the SOCKS4 and<br>             SOCKS5 protocols are supported, and ssh will act as a SOCKS server.  Only root can<br>             forward privileged ports.  Dynamic port forwardings can also be specified in the<br>             configuration file.</p>
<p>==============================================================<br>rsync -c -avz –delete –exclude=”.git” –exclude=”wp-content/uploads” –progress -e ssh .  user@example.com:/opt/www<br>rsync -avz –delete –exclude=”.git” –progress -e ssh user@example.com:/opt/www/ .<br>-c: skip based on checksum, not mod-time &amp; size</p>
<p>==============================================================<br>可以取消原来设置的默认参数，如：<br>ls -l ：不会有默认的–color参数了<br>ls -p : add back slash after directory</p>
<p>==============================================================<br>Print only the process IDs of syslogd:<br>ps -C syslogd -o pid=</p>
<p>Print only the name of PID 42:<br>ps -p 42 -o comm=</p>
<p>pidofbash</p>
<p>==============================================================<br>objdumppe_dump.exe -x : Display the contents of all headers<br>objdump pe_dump.exe -s -j .idata : Display the full contents of “.idata” section<br>objdump pe_dump.exe -s -j .idata –start-address=0x431200 –stop-address=0x431800 : Display the full contents of “.idata” section in address [0x431200, 0x431800)<br>objdump pe_dump.exe -d -j .text : disassemble the contents of “.text” section<br>objdump pe_dump.exe -d -j .text –start-address=0x4187b0 : disassemble the contents of “.text” section starting from address 0x4187b0</p>
<p>objdump -j .text -Sl objtest | more<br>-S 尽可能反汇编出源代码，尤其当编译的时候指定了-g这种调试参数时，<br>效果比较明显。隐含了-d参数。<br>-l 用文件名和行号标注相应的目标代码 ( l是小写L )<br>-j name 仅仅显示指定section的信息</p>
<p>==============================================================<br>objcopy<br>–weaken<br>Change all global symbols in the file to be weak. This can be use-<br>ful when building an object which will be linked against other<br>objects using the -R option to the linker.   This option is only<br>effective when using an object file format which supports weak sym-<br>bols.</p>
<p>eg:<br>objcopy –only-keep-debug foo foo.dbg<br>objcopy –strip-debug foo<br>objcopy –add-gnu-debuglink=foo.dbg foo<br>======等价=====&gt;<br>strip –strip-debug foo<br>objcopy –add-gnu-debuglink=foo.full foo<br>(the file pointed to by the –add-gnu-debuglink can be the full<br>executable.   It does not have to be a file created by the<br>–only-keep-debug switch.)</p>
<p>==============================================================<br>strip<br>strip - Discard symbols from object files.</p>
<p>==============================================================<br>nm<br>-u<br>–undefined-only<br>Display only undefined symbols (those external to each object<br>file).</p>
<p>==============================================================<br>cat /proc/pid_num/maps :<br>显示运行进程的内存分布，包括动态库加载的位置</p>
<p>pmapPID</p>
<p>cat<br>-b, –number-nonblank<br>number nonblank output lines<br>-n, –number<br>number all output lines</p>
<p>==============================================================<br>Graphviz dot脚本参数<br>nodesep=0.3;<br>ranksep=2;<br>rankdir=LR;</p>
<p>==============================================================<br>od -Ax -t x1 file<br>-A, –address-radix=RADIX<br>decide how file offsets are printed<br>-t, –format=TYPE<br>select output format or formats<br>-x     same as -t x2, select hexadecimal shorts<br>x[SIZE] : hexadecimal, SIZE bytes per integer</p>
<p>==============================================================<br>tac- concatenate and print files in reverse</p>
<p>==============================================================<br>rev- reverse chars in each line of a file</p>
<p>==============================================================<br>date +%a<br>%a     locale’s abbreviated weekday name (e.g., Sun)<br>%F     full date; same as %Y-%m-%d<br>%s     seconds since 1970-01-01 00:00:00 UTC<br>%T     time; same as %H:%M:%S<br>%u     day of week (1..7); 1 is Monday<br>%x     locale’s date representation (e.g., 12/31/99)<br>%X     locale’s time representation (e.g., 23:13:48)</p>
<p>%s     show timeStamp</p>
<p>%F     full date; same a</p>
<p>date -d “1970-01-01 UTC 1318477895 seconds”</p>
<p>&nbsp;</p>
<p>==============================================================<br>备份文件的方法：<br>tar cf - . | (cd ../dest/directory; tar xpvf -) 或者<br>tar cf - . | tar xpvf - -C ../dest/directory</p>
<p>==============================================================<br>cut<br>-c:<br>$ echo “August” | cut -c2<br>u<br>$ echo “August” | cut -c1-3<br>Aug</p>
<p>==============================================================<br>tr [OPTION]… SET1 [SET2]<br>-d, –delete<br>delete characters in SET1, do not translate<br>$ echo “abcd1234” | tr -d ‘cd4’<br>ab123<br>-s, –squeeze-repeats<br>replace each input sequence of a repeated character that is<br>listed in SET1 with a single occurrence of that character<br>删除所有重复出现字符序列，只保留第一个；即将重复出现字符串压缩为一个字符串。<br>$ echo “aabaacccdefee” | tr -s ‘ace’<br>abacdefe<br>$ echo “aabaacccdefee” | tr -s ‘ace’ ‘xyz’<br>xbxydzfz</p>
<p>$ echo “abcd1234” | tr ‘[:lower:]’ ‘[:upper:]’<br>ABCD1234</p>
<p>SET2 is extended to length of SET1 by repeating its last character as necessary.<br>Excess characters of SET2 are ignored.<br>$ echo “abcd1234” | tr ‘abc’ ‘jfo’<br>jfod1234<br>$ echo “abcd1234” | tr ‘abcd’ ‘jfo’<br>jfoo1234<br>$ echo “abcd1234” | tr ‘ab’ ‘jfo’<br>jfcd1234<br>$ echo “g fmnc wms bgblr rpylqjyrc gr zw fylb.” | tr a-z c-za-b<br>i hope you didnt translate it by hand.</p>
<p>==============================================================<br>wall<br>wall – send a message to everybody’s terminal.<br>eg: wall “This is a message!”</p>
<p>==============================================================<br>fuser file<br>显示file正在被那个进程使用</p>
<p>==============================================================<br>csplit [OPTION]… FILE PATTERN…<br>Output pieces of FILE separated by PATTERN(s) to files <code>xx01&#39;,</code>xx02’, …,<br>and output byte counts of each piece to standard output.</p>
<p>长选项必须用的参数在使用短选项时也是必须的。<br>-b, –suffix-format=FORMAT use sprintf FORMAT instead of %d<br>-f, –prefix=PREFIX        use PREFIX instead of `xx’<br>-k, –keep-files           do not remove output files on errors<br>-n, –digits=DIGITS        use specified number of digits instead of 2<br>-s, –quiet, –silent      do not print counts of output file sizes<br>-z, –elide-empty-files    remove empty output files<br>–help     显示此帮助信息并离开<br>–version 显示版本信息并离开</p>
<p>Read standard input if FILE is -. Each PATTERN may be:</p>
<p>INTEGER            copy up to but not including specified line number<br>/REGEXP/[OFFSET]   copy up to but not including a matching line<br>%REGEXP%[OFFSET]   skip to, but not including a matching line<br>{INTEGER}          repeat the previous pattern specified number of times<br>{*}                repeat the previous pattern as many times as possible</p>
<p>A line OFFSET is a required <code>+&#39; or</code>-‘ followed by a positive integer.</p>
<p>==============================================================<br>echo “(8.96-7.7)/3.7” | bc -lq<br>通过bc计算结果，-l 默认设置scale为20（可保留小数点后20位）<br>echo “scale=6; (8.96-7.7)/3.7” | bc -q<br>注意：scale=6必须写在expression的前面</p>
<p>==============================================================<br>cscope -Rbkq<br>-b     Build the cross-reference only.<br>-k     ‘kernel Mode’, turns off the use of the default include dir<br>(usually /usr/include) when building the database, since kernel<br>source trees generally do not use it.<br>-q     Enable fast symbol lookup via an inverted index.<br>-R: 在生成索引文件时，搜索子目录树中的代码<br>-b: 只生成索引文件，不进入cscope的界面<br>-k: 在生成索引文件时，不搜索/usr/include目录<br>-q: 生成cscope.in.out和cscope.po.out文件，加快cscope的索引速度<br>eg:　find | grep -v “arm|powerpc|amd” | xargs cscope -b</p>
<p>==============================================================<br>alien     convert formats of binary package</p>
<p>==============================================================<br>setterm -blank 0 （让显示器不休眠）<br>setterm -blank n (n为等待时间)</p>
<p>==============================================================<br>让用户的密码必须有一定的长度，并且符合复杂度<br>vi /etc/login.defs，修改PASS_MIN_LEN</p>
<p>==============================================================<br>cpio<br>Main operation mode:<br>-i, –extract              Extract files from an archive (run in copy-in mode)<br>-o, –create               Create the archive (run in copy-out mode)<br>-p, –pass-through    Run in copy-pass mode</p>
<h2 id="t-–list-Print-a-table-of-contents-of-the-input"><a href="#t-–list-Print-a-table-of-contents-of-the-input" class="headerlink" title="-t, –list                      Print a table of contents of the input"></a>-t, –list                      Print a table of contents of the input</h2><p>-d, –make-directories     Create leading directories where needed<br>-m, –preserve-modification-time Retain previous file modification times when creating files<br>-s, –swap-bytes            Swap the bytes of each halfword in the files<br>-S, –swap-halfwords      Swap the halfwords of each word (4 bytes) in the files<br>-b, –swap                       Swap both halfwords of words and bytes of halfwords in the data. Equivalent to -sS<br>-A, –append             Append to an existing archive.</p>
<h2 id="–no-absolute-filenames-Create-all-files-relative-to-the-current-directory"><a href="#–no-absolute-filenames-Create-all-files-relative-to-the-current-directory" class="headerlink" title="–no-absolute-filenames   Create all files relative to the current directory"></a>–no-absolute-filenames   Create all files relative to the current directory</h2><p>Examples:</p>
<h1 id="Copy-files-named-in-name-list-to-the-archive"><a href="#Copy-files-named-in-name-list-to-the-archive" class="headerlink" title="Copy files named in name-list to the archive"></a>Copy files named in name-list to the archive</h1><p>cpio -o &lt; name-list [&gt; archive]</p>
<h1 id="Extract-files-from-the-archive"><a href="#Extract-files-from-the-archive" class="headerlink" title="Extract files from the archive"></a>Extract files from the archive</h1><p>cpio -i [&lt; archive]</p>
<h1 id="Copy-files-named-in-name-list-to-destination-directory"><a href="#Copy-files-named-in-name-list-to-destination-directory" class="headerlink" title="Copy files named in name-list to destination-directory"></a>Copy files named in name-list to destination-directory</h1><p>cpio -p destination-directory &lt; name-list</p>
<h1 id="Copy-individual-files-out-of-rpm-file"><a href="#Copy-individual-files-out-of-rpm-file" class="headerlink" title="Copy individual files out of rpm file,"></a>Copy individual files out of rpm file,</h1><p>rpm2cpio RPM_file | cpio -id individual_file(s)</p>
<h1 id="copy-all-files-amp-dirs-in-one-partition-to-another"><a href="#copy-all-files-amp-dirs-in-one-partition-to-another" class="headerlink" title="copy all files &amp; dirs in one partition to another"></a>copy all files &amp; dirs in one partition to another</h1><p>sudo find /home/jfo -depth -print0 | sudo cpio –null –sparse –preserve-modification-time -pvd /mnt/newhome/<br>-depth says search all the way to the lowest level of the folder tree<br>-print0 is to include file names with spaces<br>–null expect to receive filenames containing spaces<br>–preserve-modification-time keeps all the ‘last modified timestamps’ intact through the copy process<br>pis for pass-through or ‘by-pass the archive step’ and copy direct to destination<br>v is verbose - list the files copied onscreen<br>d specifies make-directories - create the corresponding folders in the destination folder.</p>
<p>==============================================================<br>curl<br>URL syntax:<br><a href="http://site.{one,two,three}.com" target="_blank" rel="external">http://site.{one,two,three}.com</a><br>ftp://ftp.numericals.com/file[1-100].txt<br>ftp://ftp.numericals.com/file[001-100].txt    (with leading zeros)<br>ftp://ftp.letters.com/file[a-z].txt<br><a href="http://any.org/archive[1996-1999]/vol[1-4]/part{a,b,c}.html" target="_blank" rel="external">http://any.org/archive[1996-1999]/vol[1-4]/part{a,b,c}.html</a></p>
<h2 id="http-www-numericals-com-file-1-100-10-txt-step-by-10"><a href="#http-www-numericals-com-file-1-100-10-txt-step-by-10" class="headerlink" title="http://www.numericals.com/file[1-100:10].txt    (step by 10)"></a><a href="http://www.numericals.com/file[1-100:10].txt" target="_blank" rel="external">http://www.numericals.com/file[1-100:10].txt</a>    (step by 10)</h2><p>Examples:</p>
<h1 id="上传文件，以mutipart-form-data-post"><a href="#上传文件，以mutipart-form-data-post" class="headerlink" title="上传文件，以mutipart/form-data post"></a>上传文件，以mutipart/form-data post</h1><p>curl -F file=@/etc/passwd www.mypasswords.com</p>
<p>==============================================================<br>sudo</p>
<p><dl><dt>-K</dt><dd>The <strong>-K</strong> (sure <em>kill</em>) option is like <strong>-k</strong> except that it removes the user’s timestamp entirely. Like <strong>-k</strong>, this option does not require a password.</dd><dt>-S</dt><dd>The <strong>-S</strong> (<em>stdin</em>) option causes <strong>sudo</strong> to read the password from the standard input instead of the terminal device.</dd><dt>              ——————————————————————————————————<br>Examples:</dt><dd>sudo -S ls &lt;&lt;EOF</dd><dt>          password</dt><dd>EOF</dd></dl>==============================================================<br>chkconfig<br>安装 脚本在Linux启动时运行<br>copy openvpn.sh to /etc/rc.d/init.d/openvpn<br>shell&gt; chkconfig –add openvpn<br>shell&gt; mkdir /etc/openvpn<br>make .conf or .sh files in /etc/openvpn (see below)</p>
<p>To uninstall:<br>run: chkconfig –del openvpn</p>
<p>==============================================================<br>nroff-man /usr/man/man1/cscope.1 | more<br>man命令不在路径中时，查看非标准的man文件</p>
<p>==============================================================<br>xargs<br>–null, -0<br>Input items are terminated by a null character instead of by whitespace, and the<br>quotes and backslash are not special (every character is taken literally).   Disables<br>the end of file string, which is treated like any other argument. Useful when input<br>items might contain white space, quote marks, or backslashes. The GNU find -print0<br>option produces input suitable for this mode.<br>–max-args=max-args, -n max-args<br>Use at most max-args arguments per command line. Fewer than max-args arguments will<br>be used if the size (see the -s option) is exceeded, unless the -x option is given,<br>in which case xargs will exit.<br>-Ｉ replace-str<br>-i 表示 find 传递给xargs的结果 由{}来代替，等价于 -Ｉ{}</p>
<p>eg:<br>find ./ -type f -print | xargs -i mv -f {} ./newdir<br>find ./ -type f -print | xargs -I aa mv -f aa ./newdir</p>
<p>==============================================================<br>tee<br>Copy standard input to each FILE, and also to standard output.<br>eg: cat file | tee out1 out2 out3</p>
<p>==============================================================<br>run-parts<br>run-parts runs all the executable files named within constraints<br>found in directory directory.<br>eg: run-parts /etc/ppp/ip-up.d –arg=”$1”–arg=”$2” –arg=”$3”</p>
<p>==============================================================<br>modinfo   显示模块的详细信息<br>modinfo snd-atiixp</p>
<p>==============================================================<br>type    bash内置命令<br>eg: type ls<br>ls 已被别名为“ls –color=auto”<br>ls is /bin/ls</p>
<p><del>end</del></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/27/Linux-command/" class="archive-article-date">
  	<time datetime="2007-09-27T13:11:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-27</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Linux-App/">Linux App</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Gs-Control-Stack-Checking-Calls" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/25/Gs-Control-Stack-Checking-Calls/">/Gs (Control Stack Checking Calls)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> [zz]from msdn<a name="_core_.2f.gs"></a>/Gs (Control Stack Checking Calls) /Gs<em><a>n</a></em></p><p>where:  </p><dl><dt><em>n</em> </dt><dd>The number of bytes that local variables can occupy before a stack probe is  activated. </dd></dl>Remarks<p>This option is an advanced feature to control stack probes. A stack probe is  a sequence of code the compiler inserts into every function call. When  activated, a stack probe reaches benignly into memory by the amount of space  required to store the associated function’s local variables.</p><p>If a function requires more than <em>n</em> bytes of stack space for local  variables, its stack probe is activated. The default value of <em>n</em> is the  size of one page (4K for 80x86 processors). This value allows a carefully tuned  interaction between an application for Win32 and the Windows NT virtual-memory  manager to increase the amount of memory committed to the program stack at run  time.</p><blockquote><strong>Note</strong>&nbsp;&nbsp;&nbsp; The default value of  <em>size</em> is carefully chosen to allow the program stack of applications for  Win32 to grow at run time. Do not change the default setting of /Gs unless you know  exactly why you need to change it.</blockquote><p>Some programs, such as virtual device drivers, do not require this default  stack-growth mechanism. In such cases, the stack probes are not necessary. You  can stop the compiler from generating stack probes by setting <em>size</em> to a  value that is larger than any function will require for local variable storage.  No space is allowed between /Gs and <em>n</em>.</p><p>/Gs0 has the same effect as .</p><p>You can turn stack probes on or off by using . Note that the  /Gs option and the  <strong>check_stack</strong> pragma have no effect on standard C library routines; they  affect only the functions you compile. </p><p><strong>To set this compiler option in the Visual Studio  development environment</strong> </p><ol> <li>Open the project’s <strong>Property Pages</strong> dialog box. For details, see .  </li> <li>Click the <strong>C/C++</strong> folder.  </li> <li>Click the <strong>Code Generation</strong> property page.  </li> <li>Modify the <strong>Buffer Security Check</strong> property. </li></ol><p><strong>To set this compiler option programmatically</strong></p><p>See .</p>See Also<p> | </p> <p></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/25/Gs-Control-Stack-Checking-Calls/" class="archive-article-date">
  	<time datetime="2007-09-25T05:32:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-25</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Windows/">Windows</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Windows-API" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/22/Windows-API/">Windows API</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> <strong><br>[kernel32.dll]<br>DWORD</strong> <strong>GetPrivateProfileString(</strong><br> <strong>LPCTSTR</strong> <em><a>lpAppName</a></em><strong>,<br></strong> <strong>LPCTSTR</strong> <em><a>lpKeyName</a></em><strong>,<br></strong> <strong>LPCTSTR</strong> <em><a>lpDefault</a></em><strong>,<br></strong> <strong>LPTSTR</strong> <em><a>lpReturnedString</a></em><strong>,<br></strong> <strong>DWORD</strong> <em><a>nSize</a></em><strong>,<br></strong> <strong>LPCTSTR</strong> <em><a>lpFileName</a></em><strong><br></strong><strong>);<br><br></strong><strong>int WideCharToMultiByte(<br>  UINT</strong><em> <a>CodePage</a></em><strong>,            </strong>// code page<br><strong>  DWORD</strong><em> <a>dwFlags</a></em><strong>,            </strong>// performance and mapping flags<br><strong>  LPCWSTR</strong><em> <a>lpWideCharStr</a></em><strong>,    </strong>// wide-character string<br><strong>  int</strong><em> <a>cchWideChar</a></em><strong>,          </strong>// number of chars in string.<br><strong>  LPSTR</strong><em> <a>lpMultiByteStr</a></em><strong>,     </strong>// buffer for new string<br><strong>  int</strong><em> <a>cbMultiByte</a></em><strong>,          </strong>// size of buffer<br><strong>  LPCSTR</strong><em> <a>lpDefaultChar</a></em><strong>,     </strong>// default for unmappable chars<br><strong>  LPBOOL</strong><em> <a>lpUsedDefaultChar</a></em>  // set when default char used<br><strong>);<br><br></strong><strong>int MultiByteToWideChar(<br>  UINT</strong><em> <a>CodePage</a></em><strong>,         </strong>// code page<br><strong>  DWORD</strong><em> <a>dwFlags</a></em><strong>,         </strong>// character-type options<br><strong>  LPCSTR</strong><em> <a>lpMultiByteStr</a></em><strong>, </strong>// string to map<br><strong>  int</strong><em> <a>cbMultiByte</a></em><strong>,       </strong>// number of bytes in string<br><strong>  LPWSTR</strong><em> <a>lpWideCharStr</a></em><strong>,  </strong>// wide-character buffer<br><strong>  int</strong><em> <a>cchWideChar</a></em>        // size of buffer<br><strong>);</strong><br><br>BOOL <strong>QueryPerformanceFrequency</strong>(  // us级, High-Resolution Timer<br>  LARGE_INTEGER <em>lpFrequency<br>);<br>BOOL <strong>QueryPerformanceCounter</strong>(<br>  LARGE_INTEGER </em>lpPerformanceCount<br>);<br>DWORD <strong>GetTickCount</strong>(void); // ms级<br><br>BOOL <strong>GetDiskFreeSpace</strong>(<br>  LPCTSTR lpRootPathName,<br>  LPDWORD lpSectorsPerCluster,<br>  LPDWORD lpBytesPerSector,<br>  LPDWORD lpNumberOfFreeClusters,<br>  LPDWORD lpTotalNumberOfClusters<br>);<br>    eg:GetDiskFreeSpace(&quot;C:\&quot;,&amp;Sectors,&amp;Bytes,&amp;Free,&amp;Total);<br><br><br>BOOL WINAPI <strong>AllocConsole</strong>(void);<br><blockquote></blockquote><br><strong>[PSAPI.DLL]<br></strong><strong>BOOL</strong> <strong>EnumProcesses(</strong><br> <strong>DWORD<em></em></strong> <em><a>pProcessIds</a></em><strong>,<br></strong> <strong>DWORD</strong> <em><a>cb</a></em><strong>,<br></strong> <strong>DWORD</strong> <em><a>pBytesReturned</a></em><strong><br></strong><strong>);</strong><br><strong><br></strong><strong>BOOL</strong> <strong>EnumProcessModules(</strong><br> <strong>HANDLE</strong> <em><a>hProcess</a></em><strong>,<br></strong> <strong>HMODULE<em></em></strong> <em><a>lphModule</a></em><strong>,<br></strong> <strong>DWORD</strong> <em><a>cb</a></em><strong>,<br></strong> <strong>LPDWORD</strong> <em><a>lpcbNeeded</a></em><strong><br></strong><strong>);<br><br></strong><strong>DWORD</strong> <strong>GetModuleFileNameEx(</strong><br> <strong>HANDLE</strong> <em><a>hProcess</a></em><strong>,<br></strong> <strong>HMODULE</strong> <em><a>hModule</a></em><strong>,<br></strong> <strong>LPTSTR</strong> <em><a>lpFilename</a></em><strong>,<br></strong> <strong>DWORD</strong> <em><a>nSize</a></em><strong><br></strong><strong>);</strong> <br><br><br><strong>[Dbghelp.dll</strong><strong>]<br>PVOID</strong> <strong>ImageDirectoryEntryToDataEx(</strong><br> <strong>PVOID</strong> <em><a>Base</a></em><strong>,<br></strong> <strong>BOOLEAN</strong> <em><a>MappedAsImage</a></em><strong>,<br></strong> <strong>USHORT</strong> <em><a>DirectoryEntry</a></em><strong>,<br></strong> <strong>PULONG</strong> <em><a>Size</a></em><strong>,<br></strong> <strong>PIMAGE_SECTION_HEADER</strong> <em><a>FoundHeader</a></em><strong><br></strong><strong>);</strong> <br><br><br><strong><br>[user32.dll]<br></strong> BOOL CClipboard::SetText(LPCTSTR lpszBuffer)<br>{<br> BOOL bSuccess = FALSE;<br><br> // First, open the clipboard. OpenClipboard() takes one<br> // parameter, the handle of the window that will temporarily<br> // be it’s owner. If NULL is passed, the current process<br> // is assumed. After opening, empty the clipboard so we<br> // can put our text on it.<br> if (::<strong>OpenClipboard</strong>(NULL))<br> {<br>  ::<strong>EmptyClipboard</strong>();<br><br>  // Get the size of the string in the buffer that was<br>  // passed into the function, so we know how much global<br>  // memory to allocate for the string.<br>  int nSize = (int)_tcslen(lpszBuffer);<br><br>  // Allocate the memory for the string.<br>  HGLOBAL hGlobal = ::<strong>GlobalAlloc</strong>(GMEM_ZEROINIT, (nSize+1)*sizeof(TCHAR));<br><br>  // If we got any error during the memory allocation,<br>  // we have been returned a NULL handle.<br>  if (hGlobal)<br>  {<br>   // Now we have a global memory handle to the text<br>   // stored on the clipboard. We have to lock this global<br>   // handle so that we have access to it.<br>   LPTSTR lpszData = (LPTSTR) ::<strong>GlobalLock</strong>(hGlobal);<br><br>   if (lpszData)<br>   {<br>    // Now, copy the text from the buffer into the allocated<br>    // global memory pointer<br>    _tcscpy(lpszData, lpszBuffer);<br><br>    // Now, simply unlock the global memory pointer,<br>    // set the clipboard data type and pointer,<br>    // and close the clipboard.<br>    ::<strong>GlobalUnlock</strong>(hGlobal);<br>#ifdef _UNICODE<br>    ::<strong>SetClipboardData</strong>(CF_UNICODETEXT, hGlobal);<br>#else<br>    ::<strong>SetClipboardData</strong>(CF_TEXT, hGlobal);<br>#endif<br>    bSuccess = TRUE;<br>   }<br>  }<br>  ::<strong>CloseClipboard</strong>();<br> }<br><br> return bSuccess;<br>}<br><br>BOOL <strong>FlashWindow</strong>(<br>  HWND hWnd,<br>  BOOL bInvert<br>);<br><br>BOOL WINAPI <strong>ExitWindowsEx</strong>(<br>  UINT uFlags, // EWX_LOGOFF、EWX_SHUTDOWN、EWX_REBOOT<br>  DWORD dwReason<br>);<br><br>BOOL <strong>SetWindowPos</strong>(HWND hWnd,<br>    HWND hWndInsertAfter, // HWND_BOTTOM、HWND_NOTOPMOST、HWND_TOP、HWND_TOPMOST<br>    int X,<br>    int Y,<br>    int cx,<br>    int cy,<br>    UINT uFlags<br>);<br>uFlags:<br>　　SWP_FRAMECHANGED 发送一条WM_NCCALCSIZE消息进入窗口，即使窗口的大小没有发生改变。如果不指定这个参数，消息WM_NCCALCSIZE只有在窗口大小发生改变时才发送<br>　　SWP_HIDEWINDOW 隐藏窗口<br>　　SWP_NOACTIVATE 不激活窗口<br>　　SWP_NOCOPYBITS 屏蔽客户区域<br>　　SWP_NOMOVE 保持当前位置（X和Y参数将被忽略）<br>　　SWP_NOOWNERZORDER 不改变所有窗口的位置和排列顺序<br>　　SWP_NOREDRAW 窗口不自动重画<br>　　SWP_NOREPOSITION 与SWP_NOOWNERZORDER标记相同<br>　　SWP_NOSENDCHANGING 防止这个窗口接受WM_WINDOWPOSCHANGING消息<br>　　SWP_NOSIZE 保持当前大小（cx和cy会被忽略）<br>　　SWP_NOZORDER 保持窗口在列表的当前位置（hWndInsertAfter将被忽略）<br>　　SWP_SHOWWINDOW 显示窗口<br><br><br><strong>[shell32.dll, shellapi.h]</strong><br>HINSTANCE <strong>ShellExecute</strong>(HWND hwnd,<br>    LPCTSTR lpOperation,<br>    LPCTSTR lpFile,<br>    LPCTSTR lpParameters,<br>    LPCTSTR lpDirectory,<br>    INT nShowCmd<br>);<br>eg:<br> ShellExecute(Handle,NULL,&quot;<a href="http://fdlweb.myrice.com/&quot;,NULL,NULL,SW_SHOWNORMAL" target="_blank" rel="external">http://fdlweb.myrice.com/&quot;,NULL,NULL,SW_SHOWNORMAL</a>);<br> ShellExecute(Handle,NULL,&quot;mailto:fdlweb@sina.com&quot;,NULL,NULL,SW_SHOWNORMAL);<br> ShellExecute(handle, NULL, &lt;fully_qualified_path_to_folder&gt;, NULL, NULL, SW_SHOWNORMAL);<br><strong><br><br>[gdi32.dll]</strong><br>BOOL <strong>BitBlt</strong>(<br>  HDC hdcDest, // handle to destination DC<br>  int nXDest,  // x-coord of destination upper-left corner<br>  int nYDest,  // y-coord of destination upper-left corner<br>  int nWidth,  // width of destination rectangle<br>  int nHeight, // height of destination rectangle<br>  HDC hdcSrc,  // handle to source DC<br>  int nXSrc,   // x-coordinate of source upper-left corner<br>  int nYSrc,   // y-coordinate of source upper-left corner<br>  DWORD dwRop  // raster operation code<br>);<br>    eg: BitBlt(hdc,0,0,Screen-&gt;Width,Screen-&gt;Height,GetDC(0),0,0,SRCCOPY); //draw desktop screen </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/22/Windows-API/" class="archive-article-date">
  	<time datetime="2007-09-22T12:55:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-22</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Windows/">Windows</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-【zz】用Debug函数实现API函数的跟踪" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/16/【zz】用Debug函数实现API函数的跟踪/">【zz】用Debug函数实现API函数的跟踪</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
         <p>发布时间：2003.01.16 11:00&nbsp;&nbsp;&nbsp;&nbsp; 来源：赛迪网&nbsp;&nbsp;&nbsp;&nbsp;作者：彭春华</p><p>如果我们能自己编写一个类似调试器的功能，这个调试器需要实现我们对于跟踪监视工具的要求，即自动记录输入输出参数，自动让目标进程继续运行。下面我们就来介绍在不知道函数原型的情况下也可以简单输出监视结果的方案&mdash;&mdash;用Debug函数实现API函数的监视。 </p><p>大家知道，VC可以用来调试程序，除了调试Debug程序，当然也可以调试Release程 序（调试Release程序时为汇编代码）。如果知道函数的入口地址，只需在函数入口上设置断点，当程序调用了设置断点的函数时，VC就会暂停目标程序的 运行，你就可以得到目标程序内存的所有你希望得到的东西了。一般来说，只要你有足够的耐心和毅力，以及一些汇编知识，对于监视API函数的输入输出参数还 是可以完成的。 </p><p>不过，由于VC的调试器会在每次断点时暂停目标程序的运行，对目标程序的过多的暂停对于监视任务而言实在不能忍受。所以，不会有太多的人真的会用VC的调试器作为一个良好的API函数监视器的。 </p><p>如果VC调试器能够在你设置好断点后，在运行时自动输出断点时的堆栈值（也就是函数 的输入参数），在函数运行结束时也自动输出堆栈值（也就是函数的输出参数）和CPU寄存器的值（就是函数返回值），并且不会暂停目标程序。所有一切都是自 动的无需我们干预。你会用它来作为监视器吗？我会的。 </p><p>我不知道如何让VC这样作（或许VC真的可以这样，但我不知道。有人知道的话请通 知我一声，谢谢），但我知道显然VC也是通过调用Windows API函数完成调试器的任务，而且，这些函数显然可以实现我的要求。我需要作的事情就是自己利用这些API函数，写一个简单的调试器，在目标程序断点发生 时自动输出监视结果并且自动恢复目标程序的运行。 </p><p>显然，用VC调试器作为监视器的话无需知道目标函数的原型就可以得到简单的输入输 出参数和函数运行结果，而且，由于监视代码没有注入目标程序中，就不会出现监视目标函数和监视代码的冲突。VC调试器显然可以跟踪递归函数，也可以跟踪 DLL模块调用DLL本身的函数，以及EXE内部调用自身的函数。只要你知道目标函数的入口地址，就可以跟踪了（监视Exe自身的函数可以通过生成Exe 模块时选择输出Map文件，就可以参考Map文件得到Exe内部函数的地址）。没有听说VC不能调试多线程的，最多是说调试多线程比较麻烦—-证明多 线程是可以调试的。显然，VC也可以调试DllMain中的代码。这些，已经可以证明通过调试函数可以实现我们的目标了。 </p><p><strong>首先，让目标程序进入被调试状态：</strong> </p><p>对于一个已经启动的进程而言，利用DebugActiveProcess函数就可以捕获目标进程，将目标进程进入被调试状态。 </p><p> </p><p>参数dwProcessId是目标进程的进程ID。如何通过ToolHelp系列函 数或Psapi库函数获得一个运行程序的进程ID在很多文章中介绍过，这里就不再重复。对于服务器程序而言，由于没有权限无法捕获目标进程，可以通过提升 监视程序的权限得到调试权限进行捕获目标进程（用户必须拥有调试权限）。 </p><p>对于启动一个新的程序而言，通过CreateProcess函数，设置必要的参数就可以将目标程序进入被调试状态。 </p><p> </p><p>该函数的具体说明请参考MSDN，在这里我仅介绍我们感兴趣的参数。这里和一般的用 法不同，作为被调试程序dwCreationFlags必须设置为DEBUG_PROCESS或DEBUG_ONLY_THIS_PROCESS。这样启 动的目标程序就会进入被调试状态。这里说明一下DEBUG_PROCESS和DEBUG_ONLY_THIS_PROCESS。 DEBUG_ONLY_THIS_PROCESS就是只调试目标进程，而DEBUG_PROCESS参数则不仅调试目标进程，而且调试由目标进程启动的所 有子进程。比如：在A.exe中启动B.exe，如果用DEBUG_ONLY_THIS_PROCESS启动，监视进程只调试A.exe不会调试 B.exe，如果是DEBUG_PROCESS就会调试A.exe和B.exe。为简单起见，本文只讨论启动参数为 DEBUG_ONLY_THIS_PROCESS的情况。 </p><p>使用方法： </p><p> </p><p><strong>其次，对进入被调试状态的程序进行监视：</strong> </p><p>目标进程进入了被调试状态，调试程序（这里调试程序就是我们的监视程序，以后不再说 明）就负责对被调试的程序进行调试操作的调度。调试程序通过WaitForDebugEvent函数获得来自被调试程序的调试消息，调试程序根据得到的调 试消息进行处理，被调试进程将暂停操作，直到调试程序通过ContinueDebugEvent函数通知被调试程序继续运行。 </p><p> </p><p>在参数lpDebugEvent中可以获得调试消息，需要注意的是该函数必须和让目 标程序进入调试状态的线程是同一线程。也就是说和通过DebugActiveProcess或CreateProcess调用的线程是一个线程。另外，我 又喜欢将dwMilliseconds设置为-1（无限等待）。所以我通常都会将CreateProcess和WaitForDebugEvent函数在 一个新的线程中使用。 </p><p> </p><p>在这个调试消息结构体中，dwDebugEventCode记录了产生调试中断的消息代码。消息代码的详细说明可以参考MSDN。其中，我们感兴趣的消息代码为： </p><p> </p><p>在得到目标程序的调试消息后，调试程序根据这些消息代码进行不同的处理，最后通知被调试程序继续运行。 </p><p> </p><p>该函数通知被调试程序继续运行。 </p><p>使用例： </p><p> </p><p>上面这些程序就是一个最简单的调试程序了。不过，它基本上没有什么用途。你还没有在目标进程中设置断点，你就不能完成对API函数监视的任务。</p><br><p> </p><p></p><p><strong>对目标进程设置断点：</strong> </p><p>我们的目标是监视API函数的输入输出，那么，首先应该知道DLL模块中提供了哪些API函以及这些API的入口地址。在前面将过，广义的API还包括未导出的内部函数。如果你有DLL模块的调试版本和调试连接文件(pdb文件)，也可以根据调试信息得到内部函数的信息。 </p><p>&middot; 得到函数名及函数入口地址 </p><p>通过程序得到函数的入口地址有很多种方法。对于用VC编译出来的DLL，如果是Debug版本，可以通过ImageHlp库函数得到调试信息，分析出函数的入口地址。如果没有Debug版本，也可以通过分析导出函数表得到函数的入口地址。 </p><p>1．用Imagehlp库函数得到Debug版本的函数名和函数入口地址。 </p><p>可以利用Imagehlp库函数分析Debug信息，关联的函数为 SymInitialize、SymEnumerateSymbols和UnDecorateSymbolName。详细可以参考MSDN中关于这些函数 的说明和用法。不过，用Imagehlp只能分析出用VC编译的程序，对C++Builder编译的程序不能用这种方法分析。 </p><p>2．DLL的导出表得到函数导出函数名和函数的入口地址。 </p><p>在大多数情况下，我们还是希望监视的是Release版本的输入输出参数，毕竟Debug版本不是我们最终提供给用户的产品。Debug和Release的编译条件不同导致产生的结果不同，在很多BBS中都讨论过。所以，我认为跟踪监视Release版本更加有实用价值。 </p><p>通过分析DLL导出表得到导出函数名在MSDN上就有源代码。关于导出表的说明大家可以参考关于PE结构的文章。 </p><p>3．通过OLE函数取得COM接口 </p><p>你也可以通过OLE函数分析DLL提供的接口函数。接口函数不是通过DLL导出表导 出的。你可以通过LoadTypeLib函数来分析COM接口，得到COM记录接口的入口地址，这样，你就可以监视COM接口的调用了。这是API HOOK没法实现的。在这里我不打算分析分析COM接口的方式了。在MSDN上通过搜索LoadTypeLib sample关键词你就可以找到相关的源代码进行修改实现你的目标。 </p><p>这里是通过计算机自动分析目标模块得到DLL导出函数的方案，作为我们监视的目的 而言，这些工作只是为了得到一系列的函数名和函数地址而已。函数名只是一个让我们容易识别函数的名称而已，该函数入口地址才是我们真正关心的目标。换句话 说，如果你能够确保某一个地址一定是一个函数（包括内部函数）的入口地址，你就完全可以给这个函数定义自己的名称，将它加入你的函数管理表中，同样可以实 现监视该函数的输入输出参数的功能。这也是实现Exe内部函数的监视功能的原因。如果你有Exe编译时生成的Map文件(你可以在编译时选择生成Map文 件)，你就可以通过分析Map文件，得到内部函数的入口地址，将内部函数加入到你的函数管理表中。（一个函数的名称对于监视功能来讲究竟是FunA还是 FunB并没有什么意义，但名称是FunA还是FunB的名称对于监视者分析监视结果是有意义的，你完全可以将MessageBox的函数在输出监视结果 是以FunA的名称输出，所以在监视一些内部无名称的函数时，你完全可以定义你自己的名字）。 </p><p>&middot; 在函数入口地址处设置断点 </p><p>设置断点非常简单，只要将0xCC(int 3)写入指定的地址就可以了。这样程序运行到指定地址时，将产生调试中断信息通知调试程序。修改指定进程的内存数据可以通过 WriteProcessMemory函数来完成。由于一般情况下作为程序代码段都被保护起来了，所以还有一个函数也会用到。 VirtualProtectEx。在实际情况下，当调试断点发生时，调试程序还应该将原来的代码写回被调试程序。 </p><p> </p><p>在设置断点时你必须将原来的代码保存起来，这样在恢复断点时就可以将代码还原了。一 般用法为：设置断点m_code = SetBreakPoint( pFunAdd, 0xCC); 恢复断点：SetBreakPoint( pFunAdd, m_code); 记住，每个函数入口地址的代码都可能不同，你应该为每个断点地址保存一个原来的代码，在恢复时就不会发生错误了。 </p><p>好了，现在目标程序中已经设置好了断点，当目标程序调用设置了断点的函数时，将产生一个调试中断信息通知调试程序。我们就要在调试程序中编写我们的调试中断程序了。 </p><p>被调试程序产生中断时，将产生一个EXCEPTION_DEBUG_EVENT信息通知调试程序进行处理。同时将填充EXCEPTION_DEBUG_INFO结构。 </p><p> </p><p>在该结构中，我们比较感兴趣的是产生中断的地址ExceptionAddress和产生中断的信息代码ExceptionCode。在信息代码中与我们任务相关的信息代码为： </p><p> </p><p>断点中断是由于我们在前面设置断点0xCC代码运行时产生的。由于产生中断后，我们 必须将原来的代码写回被调试程序中继续运行。但是，代码一旦被写回目标程序，这样，当目标程序再次调用该函数时将不会产生中断，我们就只能实现一次监视 了。所以，我们必须在将原代码写回被调试程序后，应该让被调试程序已单步的方式运行，再次产生一个单步中断的调试信息。在单步中断处理中，我们再次将 0xCC代码写入函数的入口地址，这样就可以保证再次调用时产生中断。 </p><p>首先，在进行中断处理前我们必须作些准备工作，管理起线程ID和线程句柄。为了管理单步中断处理，我们还必须维护一个基于线程的单步地址的管理，这样就可以允许被调试程序拥有多线程的功能。–我们不能保证单步运行时不被该进程的其他线程所打断。 </p><p> </p><p>下面进行中断处理程序。同样，我们只考虑我们关心的中断信息代码。在发生中断时，我 们通过GetThreadContext(&amp;context)得到中断线程的上下文信息。此时，context.esp就是函数的返回地址， context.esp+4位置的值就是函数的第一个参数，context.esp+8就是第二个参数，依次类推可以得到你想要的任何参数。需要注意的是 因为参数是在被调试进程中的内容，所以你必须通过ReadProcessMemory函数才能得到： </p><p> </p><p>那么buf[0]就是第一个参数，buf[1]就是第二个参数。。。注意，在 FunA(int a, char<em> p, OPENFILENAME</em> pof)函数调用时，buf[0] = a， buf[1] = p这里buf[1]是p的指针而不是p的内容，如果你希望访问p的内容，必须同样通过ReadProcessMemory函数再次取得p的内容。对于结构 体指针也必须如此： </p><p> </p><p>如果结构体中还有指针，要取得该指针的内容，也必须和取得p的内容一样的方式读取被调试程序的内存。总的来说，你必须意识到监视目标程序的所有内容都是对目标进程的内存读取操作，这些指针都是目标进程的内存地址，而不是调试进程的地址。</p><br><p> </p><p></p><p>很明显，当被调试进程在函数入 口产生中断调试信息时，调试程序只能得到函数的输入参数，而不能得到我们希望的输出参数及返回值！为了实现我们的目标，我们必须在函数调用结束时，再次产 生中断，取得函数的输出参数和返回值。在处理函数入口中断时，就必须设置好函数的返回地址的断点。这样，在函数返回时，就可以得到函数的输出参数和返回值 了。关于这里的实现说明请参考附录的源代码。 </p><p>你完全可以参照附录的源代码写出你自己的简单的调试监视程序。当然，有几个问题因 为比较复杂，我没有在这里进行说明。一个就是函数返回断点的处理，比如TRY、CATCH的处理，就必须重新设计好RETURN_FUN_STACK的结 构，考虑一些除错处理还是可以解决这个问题的。另外一个问题就是函数的入口断点和返回断点没有任何关系。这个问题更好解决，只需重新设计 RETURN_FUN，FUN_BREAK_MAP等结构体就可以将它们关联起来。由于我在这里只要是分析如何实现中断调试处理的过程，这些完善程序的工 作就由读者自行跟踪改造了。 </p><p>细心的读者在上面可以发现一个问题，那就是在SetBreakPoint函数中有一个限制， 就是函数的入口地址不能大于0x80000000。确实如此，我们知道0x80000000以上的空间是系统共有的空间，我们一般不能修改这些空间的程 序，否则将影响系统的工作。在NT环境下，所有的DLL都被加载在0x80000000下，修改0x80000000以下空间的代码不会对其它进程产生影 响。所以在NT下可以用上面的方案监视所有的DLL函数。然而，在Win9X下，kernel32.dll，user32.dll，gdi32.dll等 系统DLL都被加载到0x80000000以上的空间，修改这些空间的代码将破坏系统工作。那么，在9X下就不能监视这些DLL模块的函数吗？ </p><p>的确，在Win9X平台下不能利用在函数入口处设置断点的方法实现监视。我们必须 采用另外的方法实现该功能。在前面讨论中知道，通过API HOOK修改模块导入表的方法可以实现将API的入口修改为自己监视程序的入口，也可以实现监视功能。如果采用API HOOK的方法有限制，即必须知道函数原型，对每一个函数都必须编写相应的监视代码，灵活性受到限制。而我们的目标是不管有多少个DLL，不管DLL有多 少个导出函数，在不修改我们的程序前提下都可以实现我们的监视功能。所以，API HOOK是不可以完成我们的目标，但我们可以利用修改导入表的方案实现目标。首先，修改导入表，将函数的调用地址指向我们的监视代码，在监视代码中，我们 无需对函数编程，只是简单调用jmp XXXX就可以了。然后，设置断点时，不是设置在函数的入口点，而是设置在我们的监视代码上。这样，当我们的模块调用系统API函数时，就可以实现监视功 能了。修改原理如图： </p><p>如图所示，假设我们的监视代码在目标进程的的0x20000000空间，我们在分析DLL导 出表的同时，将导出表函数的地址经过计算，在监视代码中设置为jmp xxxx的代码。这样我们在修改EXE模块的导入表时写入的地址为监视代码的地址。当目标程序调用MessageBox函数是，程序将首先跳转到监视代码 中执行jmp指令到user32.dll的MessageBox入口地址中。经过这样处理后，我们希望监视MessageBox函数的调用时，只需在监视 代码的0x20000000处设置断点，就达到了监视的目的。限于篇幅原因，这里不再讨论。 </p><p>你可以很轻松的在此基础上进行扩展你的监视跟踪功能。只需要修改一下记录输入输出函数结果的程序，就得到一个新的功能： </p><p>1．在记录输入输出参数的地方加入取得当前时刻的功能，就实现了监视函数调用性能的功能。（相当于Numega的TrueTime功能）由于采用了Debug技术，得到的时间将包括调试函数导致产生进程的切换时间。等到的时间只是一个参考价值，但对分析性能而言一般足够。 </p><p>2．在记录输入输出参数的地方加入函数调用的计数器，就实现了Numega的TrueCoverage功能。 </p><p>3．监视malloc, free, realloc函数的输入输出值，并进行统计，就实现了简单的内存泄漏检查功能。关键的是你可以通过Map文件得到Release版本的malloc等函数的地址，实现对Release版的跟踪。 </p><p>4．在记录输入参数处理中加入StackWalk函数可以实现call stack功能，分析是由哪个函数调用了自己。在jmp方案中也可以实现这个功能，但是你必须确保StackWalk关联的函数没有调用被你监视的函数。 在Hook API(IAT)的方案中到是不用保证，但得出的调用列表中有可能包含你的监视代码。 </p><p>有一点需要注意的是，我们的目标是监视程序的运行路径，并不是改变参数和修改结果，所以，在jmp和Hook Api（IAT）中可以实现的修改参数和运行路径的做法在这里不能实现。 </p><p><strong>其他：</strong> </p><p>本文附录的代码TestDebug.zip就是实现了一个简单的调试监视器，自动输出监视函数的4个输入参数的地址内容和函数调用返回值。该代码只是表明通过监视函数可以实现对API的跟踪，所以没有实现9X下对系统DLL的监视。 </p><p>DebugApi.zip是一个利用这个方案编写的应用程序DebugApiSpy.exe，它实现了这个方案中的最基本的跟踪监视函数的输入输出参数功能，也实现了9X下对系统DLL的监视支持。该程序支持Win9X/NT/W2K/XP上的运用。 </p><p><strong>源代码下载：</strong><a href="http://developer.ccidnet.com/pub/html/developer/code/download/TestDebug.zip" target="_blank">TestDebug.zip</a>，<a href="http://developer.ccidnet.com/pub/html/developer/code/download/DebugApiSpy.zip" target="_blank">DebugApi.zip</a> </p><p><strong>参考资料：</strong> </p><p>1．《Windows核心编程》, Jeffrey Richter，机械工业出版社 </p><p>2．微软的MSDN </p><p>3．detours 可以在<a href="http://research.microsoft.com/sn/detours/" target="_blank" rel="external">http://research.microsoft.com/sn/detours/</a> 上得到源代码。detours功能在WinNT和W2K下有效，对9X不支持。 <br></p><p><br></p>   
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/16/【zz】用Debug函数实现API函数的跟踪/" class="archive-article-date">
  	<time datetime="2007-09-16T03:24:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-16</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Windows/">Windows</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-比较实用的linux开发网站集-电子书籍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/14/比较实用的linux开发网站集-电子书籍/">比较实用的linux开发网站集 &amp; 电子书籍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 学习OPcode:<br><a target="_blank" href="http://www.luocong.com/learningopcode/index.htm">http://www.luocong.com/learningopcode/index.htm</a><br><br>驱动开发论坛:<br><a target="_blank" href="http://bbs.zndev.com/index.php">http://bbs.zndev.com/index.php</a><br>Sysinternals:<br><a target="_blank" href="http://sysinternals.com/">http://sysinternals.com/</a><br><a target="_blank" href="http://www.osronline.com/">http://www.osronline.com/</a><br><br>驱动开发优秀网站:<br><br><a target="_blank" href="http://tie.163.net/">http://tie.163.net</a><br><a target="_blank" href="http://www.cetinet.com/">http://www.cetinet.com/</a><br><a target="_blank" href="http://jiaomcu.shareyou.net/more.htm">http://jiaomcu.shareyou.net/more.htm</a><br><a target="_blank" href="http://www.lvr.com/usbcode.htm">http://www.lvr.com/usbcode.htm</a><br><a target="_blank" href="http://www.chinadz.com/icver/0038.htm">http://www.chinadz.com/icver/0038.htm</a><br>sdkh.51.net/dz/usb.htm <br><a target="_blank" href="http://www-eu5.semiconductors.philips.com/pip/pdiusbd12.html">http://www-eu5.semiconductors.philips.com/pip/pdiusbd12.html</a><br><a target="_blank" href="http://www.beyondlogic.org/">http://www.beyondlogic.org/</a>  &nbsp;&nbsp;    &nbsp;&nbsp;    &nbsp;&nbsp;    &nbsp;&nbsp;    &nbsp;&nbsp;    &nbsp;&nbsp;    &nbsp;&nbsp;    &nbsp;&nbsp;      <br><a target="_blank" href="http://www.usbdeveloper.com/">http://www.usbdeveloper.com/</a><br><a target="_blank" href="http://www.beyondlogic.org/pardebug/pdebug.htm">http://www.beyondlogic.org/pardebug/pdebug.htm</a><br><br><br>linux相关资源:<br><br>1. 开源/文档/社区/信息资源<br>1.01 <a target="_blank" href="http://www.kernel.org/">http://www.kernel.org</a><br>&nbsp;&nbsp;&nbsp;   Linux内核主页<br><br>1.02 <a target="_blank" href="http://www.gnu.org/">http://www.gnu.org</a> or <a target="_blank" href="http://www.fsf.org/">http://www.fsf.org</a><br>&nbsp;&nbsp;&nbsp;   GNU/FSF主页<br><br>1.03 <a target="_blank" href="http://www.opensource.org/">http://www.opensource.org</a><br>&nbsp;&nbsp;&nbsp;   Open Source权威网站<br><br>1.04 <a target="_blank" href="http://www.osdl.org/">http://www.osdl.org</a><br>&nbsp;&nbsp;&nbsp;   OSDL(Open Source Development Labs, Linus Torvalds的家)主页<br><br>1.05 <a target="_blank" href="http://www.sourceforge.net/">http://www.sourceforge.net</a><br>&nbsp;&nbsp;&nbsp;   大型开放源码软件网站<br><br>1.06 <a target="_blank" href="http://freshmeat.net/">http://freshmeat.net/</a><br>&nbsp;&nbsp;&nbsp;   大型开放源码软件网站<br><br>1.07 <a target="_blank" href="http://osdir.com/">http://osdir.com</a><br>&nbsp;&nbsp;&nbsp;   开放源码目录，提供许多开放源码软件的索引和链接<br><br>1.08 <a target="_blank" href="http://www.rpmfind.net/">http://www.rpmfind.net</a><br>&nbsp;&nbsp;&nbsp;   提供RPM包的搜索和链接<br><br>1.09 <a target="_blank" href="http://oss.sgi.com/projects/">http://oss.sgi.com/projects/</a><br>&nbsp;&nbsp;&nbsp;   SGI的开放源码Linux项目<br><br>1.10 <a target="_blank" href="http://oss.software.ibm.com/linux/">http://oss.software.ibm.com/linux/</a><br>&nbsp;&nbsp;&nbsp;   IBM的开放源码Linux项目<br><br>1.11 <a target="_blank" href="http://www-124.ibm.com/developerworks/oss/">http://www-124.ibm.com/developerworks/oss/</a><br>&nbsp;&nbsp;&nbsp;   IBM developerWorks的开放源码Linux项目<br><br>1.12 <a target="_blank" href="http://www.kerneltrap.org/">http://www.kerneltrap.org</a><br>&nbsp;&nbsp;&nbsp;   内核开发相关信息和论坛<br><br>1.13 <a target="_blank" href="http://kernelnewbies.org/">http://kernelnewbies.org</a><br>&nbsp;&nbsp;&nbsp;   很好的内核学习网站<br><br>1.14 <a target="_blank" href="http://www.kernelhacking.org/">http://www.kernelhacking.org/</a><br>&nbsp;&nbsp;&nbsp;   kernelhacking-HOWTO文档<br><br>1.15 <a target="_blank" href="http://www.tldp.org/">http://www.tldp.org</a><br>&nbsp;&nbsp;&nbsp;   Linux文档<br><br>1.16 <a target="_blank" href="http://www.nongnu.org/lkdp/">http://www.nongnu.org/lkdp/</a><br>&nbsp;&nbsp;&nbsp;   Linux内核文档<br><br>1.17 <a target="_blank" href="http://linux-mm.org/">http://linux-mm.org/</a><br>&nbsp;&nbsp;&nbsp;   Linux内核mm文档<br><br>1.18 <a target="_blank" href="http://www.linuxforum.net/">http://www.linuxforum.net</a><br>&nbsp;&nbsp;&nbsp;   中国Linux论坛<br><br>1.19 <a target="_blank" href="http://www.aka.org.cn/">http://www.aka.org.cn</a><br>&nbsp;&nbsp;&nbsp;   中国信息技术论坛－阿卡（AKA）<br><br>1.20 <a target="_blank" href="http://www.lisoleg.net/">http://www.lisoleg.net</a><br>&nbsp;&nbsp;&nbsp;   利索脚(Linux Source Learning Group)<br><br>1.21 <a target="_blank" href="http://www.linuxfans.org/">http://www.linuxfans.org/</a><br>&nbsp;&nbsp;&nbsp;   中国Linux公社<br><br>1.22 <a target="_blank" href="http://www-900.ibm.com/developerWorks/cn/linux">http://www-900.ibm.com/developerWorks/cn/linux</a><br>&nbsp;&nbsp;&nbsp;   IBM developerWorks Linux专区<br><br>1.23 <a target="_blank" href="http://www.linuxaid.com.cn/">http://www.linuxaid.com.cn</a><br>&nbsp;&nbsp;&nbsp;   LinuxAid技术支持中心<br><br>1.24 <a target="_blank" href="http://lxr.linux.no/source/">http://lxr.linux.no/source/</a><br>&nbsp;&nbsp;&nbsp;   Cross-Referencing Linux，可在线查看Linux内核源代码<br><br>1.25 <a target="_blank" href="http://www.linux.org/">http://www.linux.org</a><br>&nbsp;&nbsp;&nbsp;   Linux信息资源<br><br>1.26 <a target="_blank" href="http://www.linuxdevices.com/">http://www.linuxdevices.com</a><br>&nbsp;&nbsp;&nbsp;   嵌入式Linux信息资源<br><br>1.27 <a target="_blank" href="http://www.linuxjournal.com/webindex.php">http://www.linuxjournal.com/webindex.php</a><br>&nbsp;&nbsp;&nbsp;   Linux Journal杂志在线文章<br><br>1.28 <a target="_blank" href="http://www.joyfire.net/">http://www.joyfire.net/</a><br>&nbsp;&nbsp;&nbsp;   本站joyfire大侠维护的站点<br><br>1.29 <a target="_blank" href="http://lwn.net/">http://lwn.net</a><br>&nbsp;&nbsp;&nbsp;   Linux Weekly News<br><br>1.30 <a target="_blank" href="http://www.ctyme.com/intr/int.htm">http://www.ctyme.com/intr/int.htm</a><br>&nbsp;&nbsp;&nbsp;   关于BIOS系统调用，很全<br>2. 项目资源<br>2.01 <a target="_blank" href="http://perso.wanadoo.es/xose/linux/linux_ports.html">http://perso.wanadoo.es/xose/linux/linux_ports.html</a><br>&nbsp;&nbsp;&nbsp;   Linux移植项目链接资源<br><br>2.02 <a target="_blank" href="http://www.uclinux.org/">http://www.uclinux.org</a><br>&nbsp;&nbsp;&nbsp;   uClinux主页<br><br>2.03 <a target="_blank" href="http://www.fsmlabs.com/">http://www.fsmlabs.com/</a> or <a target="_blank" href="http://www.rtlinux.org/">http://www.rtlinux.org</a><br>&nbsp;&nbsp;&nbsp;   RTLinux(Real-Time Linux)主页<br><br>2.04 <a target="_blank" href="http://mail.aero.polimi.it/%7Ertai/">http://mail.aero.polimi.it/~rtai/</a><br>&nbsp;&nbsp;&nbsp;   RTAI(Real Time Application Interface for Linux)主页<br><br>2.05 <a target="_blank" href="http://www.ittc.ku.edu/kurt/">http://www.ittc.ku.edu/kurt/</a><br>&nbsp;&nbsp;&nbsp;   KURT-Linux(Kansas University Real-Time Linux)主页<br><br>2.06 <a target="_blank" href="http://www.arm.linux.org.uk/">http://www.arm.linux.org.uk/</a><br>&nbsp;&nbsp;&nbsp;   ARM Linux主页<br><br>2.07 <a target="_blank" href="http://www.linux-mips.org/">http://www.linux-mips.org/</a><br>&nbsp;&nbsp;&nbsp;   Linux/MIPS主页<br><br>2.08 <a target="_blank" href="http://penguinppc.org/">http://penguinppc.org/</a><br>&nbsp;&nbsp;&nbsp;   Linux/PowerPC主页<br><br>2.09 <a target="_blank" href="http://www.denx.de/">http://www.denx.de</a><br>&nbsp;&nbsp;&nbsp;   Denx Software Engineering, PowerPC系列嵌入式Linux资源<br><br>2.10 <a target="_blank" href="http://www.netfilter.org/">http://www.netfilter.org/</a> or <a target="_blank" href="http://www.iptables.org/">http://www.iptables.org/</a><br>&nbsp;&nbsp;&nbsp;   netfilter/iptables项目<br><br>2.11 <a target="_blank" href="http://www.linuxfromscratch.org/">http://www.linuxfromscratch.org</a><br>&nbsp;&nbsp;&nbsp;   LFS(Linux From Scratch)项目<br><br>2.12 <a target="_blank" href="http://www.uclibc.org/">http://www.uclibc.org</a><br>&nbsp;&nbsp;&nbsp;   uClibc(C library for developing embedded Linux systems)主页<br><br>2.13 <a target="_blank" href="http://www.linuxvirtualserver.org/">http://www.LinuxVirtualServer.org</a><br>&nbsp;&nbsp;&nbsp;   章文嵩主持的Linux Virtual Server项目<br><br>2.14 <a target="_blank" href="http://linux-ha.org/">http://linux-ha.org</a><br>&nbsp;&nbsp;&nbsp;   High-Availability Linux项目<br><br>2.15 <a target="_blank" href="http://www.lids.org/">http://www.lids.org</a><br>&nbsp;&nbsp;&nbsp;   本站vertex大侠主持的LIDS(Linux Intrusion Detection System)项目<br><br>2.16 <a target="_blank" href="http://www.minigui.org/">http://www.minigui.org/</a><br>&nbsp;&nbsp;&nbsp;   本站Kongming大侠主持的MiniGUI项目<br><br>2.17 <a target="_blank" href="http://user-mode-linux.sourceforge.net/">http://user-mode-linux.sourceforge.net/</a><br>&nbsp;&nbsp;&nbsp;   User-Mode Linux项目<br><br>2.18 <a target="_blank" href="http://lse.sourceforge.net/">http://lse.sourceforge.net/</a><br>&nbsp;&nbsp;&nbsp;   Linux Scalability Effort项目<br><br>2.19 <a target="_blank" href="http://linuxperf.nl.linux.org/">http://linuxperf.nl.linux.org/</a><br>&nbsp;&nbsp;&nbsp;   Linux Performance Tuning项目<br><br>2.20 <a target="_blank" href="http://euclid.nmu.edu/%7Ebenchmark/">http://euclid.nmu.edu/~benchmark/</a><br>&nbsp;&nbsp;&nbsp;   Linux Benchmark项目<br><br><br><br>电子书籍<br>============================================================<br>Shell编程和Unix命令 <br><a href="http://download.chinaitlab.com/soft/11149.htm" target="_blank">http://download.chinaitlab.com/soft/11149.htm</a> <br><br>实践大师：Unix Shell编程篇 <br><a href="http://download.chinaitlab.com/soft/11127.htm" target="_blank">http://download.chinaitlab.com/soft/11127.htm</a> <br><br>Linux与Unix SHELL编程指南读书笔记 <br><a href="http://download.chinaitlab.com/soft/10673.htm" target="_blank">http://download.chinaitlab.com/soft/10673.htm</a> <br><br>Linux Shells by Example <br><a href="http://download.chinaitlab.com/soft/10320.htm" target="_blank">http://download.chinaitlab.com/soft/10320.htm</a> <br><br>Linux and Unix Shell <br><a href="http://download.chinaitlab.com/soft/9764.htm" target="_blank">http://download.chinaitlab.com/soft/9764.htm</a> <br><br>Solaris Shell 编程 <br><a href="http://download.chinaitlab.com/soft/6426.htm" target="_blank">http://download.chinaitlab.com/soft/6426.htm</a> <br><br>SSH：Unix SECURE SHELL工具 <br><a href="http://download.chinaitlab.com/soft/4571.htm" target="_blank">http://download.chinaitlab.com/soft/4571.htm</a> <br><br>Linux系统分析与高级编程技术 <br><a href="http://download.chinaitlab.com/soft/2789.htm" target="_blank">http://download.chinaitlab.com/soft/2789.htm</a> <br><br>Solaris Shell编程 <br><a href="http://download.chinaitlab.com/soft/4449.htm" target="_blank">http://download.chinaitlab.com/soft/4449.htm</a> <br><br>Linux与Unix SHELL编程指南 <br><a href="http://download.chinaitlab.com/soft/2791.htm" target="_blank">http://download.chinaitlab.com/soft/2791.htm</a> <br><br>实践大师：Unix Shell编程篇 <br><a href="http://download.chinaitlab.com/soft/11127.htm" target="_blank">http://download.chinaitlab.com/soft/11127.htm</a> <br><br>Solaris Shell 编程 <br><a href="http://download.chinaitlab.com/soft/6426.htm" target="_blank">http://download.chinaitlab.com/soft/6426.htm</a> <br><br>轻松学用Linux编程 <br><a href="http://download.chinaitlab.com/soft/11048.htm" target="_blank">http://download.chinaitlab.com/soft/11048.htm</a> <br><br>Linux编程白皮书 <br><a href="http://download.chinaitlab.com/soft/1419.htm" target="_blank">http://download.chinaitlab.com/soft/1419.htm</a> <br><br>Linux应用程序开发指南 <br><a href="http://download.chinaitlab.com/soft/1403.htm" target="_blank">http://download.chinaitlab.com/soft/1403.htm</a> <br><br>Linux下设备驱动程序编程 <br><a href="http://download.chinaitlab.com/soft/11364.htm" target="_blank">http://download.chinaitlab.com/soft/11364.htm</a> <br><br>Freebsd 设备驱动编程手册 <br><a href="http://download.chinaitlab.com/soft/10474.htm" target="_blank">http://download.chinaitlab.com/soft/10474.htm</a> <br><br>Unix高级环境编程 <br><a href="http://download.chinaitlab.com/soft/9716.htm" target="_blank">http://download.chinaitlab.com/soft/9716.htm</a> <br><br>Unix平台下C语言高级编程指南 <br><a href="http://download.chinaitlab.com/soft/9244.htm" target="_blank">http://download.chinaitlab.com/soft/9244.htm</a> <br><br>Unix网络编程技术与分析 <br><a href="http://download.chinaitlab.com/soft/6336.htm" target="_blank">http://download.chinaitlab.com/soft/6336.htm</a> <br><br>Unix编程艺术 <br><a href="http://download.chinaitlab.com/soft/8489.htm" target="_blank">http://download.chinaitlab.com/soft/8489.htm</a> <br><br>Linux上的C编程 <br><a href="http://download.chinaitlab.com/soft/9757.htm" target="_blank">http://download.chinaitlab.com/soft/9757.htm</a> <br><br>Linux程序员指南 337k zip <br><a href="http://linuxdoc.51.net/download/linux_program.zip" target="_blank">http://linuxdoc.51.net/download/linux_program.zip</a> <br><br>OReilly Unix超级工具（第三版） <br><a href="http://bbs.itebook.net/attachment.php?aid=621" target="_blank">http://bbs.itebook.net/attachment.php?aid=621</a> <br><a href="http://bbs.itebook.net/attachment.php?aid=622" target="_blank">http://bbs.itebook.net/attachment.php?aid=622</a> <br><br>是王波写的一本专门介绍Freebsd的书籍。 <br><a href="http://www.linuxdby.com/downloadlink.php?id=15" target="_blank">http://www.linuxdby.com/downloadlink.php?id=15</a> <br><br>POSIX threads explained(EN)上载：5/9/2002 <br><a href="http://www.joyfire.net/compress/linuxthreads.zip" target="_blank">http://www.joyfire.net/compress/linuxthreads.zip</a> <br><br>Linux Threads FAQ 在线浏览 上载：11/6/2002 <br><a href="http://www.joyfire.net/compress/Threads-FAQ-html.tar.gz" target="_blank">http://www.joyfire.net/compress/Threads-FAQ-html.tar.gz</a> <br><a href="http://www.joyfire.net/Threads-FAQ/index.html" target="_blank">http://www.joyfire.net/Threads-FAQ/index.html</a> <br><br>Linux系统分析与高级编程技术上载：4/5/2002 <br><a href="http://www.joyfire.net/compress/linux_advanced_technology.zip" target="_blank">http://www.joyfire.net/compress/linux_advanced_technology.zip</a> <br><br>Linux设备驱动程序(CH)(Linux Device Drivers) <br><a href="http://www.joyfire.net/lsdp/index.htm" target="_blank">http://www.joyfire.net/lsdp/index.htm</a> <br><br>The Linux Kernel Module Programming Guide (EN) <br><a href="http://www.joyfire.net/compress/lkmpg.html.tar.gz" target="_blank">http://www.joyfire.net/compress/lkmpg.html.tar.gz</a> <br><a href="http://www.joyfire.net/lkmpg/index.html" target="_blank">http://www.joyfire.net/lkmpg/index.html</a> <br><a href="http://www.joyfire.net/compress/lkmpg_cn.rtf.zip" target="_blank">http://www.joyfire.net/compress/lkmpg_cn.rtf.zip</a> <br><br>Linux内核分析 <br><br>1、netxiong linux内核分析笔记上载：28/7/2003 <br><a href="http://www.joyfire.net/compress/netxiong-linux.zip" target="_blank">http://www.joyfire.net/compress/netxiong-linux.zip</a> <br><br>2、CML2 Language and Tools Description(EN)上载：12/ 7/2003 <br><a href="http://www.joyfire.net/compress/cml2.pdf" target="_blank">http://www.joyfire.net/compress/cml2.pdf</a> <br><br>3、Z8530 Programming Guide(EN)上载：11/ 7/2003 <br><a href="http://www.joyfire.net/compress/z8530book.pdf" target="_blank">http://www.joyfire.net/compress/z8530book.pdf</a> <br><br>4、Synchronous PPP and Cisco HDLC Programming Guide(EN)上载：11/ 7/2003 <br><a href="http://www.joyfire.net/compress/wanbook.pdf" target="_blank">http://www.joyfire.net/compress/wanbook.pdf</a> <br><br>5、Video4Linux Programming(EN)上载：11/ 7/2003 <br><a href="http://www.joyfire.net/compress/videobook.pdf" target="_blank">http://www.joyfire.net/compress/videobook.pdf</a> <br><br>6、The Linux 2.4 Parallel Port Subsystem(EN)上载：11/ 7/2003 <br><a href="http://www.joyfire.net/compress/parportbook.pdf" target="_blank">http://www.joyfire.net/compress/parportbook.pdf</a> <br><br>7、MCA Driver Programming Interface(EN)上载：11/ 7/2003 <br><a href="http://www.joyfire.net/compress/mcabook.pdf" target="_blank">http://www.joyfire.net/compress/mcabook.pdf</a> <br><br>8、The Linux Kernel API(EN)上载：9/ 7/2003 <br><a href="http://www.joyfire.net/compress/kernel-api.pdf" target="_blank">http://www.joyfire.net/compress/kernel-api.pdf</a> <br><br>9、Unreliable Guide To Hacking The Linux Kernel(EN)上载：9/ 7/2003 <br><a href="http://www.joyfire.net/compress/kernel-hacking.pdf" target="_blank">http://www.joyfire.net/compress/kernel-hacking.pdf</a> <br><br>10、Unreliable Guide To Locking(EN)上载：9/ 7/2003 <br><a href="http://www.joyfire.net/compress/kernel-locking.pdf" target="_blank">http://www.joyfire.net/compress/kernel-locking.pdf</a> <br><br>11、OSDesign上载：18/3/2003 <br><a href="http://www.joyfire.net/compress/OSDesign-0.0.6.1.zip" target="_blank">http://www.joyfire.net/compress/OSDesign-0.0.6.1.zip</a> <br><br>12、Linux Kernel 2.4 Internals(EN)上载：18/3/2003 <br><a href="http://www.joyfire.net/compress/lki.html.tar.gz" target="_blank">http://www.joyfire.net/compress/lki.html.tar.gz</a> <br><br>13、Compiling the linux kernel(EN)上载：5/9/2002 <br><a href="http://www.joyfire.net/compress/compile_kernel.pdf" target="_blank">http://www.joyfire.net/compress/compile_kernel.pdf</a> <br><br>14、OSKit项目源代码、论文和文档上载：13/7/2002 <br><a href="http://www.joyfire.net/compress/oskit-20020317.tar.gz" target="_blank">http://www.joyfire.net/compress/oskit-20020317.tar.gz</a> <br><a href="http://www.joyfire.net/compress/oskit-papers.zip" target="_blank">http://www.joyfire.net/compress/oskit-papers.zip</a> <br><a href="http://www.joyfire.net/compress/oskit.html.tar.gz" target="_blank">http://www.joyfire.net/compress/oskit.html.tar.gz</a> <br><br>15、GNU Autotools Guide (EN)上载：13/7/2002 <br><a href="http://www.joyfire.net/compress/autobook-1.3.tar.gz" target="_blank">http://www.joyfire.net/compress/autobook-1.3.tar.gz</a> <br><br>16、Compile linux kernel (EN)上载：12/7/2002 <br><a href="http://www.joyfire.net/compress/compilekernel.zip" target="_blank">http://www.joyfire.net/compress/compilekernel.zip</a> <br><br>17、Intel体系结构参考手册 (EN)和Intel体系结构手册 (EN)上载：16/5/2002 <br><a href="http://www.joyfire.net/compress/Architecture_Reference.pdf" target="_blank">http://www.joyfire.net/compress/Architecture_Reference.pdf</a> <br><a href="http://www.joyfire.net/compress/Architecture.pdf" target="_blank">http://www.joyfire.net/compress/Architecture.pdf</a> <br><br>Linux系统分析与高级编程技术 <br><a href="http://www.joyfire.net/compress/linux_advanced_technology.zip" target="_blank">http://www.joyfire.net/compress/linux_advanced_technology.zip</a> <br><br>Linux设备驱动程序(CH)(Linux Device Drivers) <br><br><a href="http://www.joyfire.net/lsdp/index.htm" target="_blank">http://www.joyfire.net/lsdp/index.htm</a> <br><br>华中理工大学98级研究生linux系统分析报告 <br><a href="http://www.joyfire.net/compress/98_tar.tar.gz" target="_blank">http://www.joyfire.net/compress/98_tar.tar.gz</a> <br><br>华中理工大学96级本科生linux系统分析报告 <br><a href="http://www.joyfire.net/compress/96_tar.tar.gz" target="_blank">http://www.joyfire.net/compress/96_tar.tar.gz</a> <br><br>Linux内核情景分析(上),Linux内核情景分析(下)上载：6/10/2003 <br><a href="http://joyfire.net/compress/linuxqjfx1.pdf" target="_blank">http://joyfire.net/compress/linuxqjfx1.pdf</a> <br><a href="http://joyfire.net/compress/linuxqjfx2.pdf" target="_blank">http://joyfire.net/compress/linuxqjfx2.pdf</a> <br><br><br>Unix优秀电子书籍 <br><br>1、莱昂氏UNIX源代码分析13-Aug-2002 16:13 13M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %eb%b7%d6%ce%f6.zip <br><br>2、实践大师：UNIX awk和sed编程篇13-Aug-2002 16:13 6.7M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %b1%e0%b3%cc%c6%aa. rar <br><br>3、实践大师：unix shell编程篇13-Aug-2002 16:13 7.2M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %e0%b3%cc%c6%aa.rar <br><br>4、HP-UX System and Network Fundermental 13-Aug-2002 16:13 7.4M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %20Fundermental.pdf <br><br>5、LINUX与UNIX Shell编程指南13-Aug-2002 16:12 19M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %cc%d6%b8%c4%cf.zip <br><br>6、UNIX环境高级编程.zip 13-Aug-2002 16:12 18M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %b6%b1%e0%b3%cc.zip <br><br>7、UNIX教程网络篇.zip 13-Aug-2002 16:13 13M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %f8%c2%e7%c6%aa.zip <br><br>8、UNIX系统安全工具.zip 13-Aug-2002 16:13 6.6M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %ab%b9%a4%be%df.zip <br><br>9、hp-ux系统和网络管理.rar 13-Aug-2002 16:13 4.2M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %e7%b9%dc%c0%ed.rar <br><br>10、scounix系统管理员宝典13-Aug-2002 16:12 21M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … %b1%b1%a6%b5%e4.rar <br><br>11、shell编程和unix命令.rar 13-Aug-2002 16:12 17M <br><a href="http://cpss.zz.ha.cn/study/unix/" target="_blank">http://cpss.zz.ha.cn/study/unix/</a> … nix%c3%fc%c1%ee.rar </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/14/比较实用的linux开发网站集-电子书籍/" class="archive-article-date">
  	<time datetime="2007-09-14T08:58:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-14</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Linux-App/">Linux App</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-Thread-Local-Storage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/09/03/Thread-Local-Storage/">Thread Local Storage</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> [zz]from msdn<a name="base.thread_local_storage"></a>Thread Local Storage</p><p>All threads of a process share its virtual address space. The local variables of a function are unique to each thread that runs the function. However, the static and global variables are shared by all threads in the process. With <em>thread local storage</em> (TLS), you can provide unique data for each thread that the process can access using a global index. One thread allocates the index, which can be used by the other threads to retrieve the unique data associated with the index.</p><p> </p><p>The constant TLS_MINIMUM_AVAILABLE defines the minimum number of TLS indexes available in each process. This minimum is guaranteed to be at least 64 for all systems. The limits are as follows:</p>                        System            Limit                            Windows XP and Windows 2000            1088 indexes per process                            Windows 98/Me            80 indexes per process                            Windows NT and Windows 95            64 indexes per process            <br><p>When the threads are created, the system allocates an array of <strong>LPVOID</strong> values for TLS, which are initialized to NULL. Before an index can be used, it must be allocated by one of the threads. Each thread stores its data for a TLS index in a <em>TLS slot</em> in the array. If the data associated with an index will fit in an <strong>LPVOID</strong> value, you can store the data directly in the TLS slot. However, if you are using a large number of indexes in this way, it is better to allocate separate storage, consolidate the data, and minimize the number of TLS slots in use.</p><p>The following diagram illustrates how TLS works.</p><p></p><p>The process has two threads, Thread 1 and Thread 2. It allocates two indexes for use with TLS, gdwTlsIndex1 and gdwTlsIndex2. Each thread allocates two memory blocks (one for each index) in which to store the data, and stores the pointers to these memory blocks in the corresponding TLS slots. To access the data associated with an index, the thread retrieves the pointer to the memory block from the TLS slot and stores it in the lpvData local variable.</p><p>It is ideal to use TLS in a dynamic-link library (DLL). Use the following steps to implement TLS in a DLL:</p><ol><li>Declare a global variable to contain the TLS index. For example: static DWORD gdwTlsIndex;</li> <li>Use the  function during initialization to allocate the TLS index. For example, include the following call in the  function during DLL_PROCESS_ATTACH: gdwTlsIndex = TlsAlloc();</li> <li>For each thread using the TLS index, allocate memory for the data, then use the  function to store the address of the memory block in the TLS slot associated with the index. For example, include the following code in your <strong>DllMain</strong> during DLL_THREAD_ATTACH: LPVOID lpvBuffer;lpvBuffer = (LPVOID) LocalAlloc(LPTR, 256);TlsSetValue(gdwTlsIndex, lpvBuffer);</li> <li>When a function requires access to the data associated with a TLS index, specify the index in a call to the  function. This retrieves the contents of the TLS slot for the calling thread, which in this case is a pointer to the memory block for the data. For example, include the following code in any of the functions in your DLL: LPVOID lpvData;lpvData = TlsGetValue(gdwTlsIndex);</li> <li>When each thread no longer needs to use a TLS index, it must free the memory whose pointer is stored in the TLS slot. When all threads have finished using a TLS index, use the  function to free the index. For example, use the following code in your <strong>DllMain</strong> during DLL_THREAD_DETACH: lpvBuffer = TlsGetValue(gdwTlsIndex);LocalFree((HLOCAL) lpvBuffer);    <p>and the following code during DLL_PROCESS_DETACH:</p>    TlsFree(gdwTlsIndex);</li></ol> <p>For examples illustrating the use of thread local storage, see  and .</p> <p></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/09/03/Thread-Local-Storage/" class="archive-article-date">
  	<time datetime="2007-09-03T13:40:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-09-03</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Windows/">Windows</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-PE文件格式相关工具-objdump-bind" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2007/07/21/PE文件格式相关工具-objdump-bind/">PE文件格式相关工具: objdump,bind</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> cygwin 环境下 ：<br>objdump pe_dump.exe -x   :  Display the contents of all headers<br>objdump pe_dump.exe -s -j .idata   :  Display the full contents of &quot;.idata&quot; section<br>objdump pe_dump.exe -s -j .idata   –start-address=0x431200 –stop-address=0x431800  :  Display the full contents of &quot;.idata&quot; section in address [0x431200, 0x431800)<br>objdump pe_dump.exe -d -j .text   :  disassemble the contents of &quot;.text&quot; section<br>objdump pe_dump.exe -d -j .text   –start-address=0x4187b0  :  disassemble the contents of &quot;.text&quot; section starting from address 0x4187b0<br><br><br>bind -p C:WINDOWSsystem32 -o -u QtCore4.dll &nbsp;&nbsp;   (old style binding)<br>bind -p C:WINDOWSsystem32  -u QtCore4.dll &nbsp;&nbsp;   (new style binding)<br><br><br> </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2007/07/21/PE文件格式相关工具-objdump-bind/" class="archive-article-date">
  	<time datetime="2007-07-21T06:12:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2007-07-21</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Windows/">Windows</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/47/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><a class="page-number" href="/page/47/">47</a><span class="page-number current">48</span><a class="page-number" href="/page/49/">49</a><a class="page-number" href="/page/50/">50</a><span class="space">&hellip;</span><a class="page-number" href="/page/60/">60</a><a class="extend next" rel="next" href="/page/49/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 jfo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">87</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Arduino-OpenWrt/">Arduino/OpenWrt</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DefaultCategory/">DefaultCategory</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-Computing/">Distributed Computing</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/">Google</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">67</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-App/">Linux App</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Debug/">Linux Debug</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Virtualization/">Linux Virtualization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac-OS-X/">Mac OS X</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Saying/">Saying</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebDev/">WebDev</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-template-gp-boost/">c++/c++ template/gp/boost</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-algorithm/">c/c++/algorithm</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x-模拟器/">cocos2d-x/模拟器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/com组件/">com组件</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gcc-binutils-make-共享库/">gcc/binutils/make/共享库</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js-html-python/">js/html/python</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/l4ka-pistachio-iguana/">l4ka::pistachio/iguana</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-图形/">linux 图形</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python-js-php-html-mysql-http/">python/js/php/html/mysql/http</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/self-collect/">self_collect</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unifiedkernel-wine-reactos/">unifiedkernel/wine/reactos</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/教育/">教育</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学-物理/">数学/物理</a><span class="category-list-count">3</span></li></ul>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://iguangba.pickbox.me/">爱逛吧</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.pickbox.me/">收藏夹</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://note.pickbox.me/">网络剪贴板</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">jfojfo#gmail.com</div>
  	  	
    	</section>
    
  </div>
  
</div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>