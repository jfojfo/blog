<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>File Locks | jfo planet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="http://www.gnu.org/software/libtool/manual/libc/File-Locks.htmlFile LocksThe remaining fcntl commands are used to support record locking, which permits multiple cooperating programs to prevent each o">
<meta property="og:type" content="article">
<meta property="og:title" content="File Locks">
<meta property="og:url" content="http://blog.pickbox.me/2008/10/04/File-Locks/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="http://www.gnu.org/software/libtool/manual/libc/File-Locks.htmlFile LocksThe remaining fcntl commands are used to support record locking, which permits multiple cooperating programs to prevent each o">
<meta property="og:updated_time" content="2016-10-15T04:38:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="File Locks">
<meta name="twitter:description" content="http://www.gnu.org/software/libtool/manual/libc/File-Locks.htmlFile LocksThe remaining fcntl commands are used to support record locking, which permits multiple cooperating programs to prevent each o">
  
    <link rel="alternative" href="/atom.xml" title="jfo planet" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.ico">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">jfo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">分类</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">jfo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">jfo</h1>
			</hgroup>
			
			<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-File-Locks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      File Locks
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> <br><a target="_blank" href="http://www.gnu.org/software/libtool/manual/libc/File-Locks.html">http://www.gnu.org/software/libtool/manual/libc/File-Locks.html</a><br>File Locks</p><p><a name="index-file-locks-1363"></a><a name="index-record-locking-1364"></a>The remaining <code>fcntl</code> commands are used to support <dfn>record locking</dfn>, which permits multiple cooperating programs to prevent each other from simultaneously accessing parts of a file in error-prone ways.</p><p><a name="index-exclusive-lock-1365"></a><a name="index-write-lock-1366"></a>An <dfn>exclusive</dfn> or <dfn>write</dfn> lock gives a process exclusive access for writing to the specified part of the file.  While a write lock is in place, no other process can lock that part of the file.</p><p><a name="index-shared-lock-1367"></a><a name="index-read-lock-1368"></a>A <dfn>shared</dfn> or <dfn>read</dfn> lock prohibits any other process from requesting a write lock on the specified part of the file.  However, other processes can request read locks.</p><p>The <code>read</code> and <code>write</code> functions do not actually check to see whether there are any locks in place.  If you want to implement a locking protocol for a file shared by multiple processes, your application must do explicit <code>fcntl</code> calls to request and clear locks at the appropriate points. (the <em>struct file</em> does not contain the <em>struct flock</em>)</p><p>Locks are associated with processes.  A process can only have one kind of lock set for each byte of a given file.  When any file descriptor for that file is closed by the process, all of the locks that process holds on that file are released, even if the locks were made using other descriptors that remain open.  Likewise, locks are released when a process exits, and are not inherited by child processes created using <code>fork</code> (see <a href="http://www.gnu.org/software/libtool/manual/libc/Creating-a-Process.html#Creating-a-Process" target="_blank" rel="external">Creating a Process</a>).</p><p> </p>（只要有一个fd close掉了，尽管还有其他引用同一个file struct的fd处于open，所有的锁全部释放！！！）<br><br>F_SETLK、F_SETLKW(wait if cannot accquired)<br>F_GETLK：<br>On input to this call, lock describes a lock we would like to place&#160; on&#160; the<br>file.&#160;&#160; If the lock could be placed, fcntl() does not actually place it, but<br>returns F_UNLCK in the l_type field of lock and leaves the other&#160; fields&#160; of<br>the&#160; structure&#160; unchanged.&#160;&#160; If one or more incompatible locks would prevent<br>this lock being placed, then fcntl() returns&#160; details&#160; about&#160; one&#160; of&#160; these<br>locks&#160; in&#160; the&#160; l_type, l_whence, l_start, and l_len fields of lock and sets<br>l_pid to be the PID of the process holding that lock.<br><br>F_UNLCK(unlock)<br><br><br>As well as being removed by an explicit F_UNLCK,&#160; record&#160; locks&#160; are&#160; automatically<br>released&#160; when the process terminates or if it closes <strong><u><em>any</em></u> </strong>file descriptor referring<br>to a file on which locks are held.&#160; This is bad: it means that a process&#160; can&#160; lose<br>the&#160; locks&#160; on&#160; a file like /etc/passwd or /etc/mtab when for some reason a library<br>function decides to open, read and close it.<br><br>Record locks are not inherited by a child created via fork(2),&#160; but&#160; are&#160; preserved<br>across an execve(2).<br><br>Because of the buffering performed by the stdio(3) library, the use of record lock‐<br>ing with routines in that package should&#160; be&#160; avoided;&#160; use&#160; read(2)&#160; and&#160; write(2)<br>instead.<br><br><br><br><p>As an example of a situation where file locking is useful, consider a program that can be run simultaneously by several different users, that logs status information to a common file.  One example of such a program might be a game that uses a file to keep track of high scores.  Another example might be a program that records usage or accounting information for billing purposes.</p><p>Having multiple copies of the program simultaneously writing to the file could cause the contents of the file to become mixed up.  But you can prevent this kind of problem by setting a write lock on the file before actually writing to the file.</p><p>If the program also needs to read the file and wants to make sure that the contents of the file are in a consistent state, then it can also use a read lock.  While the read lock is set, no other process can lock that part of the file for writing.  </p><p>Remember that file locks are only a <em>voluntary</em> protocol for controlling access to a file.  There is still potential for access to the file by programs that don’t use the lock protocol. (ie, you can still read/write anything you like from/to this file using an editor like vim, it’s up to you to control access using the flock protocol !!!)</p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p><br><br>example code<br><br>// flock.c<br>// gcc -o flock flock.c<br><br>#include &lt;sys/types.h&gt;<br>#include &lt;sys/stat.h&gt;<br>#include &lt;fcntl.h&gt;<br>#include &lt;unistd.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br><br>int main()<br>{<br>char buf[] = &quot;123456789012345678901234567890&quot;;<br>char buf2[] = &quot;abcdefghijklmnopqrstuvwxyz&quot;;<br>int fd, fd2;<br>struct flock lock;<br><br>lock.l_type = F_WRLCK;<br>lock.l_whence = SEEK_SET;<br>lock.l_start = 2;<br>lock.l_len = 8;<br><br>fd = open(&quot;/tmp/lock&quot;, O_CREAT|O_TRUNC|O_RDWR, S_IRUSR|S_IWUSR);<br>if(fd == -1)<br>&#160;&#160;&#160;  fprintf(stderr, &quot;fail to open filen&quot;);<br>if(-1 == fcntl(fd, F_SETLK, &amp;lock))<br>&#160;&#160;&#160;  fprintf(stderr, &quot;fail to fcntl filen&quot;);<br>if(-1 == write(fd, buf, sizeof(buf)-1))<br>&#160;&#160;&#160; fprintf(stderr, &quot;fail to write filen&quot;);<br><br>fd2 = dup(fd);<br> lock.l_type = F_WRLCK;<br>lock.l_whence = SEEK_SET;<br>lock.l_start = 1;<br>lock.l_len = 5;<br>if(-1 == fcntl(fd2, F_SETLK, &amp;lock))     // no error, fcntl success after dup<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;   fprintf(stderr, &quot;fail to fcntl file dupn&quot;);<br>printf(&quot;Okn&quot;);<br><br>getchar(); // now run <code>flock2&#39;&lt;br /&gt;// 标记(1)&lt;br /&gt; close(fd2); // now all locks are released !!!&amp;#160; 如果这里没有close(fd2)，后面的fcntl依然可以成功，可见file lock是针对进程互斥的&lt;br /&gt;getchar(); // now run</code>flock2’ again<br><br> fd2 = open(&quot;/tmp/lock&quot;, O_RDWR);<br>if(fd2 == -1)<br>&#160;&#160;&#160; fprintf(stderr, &quot;fail to open file 2n&quot;);<br>lock.l_type = F_WRLCK;<br>lock.l_whence = SEEK_SET;<br>lock.l_start = 4;<br>lock.l_len = 8;<br>if(-1 == fcntl(fd2, F_SETLK, &amp;lock))&#160;&#160;&#160;&#160;  // no error!!! fcntl success after open the same file the second time<br>&#160;&#160;&#160;&#160;&#160;&#160;&#160;   fprintf(stderr, &quot;fail to fcntl file 2n&quot;);<br>&#160;&#160;&#160;   if(-1 == write(fd2, buf2, sizeof(buf2)-1))<br>&#160;&#160;&#160; &#160;&#160;&#160; fprintf(stderr, &quot;fail to write file 2n&quot;);<br><br>// &#160;&#160;   sleep(1000);<br>getchar();&#160; // now run flock2 again<br>close(fd);<br>close(fd2);<br>}<br><br>// flock2.c<br>// gcc -o flock2 flock2.c<br><br>#include &lt;unistd.h&gt;<br>#include &lt;fcntl.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br><br>int main()<br>{<br>int fd;<br>struct flock lock;<br>memset(&amp;lock, 0, sizeof(lock));<br>lock.l_type = F_WRLCK;<br>lock.l_whence = SEEK_SET;<br>lock.l_start = 2;<br>lock.l_len = 8;<br><br>fd = open(&quot;/tmp/lock&quot;, O_RDWR);<br>if(fd == -1)<br>printf(&quot;fail to openn&quot;);<br>if(-1 == fcntl(fd, F_GETLK, &amp;lock))<br>printf(&quot;fail to fcntln&quot;);<br>printf(&quot;pid : %dn&quot;, lock.l_pid);<br>printf(&quot;l_start:%d, l_len:%dn&quot;, lock.l_start, lock.l_len);<br>}<br><br><br>Output:<br>jfo@lab:~/test$ ./flock2<br>pid : 1921<br>l_start:1, l_len:9<br><br>// now <code>flock&#39; enter&lt;br /&gt;jfo@lab:~/test$ ./flock2&lt;br /&gt;pid : 0&lt;br /&gt;l_start:2, l_len:8&lt;br /&gt;&lt;br /&gt;// now</code>flock’ enter again<br> jfo@lab:~/test$ ./flock2<br>pid : 1921<br>l_start:4, l_len:8<br><br>// now `flock’ enter again and will exit<br> jfo@lab:~/test$ ./flock2<br>pid : 0<br>l_start:2, l_len:8<br><br> <br><br>前面提到，在标记(1)处如果没有close(fd2);则最后一次enter之前的输出如下：Output:<br>jfo@lab:~/test$ ./flock2<br>pid : 16530<br>l_start:1, l_len:11<br><br> 说明lock合并了。<br><br><br><br><br><del>end</del> <p></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2008/10/04/File-Locks/" class="archive-article-date">
  	<time datetime="2008-10-03T17:16:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2008-10-04</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Linux/">Linux</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2008/10/04/Linux-socket-programming-PF-UNIX-PF-LOCAL/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          Linux socket programming - PF_UNIX/PF_LOCAL
        
      </div>
    </a>
  
  
    <a href="/2008/10/03/【zz】工作量大不過勞的六個方法/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">【zz】工作量大不過勞的六個方法</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 jfo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">87</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Arduino-OpenWrt/">Arduino/OpenWrt</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DefaultCategory/">DefaultCategory</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-Computing/">Distributed Computing</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/">Google</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">67</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-App/">Linux App</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Debug/">Linux Debug</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Virtualization/">Linux Virtualization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac-OS-X/">Mac OS X</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Saying/">Saying</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebDev/">WebDev</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-template-gp-boost/">c++/c++ template/gp/boost</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-algorithm/">c/c++/algorithm</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x-模拟器/">cocos2d-x/模拟器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/com组件/">com组件</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gcc-binutils-make-共享库/">gcc/binutils/make/共享库</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js-html-python/">js/html/python</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/l4ka-pistachio-iguana/">l4ka::pistachio/iguana</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-图形/">linux 图形</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python-js-php-html-mysql-http/">python/js/php/html/mysql/http</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/self-collect/">self_collect</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unifiedkernel-wine-reactos/">unifiedkernel/wine/reactos</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/教育/">教育</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学-物理/">数学/物理</a><span class="category-list-count">3</span></li></ul>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://iguangba.pickbox.me/">爱逛吧</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.pickbox.me/">收藏夹</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://note.pickbox.me/">网络剪贴板</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">jfojfo#gmail.com</div>
  	  	
    	</section>
    
  </div>
  
</div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>