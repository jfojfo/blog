<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jfo, blog" />





  <link rel="alternate" href="/atom.xml" title="jfo planet" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="pptpclient-how-to http://pptpclient.sourceforge.net/howto-ubuntu.phtmlvpn-routing http://pptpclient.sourceforge.net/routing.phtml#client-to-server~~ my config a. vi /etc/ppp/chap-secrets#client serve">
<meta property="og:type" content="article">
<meta property="og:title" content="PPTP Client">
<meta property="og:url" content="http://blog.pickbox.cc/2008/09/01/PPTP-Client/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="pptpclient-how-to http://pptpclient.sourceforge.net/howto-ubuntu.phtmlvpn-routing http://pptpclient.sourceforge.net/routing.phtml#client-to-server~~ my config a. vi /etc/ppp/chap-secrets#client serve">
<meta property="og:image" content="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-1.png">
<meta property="og:image" content="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-4-encryption.png">
<meta property="og:image" content="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-5-misc.png">
<meta property="og:image" content="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-2a-client-to-lan.png">
<meta property="og:updated_time" content="2017-06-07T05:03:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PPTP Client">
<meta name="twitter:description" content="pptpclient-how-to http://pptpclient.sourceforge.net/howto-ubuntu.phtmlvpn-routing http://pptpclient.sourceforge.net/routing.phtml#client-to-server~~ my config a. vi /etc/ppp/chap-secrets#client serve">
<meta name="twitter:image" content="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://blog.pickbox.cc/2008/09/01/PPTP-Client/"/>


  <title> PPTP Client | jfo planet </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jfo planet</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Hope is the best gift that tomorrow gives.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                PPTP Client
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2008-09-01T17:18:00+08:00" content="2008-09-01">
              2008-09-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Network/" itemprop="url" rel="index">
                    <span itemprop="name">Network</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> <br>pptpclient-how-to <a target="_blank" href="http://pptpclient.sourceforge.net/howto-ubuntu.phtml">http://pptpclient.sourceforge.net/howto-ubuntu.phtml</a><br>vpn-routing <a href="http://pptpclient.sourceforge.net/routing.phtml#client-to-server" target="_blank">http://pptpclient.sourceforge.net/routing.phtml#client-to-server</a><br><br><br>~~ my config <del><br><br><strong>a. vi /etc/ppp/chap-secrets</strong><br>#client server Password IP Address <br>#域名\用户名 服务器名 密码<br>vance&nbsp;&nbsp;&nbsp;      &quot;pptpd.vance&quot;&nbsp;&nbsp;&nbsp;      123456&nbsp;&nbsp;&nbsp;      *<br><br><strong>b. vi /etc/ppp/options.pptp</strong><br>lock<br>noauth<br>refuse-eap<br>refuse-chap<br>refuse-mschap<br>nobsdcomp<br>nodeflate<br>#require-mppe-128<strong>c. vi /etc/ppp/peers/vpn.lab113</strong><br># 10.214.9.113&mdash;&mdash;VPN服务器地址<br>pty &quot;pptp 10.214.9.113 –nolaunchpppd&quot;<br>#linkname: Sets the logical name of the link. Pppd will create a <br># file named ppp-pptpd.vance.lab113 in /var/run containing its PID<br>linkname pptpd.vance.lab113<br>name vance&nbsp;&nbsp;        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      # 与<strong>chap-secrets</strong>中的client相对应<br>remotename pptpd.vance&nbsp;&nbsp;&nbsp;      # 与<strong>chap-secrets</strong>中的server相对应<br>file /etc/ppp/options.pptp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      #  配置文件所在位置<br>usepeerdns<br>defaultroute&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      # 将peer设置为默认网关<br>replacedefaultroute&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      # 并且替换原来的默认网关<br>#ipparam lab113<br><br><strong>d. 拨号<br></strong>pppd call vpn.lab113 <br>或<br>pon vpn.lab113<br>poff vpn.lab113&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      # 断开<br>debug模式：<br>pppd call vpn.lab113 logfd 2 nodetach&amp;<br>或<br>pon vpn.lab113 debug dump logfd 2 nodetach<br><br>updetach选项<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     With this option, pppd will detach from its controlling terminal<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     once it has successfully established the ppp connection (to  the<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     point  where  the first network control protocol, usually the IP<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     control protocol, has come up). <br><strong><br><br><br></strong><strong> </strong></del> end my config <del><br><br><br><br><hr><br><strong>PPTP Client</strong><br><br> <strong>Ubuntu HOWTO</strong><p> </p>by James Cameron<br>29th November 2007<p><strong>Community Ubuntu Documentation</strong></p><p>Ubuntu have formed a community that documents most common tasks.  As at 2007-11, the documentation for using PPTP on Ubuntu can be found at: <a href="https://help.ubuntu.com/community/VPNClient" target="_blank" rel="external"> https://help.ubuntu.com/community/VPNClient</a></p><p> </p><hr><strong>Ubuntu Gutsy 7.10</strong> <ul> <li>install the <em>network-manager-pptp</em> package, using the Add/Remove, Synaptic package manager, or <em>apt-get</em>,</li> <li>click network icon, choose <em>VPN Connections</em> then <em>Configure VPN</em>, then add a VPN with the wizard,</li> <li>click network icon, then <em>VPN Connections</em> then the VPN you created.</li> </ul>    If you have a problem after doing this, watch the logs to see if it worked:    <p> </p> <p>To increase logging, add <em>debug dump</em> to the <tt>/etc/ppp/options</tt> and try again.</p> <p>Reference: tests by James Cameron on 29th November 2007, during diagnosis of a mailing list thread.</p> <p> </p> <hr> <strong>Ubuntu Feisty</strong> <p> </p> <ul> <li>install the <em>network-manager-pptp</em> package, and if it was not already installed, restart the network manager applet and Network Manager:        <ul> <li>right-click the network icon on your system tray and choose <em>Remove</em>,</li> <li>Alt/F2, run <em>nm-applet</em>, and the network icon will return,</li> <li>restart Network Manager:            <p> </p> </li> </ul> </li> <li>left-click network icon, choose <em>VPNS</em> then <em>configure</em>, then add a VPN with the wizard,</li> <li>left-click network icon, then <em>VPNS</em> then the VPN you created,</li> <li>watch the logs to see if it worked:        <p> </p> </li> </ul>        Reference: <a href="http://shiny.thorne.id.au/2007/01/pptp-from-ubuntu.html" target="_blank" rel="external">PPTP From Ubuntu</a>, by Stephen Thorne.  <hr>        Below are instructions for installing PPTP Client on Ubuntu Linux, last tested with the 5.10 Breezy version on i386, but also is said to work for 6.06 on i386.  The Ubuntu kernel has MPPE already.        <p>Contents: </p> <ul> <li><a href="http://pptpclient.sourceforge.net/howto-ubuntu.phtml#install" target="_blank" rel="external">installing the client program</a></li> <li><a href="http://pptpclient.sourceforge.net/howto-ubuntu.phtml#install_gui" target="_blank" rel="external">installing the configuration program</a></li> <li><a href="http://pptpclient.sourceforge.net/howto-ubuntu.phtml#configure_gui" target="_blank" rel="external">configuring a tunnel using the configuration program</a></li> <li><a href="http://pptpclient.sourceforge.net/howto-ubuntu.phtml#configure_by_hand" target="_blank" rel="external">configuring a tunnel by hand</a></li> </ul> <a name="sources"><hr> </a> <strong>Configure Ubuntu to use Universe</strong> <p>Add the universe repository to your sources list.  See <a href="http://ubuntuforums.org/showthread.php?p=1740779" target="_blank" rel="external">this thread</a> for references.</p> <p><a name="install"><hr> </a> <strong>Installing the Client Program</strong></p> <p>Install PPTP Client from the Ubuntu Project:</p> <p> </p> <p><a name="install_gui"><hr> </a> <strong>Installing the Configuration Program</strong></p> <p>Note: you may wish to skip the configuration program and <a href="http://pptpclient.sourceforge.net/howto-ubuntu.phtml#configure_by_hand" target="_blank" rel="external">configure the client by hand</a>.  </p> <ol> <li>add the following lines to the sources list file, <tt>/etc/apt/sources.list</tt> :                <p> </p> <p>Note: can use a text editor, or simply <em>cat</em> the lines on to the end of the file using <em>&gt;&gt;</em>, but if you make a mistake in formatting you will likely be told by the <em>apt-get update</em> step.</p> <p> </p> </li> <li>update the list of packages:                <p> </p> <p> </p> </li> <li>install the PPTP Client GUI:                <p> </p> <p>Note: you may be told that the packages could not be authenticated. For the moment, tell your system to install them anyway.  We’ll take patches to our release process if anyone can explain simply how to provide authentication.</p> <p> </p> </li> </ol> <a name="configure_gui"><hr> </a> <strong>Configuration</strong> <p> </p> <ol> <li>obtain from your PPTP Server administrator:                    <p> </p> <ul> <li>the IP address or host name of the server,</li> <li>the authentication domain name, (e.g. WORKGROUP),</li> <li>the username you are to use,</li> <li>the password you are to use,</li> <li>whether encryption is required.</li> </ul> <p> </p> </li> <li>run <em>pptpconfig</em> <a href="http://pptpclient.sourceforge.net/howto-diagnosis.phtml#x_display" target="_blank" rel="external">as root</a>, and a window should appear,                    <p><img height="213" width="309" src="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-1.png"></p> <p> </p> </li> <li>enter the server, domain, username and password into the <em>Server</em> tab,                    <p> </p> </li> <li>if you decided in Installation step 1 above that you would need MPPE, and if your administrator says encryption is required, then on the <em>Encryption</em> tab, click on <em>Require Microsoft Point-to-Point Encryption (MPPE)</em>,                    <p><img height="85" width="303" src="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-4-encryption.png"></p> <p> </p> </li> <li>click on <em>Add</em>, and the tunnel will appear in the list,                    <p> </p> </li> <li>click on the tunnel to select it, click on <em>Start</em>, and a window will appear with the tunnel connection log and status,                    <p> </p> </li> <li>if the connection fails, you will need to gather more information, so on the <em>Miscellaneous</em> tab, click on <em>Enable connection debugging facilities</em>, click <em>Update</em>, try <em>Start</em> again, then look at the <a href="http://pptpclient.sourceforge.net/howto-diagnosis.phtml" target="_blank" rel="external">Diagnosis HOWTO</a> for whatever error is displayed.                    <p><img height="85" width="303" src="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-5-misc.png"></p> <p> </p> </li> <li>if the connection succeeded, you can try the <em>Ping</em> test button.  If the ping fails, you should try to find out why before proceeding.  If the ping works, then the tunnel is active and you may now work on routing.                    <p> </p> </li> <li>decide whether all your network traffic should go via the tunnel or not.  If so, <em>Stop</em> the tunnel, select it again, then on the <em>Routing</em> tab, click on <em>All to Tunnel</em>, then click <em>Update</em> and try <em>Start</em> again.  Now try to access the network behind the server.                    <p> </p> </li> <li>on the other hand, if only some of your network traffic should go via the tunnel, you will need to obtain from the server administrator or folk lore a series of network routes to enter.  <em>Stop</em> the tunnel, select it again, then click on either <em>Client to LAN</em> or <em>LAN to LAN</em> on the <em>Routing</em> tab, use the <em>Edit Network Routes</em> button to enter the routes one by one, and then try <em>Start</em> again.  Now try to access the network behind the server.                    <p><img height="150" width="256" src="http://img.pickbox.cc/wp-content/uploads/pic/other_site/pptpclient_sourceforge_ss-2a-client-to-lan.png"></p> <p>For further help with Routing, read our <a href="http://pptpclient.sourceforge.net/routing.phtml" target="_blank" rel="external">Routing HOWTO</a>.</p> <p> </p> </li> </ol> <hr> <strong>Diagnosing Problems</strong> <p>If you have problems with the tunnel and need to ask for help, start  <tt>pppd</tt> with complete logging:</p> <p> </p> <p>where <em>tunnelname</em> is the name of the tunnel you created in the configuration program.  For more detail, see <a href="http://pptpclient.sourceforge.net/howto-diagnosis.phtml#debug" target="_blank" rel="external">enabling debug logging</a>.</p> <p>This will give you a file <tt>pptp.log</tt> that you can use to search for known solutions in the <a href="http://pptpclient.sourceforge.net/howto-diagnosis.phtml" target="_blank" rel="external">Diagnosis HOWTO</a> or attach to an e-mail to the <a href="http://pptpclient.sourceforge.net/contact.phtml" target="_blank" rel="external">mailing list</a>.</p> <p><a name="configure_by_hand"><hr> </a> <strong>Configuration, by hand</strong></p> <p> </p> <li>obtain from your PPTP Server administrator:                    <p> </p> <ul> <li>the IP address or host name of the server ($SERVER),</li> <li>the name you wish to use to refer to the tunnel ($TUNNEL),</li> <li>the authentication domain name ($DOMAIN),</li> <li>the username you are to use ($USERNAME),</li> <li>the password you are to use ($PASSWORD),</li> <li>whether encryption is required.</li> </ul> <p>In the steps below, substitute these values manually.  For example, where we write $PASSWORD we expect you to replace this with your password.</p> <p> </p> </li> <li>create or edit the <tt>/etc/ppp/options.pptp</tt> file, which sets options common to all tunnels:                    <p> </p> <p> </p> </li> <li>create or add lines to the <tt>/etc/ppp/chap-secrets</tt> file, which holds usernames and passwords:                    <p> </p> <p>Note: if you are using a PPTP Server that does not require an authentication domain name, omit the slashes as well as the domain name.</p> <p>Note: if the passwords contain any special characters, quote them. See <tt>man pppd</tt> for more details.</p> <p> </p> </li> <li>create a <tt>/etc/ppp/peers/$TUNNEL</tt> file:                    <p> </p> <p>Note: if you do not need MPPE support, then remove the <em>require-mppe-128</em> option from this file and <tt>/etc/ppp/options.pptp</tt>.</p> <p> </p> </li> <li>start the tunnel using the <em>pon</em> command:                    <p> </p> <p>to further diagnose a failure, add options to the command:</p> <p> </p> <p>Note: we have further information on <a href="http://pptpclient.sourceforge.net/howto-diagnosis.phtml#debug" target="_blank" rel="external">enabling debug mode</a>, and on <a href="http://pptpclient.sourceforge.net/howto-diagnosis.phtml" target="_blank" rel="external">diagnosing problems</a>.</p> <p> </p> </li> <li>stop the tunnel using the <em>poff</em> command:                    <p> </p> <p> </p> </li> <li>to script the tunnel connection so that something is done as soon as the tunnel is up, use either <tt>ip-up.d</tt> scripts or the <em>updetach</em> keyword.                    <p> </p> <ol> <li>see the <a href="http://pptpclient.sourceforge.net/routing.phtml#automatic-setup" target="_blank" rel="external">Routing HOWTO</a> for examples of <tt>ip-up.d</tt> scripting that adds routes or iptables rules.                        <p> </p> </li> <li>using <em>updetach</em> will cause <tt>pppd</tt> to fork, detach, and exit with success once the network link is up.  This example connects a provider link, then the tunnel, then runs <tt>fetchmail</tt> to get new e-mail:                        <p> </p> <p>Note: the double ampersand &amp;&amp; means that the commands following it will only be executed if the command to the left of it was successful.  If the tunnel fails to connect, the fetchmail will not happen.</p> <p> </p> </li> </ol> </li> <li>to have the tunnel automatically restarted if it fails, add the option <em>persist</em> to either the command line or the <tt>/etc/ppp/peers/$TUNNEL</tt> file.                    <p> </p> </li> <li>to have the tunnel started on system boot:                    <p> </p> <ul> <li>for Debian Sarge and later, edit the <tt>/etc/network/interfaces</tt> file, and add this section:                        <p> </p> <p> </p> </li> <li>for Debian Woody, edit the <tt>/etc/ppp/no_ppp_on_boot</tt> file, remove the first line comment, and change the word <em>provider</em> to the name of your tunnel, so that it looks like this:                        <p> </p> <p>(The line … means the other lines in the file, it doesn’t mean a line with three dots.)</p> <p>Then rename the no_ppp_on_boot file and make it executable:</p> <p> </p> </li> </ul>                    Every time your computer starts, the tunnel will be started automatically.                    <p> </p> </li> <li>to set up routing, read our <a href="http://pptpclient.sourceforge.net/routing.phtml" target="_blank" rel="external">Routing HOWTO</a>.</li> <br> <em><tt>#!/bin/sh<br>                    # modified by jfo, 2008-9-2<br>                    # pppd ip-up script for all-to-tunnel routing<br>                    # you can place it in /etc/ppp/ip-up.d/<br> <br>                    # name of primary network interface (before tunnel)<br>                    #PRIMARY=eth0<br>                    PRIMARY=$(ip route | grep default | cut -d&quot; &quot; -f 3)<br>                    PRIMARY_DEV=$(ip route | grep default | cut -d&quot; &quot; -f 5)<br> <br>                    # address of tunnel server<br>                    SERVER=tunnel.example.com<br> <br>                    # provided by pppd: string to identify connection aka ipparam option<br>                    CONNECTION=$6<br>                    if [ &quot;${CONNECTION}&quot; = &quot;&quot; ]; then CONNECTION=${PPP_IPPARAM}; fi<br> <br>                    # provided by pppd: interface name<br>                    TUNNEL=$1<br>                    if [ &quot;${TUNNEL}&quot; = &quot;&quot; ]; then TUNNEL=${PPP_IFACE}; fi<br> <br>                    # if we are being called as part of the tunnel startup<br>                    if [ &quot;${CONNECTION}&quot; = &quot;tunnel&quot; ] ; then<br> <br>                    &nbsp;&nbsp;   # direct tunnelled packets to the tunnel server<br>                    &nbsp;&nbsp;   # route add -host ${SERVER} dev ${PRIMARY}<br>                    &nbsp;&nbsp;   route add -host ${SERVER} gw ${PRIMARY}<br> <br>                    &nbsp;&nbsp;   # direct all other packets into the tunnel<br>                    &nbsp;&nbsp;   route del default ${PRIMARY_DEV}<br>                    &nbsp;&nbsp;   route add default dev ${TUNNEL}<br> <br>                    fi</tt></em><br> <br> <br> <br> <br> <br> <br> <br> <br>                    ~~end</del> </p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2008/08/29/【zz】Ubuntu-Installation/" rel="next" title="【zz】Ubuntu Installation">
                <i class="fa fa-chevron-left"></i> 【zz】Ubuntu Installation
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2008/09/09/ubuntu-8-04：linux-restricted-modules-linux-ubuntu-modules/" rel="prev" title="ubuntu-8.04：linux-restricted-modules & linux-ubuntu-modules">
                ubuntu-8.04：linux-restricted-modules & linux-ubuntu-modules <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/wp-content/uploads/penguin.gif"
               alt="jfo" />
          <p class="site-author-name" itemprop="name">jfo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">605</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jfojfo" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/jfojfo" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pickbox.me" title="收藏夹" target="_blank">收藏夹</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://note.pickbox.me" title="网络剪贴板" target="_blank">网络剪贴板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://iguangba.pickbox.me" title="爱逛吧" target="_blank">爱逛吧</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2007 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jfo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  

  
<script type="text/javascript" src="http://p.pickbox.me/js/pv.js"></script>



</body>
</html>
