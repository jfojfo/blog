<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>New Tricks in XMLHttpRequest2 | jfo planet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="&amp;nbsp;http://www.html5rocks.com/en/tutorials/file/xhr2/&amp;nbsp;IntroductionOne of the unsung heros in the HTML5 universe is XMLHttpRequest.  Strictly speaking XHR2 isn’t HTML5. However, it’s part of th">
<meta property="og:type" content="article">
<meta property="og:title" content="New Tricks in XMLHttpRequest2">
<meta property="og:url" content="http://blog.pickbox.me/2011/06/11/New-Tricks-in-XMLHttpRequest2/index.html">
<meta property="og:site_name" content="jfo planet">
<meta property="og:description" content="&amp;nbsp;http://www.html5rocks.com/en/tutorials/file/xhr2/&amp;nbsp;IntroductionOne of the unsung heros in the HTML5 universe is XMLHttpRequest.  Strictly speaking XHR2 isn’t HTML5. However, it’s part of th">
<meta property="og:updated_time" content="2016-10-15T04:38:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="New Tricks in XMLHttpRequest2">
<meta name="twitter:description" content="&amp;nbsp;http://www.html5rocks.com/en/tutorials/file/xhr2/&amp;nbsp;IntroductionOne of the unsung heros in the HTML5 universe is XMLHttpRequest.  Strictly speaking XHR2 isn’t HTML5. However, it’s part of th">
  
    <link rel="alternative" href="/atom.xml" title="jfo planet" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.ico">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">jfo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">分类</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">jfo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://img.pickbox.me/wp-content/uploads/penguin.gif" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">jfo</h1>
			</hgroup>
			
			<p class="header-subtitle">Hope is the best gift that tomorrow gives.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/jfojfo" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jfojfo" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-New-Tricks-in-XMLHttpRequest2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      New Tricks in XMLHttpRequest2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
         <p>&nbsp;</p><p><a target="_blank" href="http://www.html5rocks.com/en/tutorials/file/xhr2/">http://www.html5rocks.com/en/tutorials/file/xhr2/</a></p><p>&nbsp;</p><p>Introduction</p><p>One of the unsung heros in the HTML5 universe is XMLHttpRequest.  Strictly speaking XHR2 isn’t HTML5. However, it’s part of the incremental improvements  browser vendors are making to the core platform. I’m including XHR2 in our new bag of  goodies because it plays such an integral part in today’s complex web apps.</p><p>Turns out our old friend got a huge makeover but many folks  are unaware of its new features. <a href="http://dev.w3.org/2006/webapi/%20-2/" target="_blank" rel="external">XMLHttpRequest Level 2</a>  introduces a slew of new capabilities which put an end to crazy hacks in our web apps;  things like cross-origin requests, uploading progress events,  and support for uploading/downloading binary data. These allow AJAX  to work in concert with many of the bleeding edge HTML5 APIs such as <a href="http://www.html5rocks.com/tutorials/file/filesystem/" target="_blank" rel="external">File System API</a>,  <a href="http://chromium.googlecode.com/svn/trunk/samples/audio/specification/specification.html" target="_blank" rel="external">Web Audio API</a>,  and WebGL.</p><p>This tutorial highlights some of the new features in XMLHttpRequest,  especially those that can be used for <a href="http://www.html5rocks.com/tutorials/file/dndfiles/" target="_blank" rel="external">working with files</a>.</p>Fetching data<p>Fetching a file as a binary blob has been painful with XHR. Technically,  it wasn’t even possible. One trick that has been well documented involves  overriding the mime type with a user-defined charset as seen below.</p><p>The old way to fetch an image:</p>var xhr =newXMLHttpRequest();<br>xhr.open(‘GET’,’/path/to/image.png’,true);<br><br>// Hack to pass bytes through unprocessed.<br><b>xhr.overrideMimeType(‘text/plain; charset=x-user-defined’);</b><br><br>xhr.onreadystatechange =function(e){<br>&nbsp; if(this.readyState ==4&amp;&amp;this.status ==200){<br>&nbsp; &nbsp; var binStr =this.responseText;<br>&nbsp; &nbsp; for(var i =0, len = binStr.length; i &lt; len;++i){<br>&nbsp; &nbsp; &nbsp; <b>var c = binStr.charCodeAt(i);</b><br>&nbsp; &nbsp; &nbsp; <b>//String.fromCharCode(c &amp; 0xff);</b><br>&nbsp; &nbsp; &nbsp; <b>varbyte= c &amp;0xff; &nbsp;// byte at offset i</b><br>&nbsp; &nbsp; }<br>&nbsp; }<br>};<br><br>xhr.send();<p>While this works, what you actually get back in the responseText  is not a binary blob. It is a binary string representing the image file.  We’re tricking the server into passing the data back, unprocessed.  Even though this little gem works, I’m going to call it black magic and advise  against it. Anytime you resort to character code hacks and string manipulation  for coercing data into a desirable format, that’s a problem.</p>Specifying a response format<p>In the previous example, we downloaded the image as a binary &quot;file&quot;  by overriding the server’s mime type and processing the response text as a binary string.  Instead, let’s leverage XMLHttpRequest’s new  responseType and response properties to inform  the browser what format we want the data returned as.</p>xhr.<strong>responseType</strong><br>Before sending a request, set the xhr.responseType    to &quot;text&quot;, &quot;arraybuffer&quot;, &quot;blob&quot;, or &quot;document&quot;, depending on your data needs.    Note, setting xhr.responseType = ‘’ (or omitting) will default    the response to &quot;text&quot;.xhr.<strong>response</strong>After a successful request, the xhr’s response property will    contain the requested data as a DOMString, ArrayBuffer,    Blob, or Document (depending on what was set for    responseType.)<p>With this new awesomeness, we can rework the previous example, but this time,  fetch the image as an ArrayBuffer instead of a string. Handing the  buffer over to the BlobBuilder API creates a Blob:</p>BlobBuilder= window.MozBlobBuilder|| window.WebKitBlobBuilder|| window.BlobBuilder;<br><br>var xhr =newXMLHttpRequest();<br>xhr.open(‘GET’,’/path/to/image.png’,true);<br><b>xhr.responseType =’arraybuffer’;</b><br><br><b>xhr.onload</b>=function(e){<br>&nbsp; if(this.status ==200){<br>&nbsp; &nbsp; var bb =newBlobBuilder();<br>&nbsp; &nbsp; bb.append(<b>this.response</b>);// Note: not xhr.responseText<br><br>&nbsp; &nbsp; var blob = bb.getBlob(‘image/png’);<br>&nbsp; &nbsp; …<br>&nbsp; }<br>};<br><br>xhr.send();<p>Much nicer!</p>ArrayBuffer responses<p>An <a href="https://developer.mozilla.org/en/%20_typed_arrays/ArrayBuffer" target="_blank" rel="external">ArrayBuffer</a>    is a generic fixed-length container for binary data. They are super handy if you    need a generalized buffer of raw data, but the real power behind these guys is that    you can create &quot;views&quot; of the underlying data using <a href="https://developer.mozilla.org/en/%20_typed_arrays" target="_blank" rel="external">JavaScript typed arrays</a>.    In fact, multiple views can be created from a single ArrayBuffer source.    For example, you could create an 8-bit integer array that shares the same ArrayBuffer    as an existing 32-bit integer array from the same data. The underlying data    remains the same, we just create different representations of it.</p><p>As an example, the following fetches our same image as an ArrayBuffer,    but this time, creates an unsigned 8-bit integer array from that data buffer:</p>var xhr =newXMLHttpRequest();<br>xhr.open(‘GET’,’/path/to/image.png’,true);<br><b>xhr.responseType =’arraybuffer’;</b><br><br><b>xhr.onload</b>=function(e){<br>&nbsp; var uInt8Array =new<b>Uint8Array</b>(<b>this.response</b>);// this.response == uInt8Array.buffer<br>&nbsp; // var byte3 = uInt8Array[4]; // byte at offset 4<br>&nbsp; …<br>};<br><br>xhr.send();Blob responses<p>If you want to work directly with a <a href="https://developer.mozilla.org/en/DOM/Blob" target="_blank" rel="external">Blob</a> and/or  don’t need to manipulate any of the file’s bytes, use xhr.responseType=’blob’  (currently unimplemented in Chrome (<a href="http://crbug.com/52486" target="_blank" rel="external">crbug.com/52486</a>):</p>window.URL = window.URL || window.webkitURL; &nbsp;// Take care of vendor prefixes.<br><br>var xhr =newXMLHttpRequest();<br>xhr.open(‘GET’,’/path/to/image.png’,true);<br><b>xhr.responseType =’blob’;</b><br><br><b>xhr.onload</b>=function(e){<br>&nbsp; if(this.status ==200){<br>&nbsp; &nbsp; var blob =<b>this.response</b>;<br><br>&nbsp; &nbsp; var img = document.createElement(‘img’);<br>&nbsp; &nbsp; img.onload =function(e){<br>&nbsp; &nbsp; &nbsp; <b>window.URL.revokeObjectURL(img.src);</b>// Clean up after yourself.<br>&nbsp; &nbsp; };<br>&nbsp; &nbsp; img.src =<b>window.URL.createObjectURL(blob);</b><br>&nbsp; &nbsp; document.body.appendChild(img);<br>&nbsp; &nbsp; …<br>&nbsp; }<br>};<br><br>xhr.send();<p>A Blob can be used in a number of places, including savingit to <a href="http://www.html5rocks.com/tutorials/indexeddb/todo/" target="_blank" rel="external">indexedDB</a>, writing it to the HTML5 <a href="http://www.html5rocks.com/tutorials/file/filesystem/" target="_blank" rel="external">File System</a>,or <a href="http://www.html5rocks.com/tutorials/workers/basics/#toc-inlineworkers-bloburis" target="_blank" rel="external">creating an Blob URL</a>, as seenin this example.</p>Sending data<p>Being able to <a href="http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-response" target="_blank" rel="external">download data in different formats</a> is great, but it doesn’t  get us anywhere if we can’t send these rich formats back to home base (the server).  XMLHttpRequest has limited us to sending DOMString  or Document (XML) data for some time. Not anymore. A revamped send()  method has been overridden to accept any of the following types:  DOMString, Document, FormData, Blob,  File, ArrayBuffer. The examples in the rest of this  section demonstrate sending data using each type.</p>Sending string data: xhr.send(DOMString)function sendText(txt){<br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’,’/server’,true);<br>&nbsp; xhr.onload =function(e){<br>&nbsp; &nbsp; if(this.status ==200){<br>&nbsp; &nbsp; &nbsp; console.log(<b>this.responseText</b>);<br>&nbsp; &nbsp; }<br>&nbsp; };<br><br>&nbsp; xhr.send(txt);<br>}<br><br>sendText(<b>‘test string’</b>);function sendTextNew(txt){<br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’,’/server’,true);<br>&nbsp; <b>xhr.responseType =’text’;</b><br>&nbsp; xhr.onload =function(e){<br>&nbsp; &nbsp; if(this.status ==200){<br>&nbsp; &nbsp; &nbsp; console.log(<b>this.response</b>);<br>&nbsp; &nbsp; }<br>&nbsp; };<br>&nbsp; xhr.send(txt);<br>}<br><br>sendText2(<b>‘test string’</b>);<p>There’s nothing new here, though the right snippet is slightly different.  It sets responseType=’text’ for comparison. Again, omitting that line  yields the same results.</p>Submitting forms: xhr.send(FormData)<p>Many people are probably accustomed to using <a href="http://jquery.malsup.com/form/" target="_blank" rel="external">jQuery plugins</a>  or other libraries to handle AJAX form submissions. Instead, we can use <a href="https://developer.mozilla.org/en/%20/FormData" target="_blank" rel="external">FormData</a>,  another new data type conceived for XHR2. FormData  is convenient for creating an HTML &lt;form&gt; on-the-fly, in JavaScript.  That form can then be submitted using AJAX:</p>function sendForm(){<br>&nbsp; var formData =new<b>FormData</b>();<br>&nbsp; <b>formData.append</b>(‘username’,’johndoe’);<br>&nbsp; <b>formData.append</b>(‘id’,123456);<br><br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’,’/server’,true);<br>&nbsp; xhr.onload =function(e){…};<br><br>&nbsp; xhr.send(<b>formData</b>);<br>}<p>Essentially, we’re just dynamically creating a &lt;form&gt; and tacking on  &lt;input&gt; values to it by calling the append method.</p><p>Of course, you don’t need to create a &lt;form&gt; from scratch.  FormData objects can be initialized from and existing HTMLFormElement  on the page. For example:</p>&lt;formid=&quot;myform&quot;name=&quot;myform&quot;action=&quot;/server&quot;&gt;<br>&nbsp; &lt;inputtype=&quot;text&quot;name=&quot;username&quot;value=&quot;johndoe&quot;&gt;<br>&nbsp; &lt;inputtype=&quot;number&quot;name=&quot;id&quot;value=&quot;123456&quot;&gt;<br>&nbsp; &lt;inputtype=&quot;submit&quot;onclick=&quot;<b>return sendForm(this.form);</b>&quot;&gt;<br>&lt;/form&gt;function sendForm(form){<br>&nbsp; var formData =new<b>FormData</b>(form);<br><br>&nbsp; <b>formData.append</b>(‘secret_token’,’1234567890’);// Append extra data before send.<br><br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’, form.action,true);<br>&nbsp; xhr.onload =function(e){…};<br><br>&nbsp; xhr.send(<b>formData</b>);<br><br>&nbsp; returnfalse;// Prevent page from submitting.<br>}<p>An HTML form can include file uploads (e.g. &lt;input type=&quot;file&quot;&gt;)  and  FormData can handle that too. Simply append the file(s) and the browser will  construct a multipart/form-data request when send() is called:</p>function uploadFiles(url, files){<br>&nbsp; var formData =new<b>FormData</b>();<br><br>&nbsp; for(var i =0, file; file = files[i];++i){<br>&nbsp; &nbsp; <b>formData.append(file.name, file);</b><br>&nbsp; }<br><br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’, url,true);<br>&nbsp; xhr.onload =function(e){…};<br><br>&nbsp; xhr.send(<b>formData</b>); &nbsp;// multipart/form-data<br>}<br><br>document.querySelector(‘input[type=&quot;file&quot;]’).addEventListener(‘change’,function(e){<br>&nbsp; uploadFiles(‘/server’,this.files);<br>},false);Uploading a file or blob: xhr.send(Blob)<p>We can also send File or Blob data using XHR.  Keep in mind all Files are Blobs, so either works here.</p><p>This example creates a new text file from scratch using the BlobBuilder API  and uploads that Blob to the server. The code also sets up a handler  to inform the user of the upload’s progress:</p>&lt;progressmin=&quot;0&quot;max=&quot;100&quot;value=&quot;0&quot;&gt;0% complete&lt;/progress&gt;function upload(blobOrFile){<br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’,’/server’,true);<br>&nbsp; xhr.onload =function(e){…};<br><br>&nbsp; // Listen to the upload progress.<br>&nbsp; var progressBar = document.querySelector(‘progress’);<br>&nbsp; <b>xhr.upload.onprogress</b>=function(e){<br>&nbsp; &nbsp; if(e.lengthComputable){<br>&nbsp; &nbsp; &nbsp; progressBar.value =(e.loaded / e.total)<em>100;<br>&nbsp; &nbsp; &nbsp; progressBar.textContent = progressBar.value;// Fallback for unsupported browsers.<br>&nbsp; &nbsp; }<br>&nbsp; };<br><br>&nbsp; xhr.send(<b>blobOrFile</b>);<br>}<br><br>// Take care of vendor prefixes.<br>BlobBuilder= window.MozBlobBuilder|| window.WebKitBlobBuilder|| window.BlobBuilder;<br><br>var bb =new<b>BlobBuilder</b>();<br><b>bb.append</b>(‘hello world’);<br><br>upload(<b>bb.getBlob(‘text/plain’)</b>);Uploading a chunk of bytes: xhr.send(ArrayBuffer)<p>Last but not least, we can send ArrayBuffers as the XHR’s payload.</p>function sendArrayBuffer(){<br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’,’/server’,true);<br>&nbsp; xhr.onload =function(e){…};<br><br>&nbsp; <b>var uInt8Array =new</b><b>Uint8Array</b>([1,2,3]);<br><br>&nbsp; xhr.send(<b>uInt8Array.buffer</b>);<br><p>}</p><p></p><p>&nbsp;</p><p>&nbsp;</p><p>Practical examples</p><p><strong>Download + save files to the HTML5 file system</strong></p><p>Let’s say you have an image gallery and want to fetch a bunch  of images then save them locally using the <a href="http://www.html5rocks.com/tutorials/file/filesystem/" target="_blank" rel="external">HTML5 File System</a>.  One way to accomplish this would be to request images as ArrayBuffers,  build a Blob from the data, and write the blob using FileWriter:</p>window.requestFileSystem &nbsp;= window.requestFileSystem || window.webkiRequestFileSystem;<br><br>function onError(e){<br>&nbsp; console.log(‘Error’, e);<br>}<br><br>var xhr =newXMLHttpRequest();<br>xhr.open(‘GET’,’/path/to/image.png’,true);<br><b>xhr.responseType =’arraybuffer’;</b><br><br><b>xhr.onload</b>=function(e){<br><br>&nbsp; <b>window.requestFileSystem</b>(TEMPORARY,1024</em>1024,function(fs){<br>&nbsp; &nbsp; fs.root.getFile(‘image.png’,{create:true},function(fileEntry){<br>&nbsp; &nbsp; &nbsp; fileEntry.createWriter(function(writer){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; writer.onwrite =function(e){…};<br>&nbsp; &nbsp; &nbsp; &nbsp; writer.onerror =function(e){…};<br><br>&nbsp; &nbsp; &nbsp; &nbsp; <b>var bb =newBlobBuilder();</b><br>&nbsp; &nbsp; &nbsp; &nbsp; <b>bb.append</b>(<b>this.response</b>);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; <b>writer.write</b>(bb.getBlob(‘image/png’));<br><br>&nbsp; &nbsp; &nbsp; }, onError);<br>&nbsp; &nbsp; }, onError);<br>&nbsp; }, onError);<br>};<br><br>xhr.send();<p><strong>Note:</strong> to use this code, see <a href="http://www.html5rocks.com/tutorials/file/filesystem/#toc-support" target="_blank" rel="external">browser support &amp; storage limitations</a>  in the &quot;<a href="http://www.html5rocks.com/tutorials/file/filesystem/" target="_blank" rel="external">Exploring the FileSystem APIs</a>&quot; tutorial.</p><strong>Slicing a file and uploading each portion</strong><p>Using the <a href="http://www.html5rocks.com/tutorials/file/dndfiles/" target="_blank" rel="external">File APIs</a>, we can minimize  the work to upload a large file. The technique is to slice the upload into multiple chunks,  spawn an XHR for each portion, and put the file together on the server. This is  similar to how GMail uploads large attachments so quickly. Such a technique could also be  used to get around Google App Engine’s 32MB http request limit.</p>window.BlobBuilder= window.MozBlobBuilder|| window.WebKitBlobBuilder||<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;window.BlobBuilder;<br><br>function upload(blobOrFile){<br>&nbsp; var xhr =newXMLHttpRequest();<br>&nbsp; xhr.open(‘POST’,’/server’,true);<br>&nbsp; xhr.onload =function(e){…};<br>&nbsp; xhr.send(blobOrFile);<br>}<br><br>document.querySelector(‘input[type=&quot;file&quot;]’).addEventListener(‘change’,function(e){<br>&nbsp; var blob =this.files[0];<br><br>&nbsp; const BYTES_PER_CHUNK =1024*1024;// 1MB chunk sizes.<br>&nbsp; const SIZE = blob.size;<br><br>&nbsp; var start =0;<br>&nbsp; varend= BYTES_PER_CHUNK;<br><br>&nbsp; while(start &lt; SIZE){<br><br>&nbsp; &nbsp; // Note: blob.slice has changed semantics and been prefixed. See <a href="http://goo.gl/U9mE5" target="_blank" rel="external">http://goo.gl/U9mE5</a>.<br>&nbsp; &nbsp; if(‘mozSlice’in blob){<br>&nbsp; &nbsp; &nbsp; var chunk = blob.mozSlice(start,end);<br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; var chunk = blob.webkitSlice(start,end);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; upload(chunk);<br><br>&nbsp; &nbsp; start =end;<br>&nbsp; &nbsp; end= start + BYTES_PER_CHUNK;<br>&nbsp; }<br>},false);<br><br>})();<p>What is not shown here is the code to reconstruct the file on the server.</p><p><strong>Try it!</strong></p> 
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2011/06/11/New-Tricks-in-XMLHttpRequest2/" class="archive-article-date">
  	<time datetime="2011-06-11T04:01:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2011-06-11</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/python-js-php-html-mysql-http/">python/js/php/html/mysql/http</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2011/06/13/HTML5-in-5-minutes/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          HTML5 in 5 minutes
        
      </div>
    </a>
  
  
    <a href="/2011/06/11/JavaScript-Equality-and-Identity/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">JavaScript Equality (==) and Identity (===)</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 jfo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">87</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Arduino-OpenWrt/">Arduino/OpenWrt</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DefaultCategory/">DefaultCategory</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Distributed-Computing/">Distributed Computing</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Google/">Google</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">67</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-App/">Linux App</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Debug/">Linux Debug</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-Virtualization/">Linux Virtualization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac-OS-X/">Mac OS X</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Saying/">Saying</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebDev/">WebDev</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-template-gp-boost/">c++/c++ template/gp/boost</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-algorithm/">c/c++/algorithm</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x-模拟器/">cocos2d-x/模拟器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/com组件/">com组件</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">framework</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gcc-binutils-make-共享库/">gcc/binutils/make/共享库</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/js-html-python/">js/html/python</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/l4ka-pistachio-iguana/">l4ka::pistachio/iguana</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-图形/">linux 图形</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python-js-php-html-mysql-http/">python/js/php/html/mysql/http</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/self-collect/">self_collect</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unifiedkernel-wine-reactos/">unifiedkernel/wine/reactos</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/教育/">教育</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学-物理/">数学/物理</a><span class="category-list-count">3</span></li></ul>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://iguangba.pickbox.me/">爱逛吧</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.pickbox.me/">收藏夹</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://note.pickbox.me/">网络剪贴板</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">jfojfo#gmail.com</div>
  	  	
    	</section>
    
  </div>
  
</div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>